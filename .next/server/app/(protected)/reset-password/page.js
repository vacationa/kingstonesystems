(()=>{var a={};a.id=634,a.ids=[634],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7629:(a,b,c)=>{"use strict";c.d(b,{p:()=>g});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,type:b,...c},e)=>(0,d.jsx)("input",{type:b,className:(0,f.cn)("flex h-10 w-full rounded-lg border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 input-focus-gray",a),ref:e,...c}));g.displayName="Input"},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14390:(a,b,c)=>{Promise.resolve().then(c.bind(c,89514))},14897:(a,b,c)=>{"use strict";c.d(b,{b:()=>g});var d=c(21124),e=c(19217),f=c(23312);function g({children:a,pendingText:b="Submitting...",...c}){let{pending:g}=(0,f.useFormStatus)();return(0,d.jsx)(e.$,{variant:"default",className:"mt-8",type:"submit","aria-disabled":g,...c,children:g?b:a})}},15514:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},18458:(a,b,c)=>{"use strict";c.d(b,{RealtimeProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call RealtimeProvider() from the server but RealtimeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/context/realtime-context.tsx","RealtimeProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useRealtime() from the server but useRealtime is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/context/realtime-context.tsx","useRealtime")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19217:(a,b,c)=>{"use strict";c.d(b,{$:()=>l});var d=c(21124),e=c(38301),f=c(70469),g=c(26691),h=c(41636),i=c.n(h),j=c(15514);let k=(0,g.F)("inline-flex items-center justify-center whitespace-nowrap rounded-full sm:text-base font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:`bg-[#0A66C2] text-white border-none rounded-xl shadow-md hover:shadow-lg transition-all hover:bg-[#0A66C2]/90 ${i().variable} font-aeonik`,destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-retro-right hover:shadow-retro-right-hover",outline:"border-2 border-input bg-background hover:bg-accent hover:text-accent-foreground shadow-retro-right hover:shadow-retro-right-hover",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{sm:"h-7 px-2 text-xs sm:h-9 sm:px-3 sm:text-sm",icon:"h-8 w-8 sm:h-10 sm:w-10",default:"h-11 px-6 py-2 sm:px-8 sm:py-3",lg:"h-11 px-6 text-base sm:h-12 sm:px-8 sm:text-lg"}},defaultVariants:{variant:"default",size:"default"}}),l=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},h)=>{let i=e?f.DX:"button";return(0,d.jsx)(i,{className:(0,j.cn)(k({variant:b,size:c,className:a})),ref:h,...g})});l.displayName="Button"},20079:(a,b,c)=>{Promise.resolve().then(c.bind(c,83762)),Promise.resolve().then(c.bind(c,18458)),Promise.resolve().then(c.bind(c,34848))},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29056:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/adhi/Repos/kingstonesystems/app/(protected)/reset-password/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/(protected)/reset-password/page.tsx","default")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29531:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(75338),e=c(82161),f=c(53659);async function g({children:a}){return await (0,f.xA)()?(0,d.jsx)("main",{className:"flex-1 flex justify-center items-center w-full p-4",children:a}):(0,e.redirect)("/sign-in")}},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},34848:(a,b,c)=>{"use strict";c.d(b,{UserProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/context/user-context.tsx","UserProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/context/user-context.tsx","useUser")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},45119:(a,b,c)=>{"use strict";c.d(b,{Wu:()=>h,Zp:()=>g});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground",a),...b}));g.displayName="Card",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b})).displayName="CardHeader",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b})).displayName="CardTitle",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b})).displayName="CardDescription";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));h.displayName="CardContent",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter"},47763:(a,b,c)=>{"use strict";c.d(b,{U:()=>f});var d=c(27968),e=c(86802);let f=async()=>{try{let a;try{a=await (0,e.UL)()}catch(b){console.error("Error creating cookie store:",b),a={getAll:()=>[],get:()=>void 0,set:()=>{}}}return(0,d.createServerClient)("https://jtnyrkqxsrlbldbnsohf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp0bnlya3F4c3JsYmxkYm5zb2hmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5MzI3NTgsImV4cCI6MjA2NTUwODc1OH0.tnLvT4n4aQela3pUHUnvOHIwvY_Twfr9T-Fplyul4Ug",{cookies:{getAll(){try{return a.getAll()}catch(a){return console.error("Error getting all cookies:",a),[]}},setAll(b){try{b.forEach(({name:b,value:c,options:d})=>{a.set(b,c,d)})}catch(a){console.error("Error setting cookies:",a)}}}})}catch(a){throw console.error("Error creating Supabase client:",a),a instanceof Error&&(console.error("Error message:",a.message),console.error("Error stack:",a.stack)),a}}},53659:(a,b,c)=>{"use strict";c.d(b,{BP:()=>p,JR:()=>n,Kd:()=>o,Lz:()=>k,RX:()=>j,hx:()=>m,jN:()=>l,xA:()=>q});var d=c(75879);c(68633);var e=c(47763),f=c(86802),g=c(82161),h=c(51669);let i=async(a,b)=>{let{error:c}=await b.from("linkedin_settings").upsert({user_id:a,max_message_per_day:50,max_connections_per_day:30,total_visits_per_day:100},{onConflict:"user_id",ignoreDuplicates:!0});c&&console.error("Error upserting default LinkedIn settings:",c.message)},j=async a=>{let b=a.get("email")?.toString(),c=a.get("password")?.toString(),d=a.get("firstName")?.toString(),f=a.get("lastName")?.toString(),g=a.get("referralCode")?.toString();try{let a=await (0,e.U)(),{data:b,error:c}=await a.from("profiles").select("count").single();if(c&&"PGRST116"!==c.code)return console.error("Database connection error:",c.message),{error:"Unable to connect to the database. Please try again later."}}catch(a){return console.error("Database connection error:",a),{error:"Unable to connect to the database. Please try again later."}}let h=await (0,e.U)();if(!b||!c)return{error:"Email and password are required"};try{let{data:a,error:e}=await h.from("profiles").select("*").eq("email",b).single();if(e&&"PGRST116"!==e.code)return console.error("Error checking existing profile:",e.message),{error:"Error checking existing profile"};if(a)return{error:"This email may already be in use"};let i=1;if(g){let a=g.toUpperCase();a.includes("2WK")?i=2:a.includes("YC")&&(i=8)}let{data:j,error:k}=await h.auth.signUp({email:b,password:c,options:{data:{first_name:d,last_name:f,email:b,trial_weeks:i}}});if(k)return console.error("Sign up error:",k.message),{error:"Failed to create account. Please try again."};if(!j?.user)return console.error("No user data returned from signup"),{error:"Failed to create user"};if(j.user?.identities?.length===0)return{error:"This email may already be in use"};return await new Promise(a=>setTimeout(a,1e3)),{success:!0,message:"Sign up successful! Please check your email.",data:{email:b}}}catch(a){return console.error("Unexpected error during sign up:",a instanceof Error?a.message:a),{error:"An unexpected error occurred during sign up"}}},k=async a=>{let b=a.get("email"),c=a.get("password"),d=await (0,e.U)(),g=(await (0,f.b3)()).get("referer")||"";if(!b||!c)return{error:"Email and password are required"};if(g.includes("operator-login")){let{error:a}=await d.auth.signInWithPassword({email:b,password:c});if(a)return console.error(a.message),{error:"Invalid email or password"};let{data:{user:e}}=await d.auth.getUser();return e?.id&&await i(e.id,d),{success:!0,message:"Sign in successful!"}}return await d.auth.signInWithPassword({email:b,password:c}),{error:"Invalid email or password"}},l=async a=>{let b=a.get("email")?.toString(),c=await (0,e.U)(),d=(await (0,f.b3)()).get("origin");if(!b)return{error:"Email is required"};let{error:g}=await c.auth.resetPasswordForEmail(b,{redirectTo:`${d}/api/auth/callback?redirect_to=/reset-password`});return g?(console.error(g.message),{error:"Failed to send reset email. Please try again."}):{success:!0,message:"Check your email for a link to reset your password."}},m=async a=>{let b=await (0,e.U)(),c=a.get("password"),d=a.get("confirmPassword");if(!c||!d)return{error:"Password and confirm password are required"};if(c!==d)return{error:"Passwords do not match"};let{error:f}=await b.auth.updateUser({password:c});return f?(console.error(f.message),{error:"Failed to reset password. Please try again."}):{success:!0,message:"Password has been reset successfully."}},n=async a=>{let b=a.get("otp")?.toString(),c=a.get("email")?.toString(),d=await (0,e.U)();if(!b||!c)return{error:"OTP and email are required"};let{error:f}=await d.auth.verifyOtp({email:c,token:b,type:"email"});if(f)return console.error(f.message),{error:"Invalid verification code. Please try again."};let{data:{user:g}}=await d.auth.getUser();return g?.id&&await i(g.id,d),{success:!0,message:"Account created successfully",data:{email:c}}},o=async()=>{let a=await (0,e.U)();return await a.auth.signOut(),(0,g.redirect)("/sign-in")},p=async()=>{let a=await (0,e.U)();await a.auth.signOut()},q=async()=>{try{let a=await (0,e.U)(),{data:{user:b}}=await a.auth.getUser();return b?.id&&await i(b.id,a),b}catch(a){return console.error("Error checking authentication:",a),null}};(0,h.D)([j,k,l,m,n,o,p,q]),(0,d.A)(j,"7f411d2c5eb171ef310d5c09e9f285f189378a70db",null),(0,d.A)(k,"7ffda1da3ec4b8e6be1acb4fd58ffd3456d55e3f99",null),(0,d.A)(l,"7f9a98121de92b5cd66fcc3109ecfa8cb7c2d0f095",null),(0,d.A)(m,"7f6ab9b2e622354b0acbbb7d19a49d0b4ea73c3e6d",null),(0,d.A)(n,"7f3e34eac4d4336fa6f48d29f5037ecd5c94f8688a",null),(0,d.A)(o,"7f02d8a35e0417a30e01973d0ec112fd82a49a2085",null),(0,d.A)(p,"7f00dfc32a6b7a3078a30afa5d7357c161b35fdb1a",null),(0,d.A)(q,"7fed87a174b932dac2d21189d486d35a2c90f5feed",null)},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66275:(a,b,c)=>{"use strict";c.d(b,{J:()=>l});var d=c(21124),e=c(38301);c(23312);var f=c(70469),g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=(0,f.TL)(`Primitive.${b}`),g=e.forwardRef((a,e)=>{let{asChild:f,...g}=a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,d.jsx)(f?c:b,{...g,ref:e})});return g.displayName=`Primitive.${b}`,{...a,[b]:g}},{}),h=e.forwardRef((a,b)=>(0,d.jsx)(g.label,{...a,ref:b,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));h.displayName="Label";var i=c(26691),j=c(15514);let k=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(h,{ref:c,className:(0,j.cn)(k(),a),...b}));l.displayName=h.displayName},74075:a=>{"use strict";a.exports=require("zlib")},74638:(a,b,c)=>{Promise.resolve().then(c.bind(c,29056))},77570:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"7f00dfc32a6b7a3078a30afa5d7357c161b35fdb1a":()=>d.BP,"7f02d8a35e0417a30e01973d0ec112fd82a49a2085":()=>d.Kd,"7f3e34eac4d4336fa6f48d29f5037ecd5c94f8688a":()=>d.JR,"7f411d2c5eb171ef310d5c09e9f285f189378a70db":()=>d.RX,"7f6ab9b2e622354b0acbbb7d19a49d0b4ea73c3e6d":()=>d.hx,"7f9a98121de92b5cd66fcc3109ecfa8cb7c2d0f095":()=>d.jN,"7fed87a174b932dac2d21189d486d35a2c90f5feed":()=>d.xA,"7ffda1da3ec4b8e6be1acb4fd58ffd3456d55e3f99":()=>d.Lz});var d=c(53659)},78335:()=>{},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},79646:a=>{"use strict";a.exports=require("child_process")},79911:(a,b,c)=>{Promise.resolve().then(c.bind(c,24544)),Promise.resolve().then(c.bind(c,73994)),Promise.resolve().then(c.bind(c,77070))},81060:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["(protected)",{children:["reset-password",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,29056)),"/Users/adhi/Repos/kingstonesystems/app/(protected)/reset-password/page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,29531)),"/Users/adhi/Repos/kingstonesystems/app/(protected)/reset-password/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,95555)),"/Users/adhi/Repos/kingstonesystems/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,71718)),"/Users/adhi/Repos/kingstonesystems/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["/Users/adhi/Repos/kingstonesystems/app/(protected)/reset-password/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/(protected)/reset-password/page",pathname:"/reset-password",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/(protected)/reset-password/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},81630:a=>{"use strict";a.exports=require("http")},83762:(a,b,c)=>{"use strict";c.d(b,{DemoModeProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call DemoModeProvider() from the server but DemoModeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/context/demo-mode-context.tsx","DemoModeProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useDemoMode() from the server but useDemoMode is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/context/demo-mode-context.tsx","useDemoMode")},83997:a=>{"use strict";a.exports=require("tty")},85708:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{callServer:function(){return d.callServer},createServerReference:function(){return f.createServerReference},findSourceMapURL:function(){return e.findSourceMapURL}});let d=c(76779),e=c(6927),f=c(63188)},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},89514:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>fJ});var d=c(21124),e=c(31980),f=c(50937),g=c(99546),h=c(42378),i=c(38301),j=c(85708);let k=(0,j.createServerReference)("7f6ab9b2e622354b0acbbb7d19a49d0b4ea73c3e6d",j.callServer,void 0,j.findSourceMapURL,"resetPasswordAction");var l=c(89962),m=c(14897),n=c(7629),o=c(66275),p=c(45119),q="undefined"!=typeof window?window:void 0,r="undefined"!=typeof globalThis?globalThis:q;"undefined"==typeof self&&(r.self=r),"undefined"==typeof File&&(r.File=function(){});var s=Array.prototype,t=s.forEach,u=s.indexOf,v=null==r?void 0:r.navigator,w=null==r?void 0:r.document,x=null==r?void 0:r.location,y=null==r?void 0:r.fetch,z=null!=r&&r.XMLHttpRequest&&"withCredentials"in new r.XMLHttpRequest?r.XMLHttpRequest:void 0,A=null==r?void 0:r.AbortController,B=null==v?void 0:v.userAgent,C=null!=q?q:{},D={DEBUG:!1,LIB_VERSION:"1.353.1"};function E(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function F(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){E(f,d,e,g,h,"next",a)}function h(a){E(f,d,e,g,h,"throw",a)}g(void 0)})}}function G(){return(G=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function H(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}var I=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],J=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],K=function(a,b){if(void 0===b&&(b=[]),!a)return!1;var c=a.toLowerCase();return J.concat(b).some(a=>{var b=a.toLowerCase();return -1!==c.indexOf(b)})};function L(a,b){return -1!==a.indexOf(b)}var M=function(a){return a.trim()},N=function(a){return a.replace(/^\$/,"")},O=Array.isArray,P=Object.prototype,Q=P.hasOwnProperty,R=P.toString,S=O||function(a){return"[object Array]"===R.call(a)},T=a=>"function"==typeof a,U=a=>a===Object(a)&&!S(a),V=a=>{if(U(a)){for(var b in a)if(Q.call(a,b))return!1;return!0}return!1},W=a=>void 0===a,X=a=>"[object String]"==R.call(a),Y=a=>X(a)&&0===a.trim().length,Z=a=>null===a,$=a=>W(a)||Z(a),_=a=>"[object Number]"==R.call(a)&&a==a,aa=a=>_(a)&&a>0,ab=a=>"[object Boolean]"===R.call(a),ac=a=>L(I,a);function ad(a){return null===a||"object"!=typeof a}function ae(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"}function af(a){return!W(Event)&&function(a,b){try{return a instanceof b}catch(a){return!1}}(a,Event)}var ag=[!0,"true",1,"1","yes"],ah=a=>L(ag,a),ai=[!1,"false",0,"0","no"];function aj(a,b,c,d,e){return b>c&&(d.warn("min cannot be greater than max."),b=c),_(a)?a>c?(d.warn(" cannot be  greater than max: "+c+". Using max value instead."),c):a<b?(d.warn(" cannot be less than min: "+b+". Using min value instead."),b):a:(d.warn(" must be a number. using max or fallback. max: "+c+", fallback: "+e),aj(e||c,b,c,d))}class ak{constructor(a){this.t={},this.i=a.i,this.o=aj(a.bucketSize,0,100,a.h),this.m=aj(a.refillRate,0,this.o,a.h),this.$=aj(a.refillInterval,0,864e5,a.h)}S(a,b){var c=Math.floor((b-a.lastAccess)/this.$);if(c>0){var d=c*this.m;a.tokens=Math.min(a.tokens+d,this.o),a.lastAccess=a.lastAccess+c*this.$}}consumeRateLimit(a){var b,c=Date.now(),d=String(a),e=this.t[d];return e?this.S(e,c):(e={tokens:this.o,lastAccess:c},this.t[d]=e),0===e.tokens||(e.tokens--,0===e.tokens&&(null==(b=this.i)||b.call(this,a)),0===e.tokens)}stop(){this.t={}}}var al,am,an,ao="Mobile",ap="Android",aq="Tablet",ar=ap+" "+aq,as="iPad",at="Apple",au=at+" Watch",av="Safari",aw="BlackBerry",ax="Samsung",ay=ax+"Browser",az=ax+" Internet",aA="Chrome",aB=aA+" OS",aC=aA+" iOS",aD="Internet Explorer",aE=aD+" "+ao,aF="Opera",aG=aF+" Mini",aH="Edge",aI="Microsoft "+aH,aJ="Firefox",aK=aJ+" iOS",aL="Nintendo",aM="PlayStation",aN="Xbox",aO=ap+" "+ao,aP=ao+" "+av,aQ="Windows",aR=aQ+" Phone",aS="Nokia",aT="Ouya",aU="Generic",aV=aU+" "+ao.toLowerCase(),aW=aU+" "+aq.toLowerCase(),aX="Konqueror",aY="(\\d+(\\.\\d+)?)",aZ=RegExp("Version/"+aY),a$=RegExp(aN,"i"),a_=RegExp(aM+" \\w+","i"),a0=RegExp(aL+" \\w+","i"),a1=RegExp(aw+"|PlayBook|BB10","i"),a2={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},a3=function(a,b){let c;return b=b||"",L(a," OPR/")&&L(a,"Mini")?aG:L(a," OPR/")?aF:a1.test(a)?aw:L(a,"IE"+ao)||L(a,"WPDesktop")?aE:L(a,ay)?az:L(a,aH)||L(a,"Edg/")?aI:L(a,"FBIOS")?"Facebook "+ao:L(a,"UCWEB")||L(a,"UCBrowser")?"UC Browser":L(a,"CriOS")?aC:L(a,"CrMo")||L(a,aA)?aA:L(a,ap)&&L(a,av)?aO:L(a,"FxiOS")?aK:L(a.toLowerCase(),aX.toLowerCase())?aX:(c=b)&&L(c,at)||L(a,av)&&!L(a,aA)&&!L(a,ap)?L(a,ao)?aP:av:L(a,aJ)?aJ:L(a,"MSIE")||L(a,"Trident/")?aD:L(a,"Gecko")?aJ:""},a4={[aE]:[RegExp("rv:"+aY)],[aI]:[RegExp(aH+"?\\/"+aY)],[aA]:[RegExp("("+aA+"|CrMo)\\/"+aY)],[aC]:[RegExp("CriOS\\/"+aY)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+aY)],[av]:[aZ],[aP]:[aZ],[aF]:[RegExp("(Opera|OPR)\\/"+aY)],[aJ]:[RegExp(aJ+"\\/"+aY)],[aK]:[RegExp("FxiOS\\/"+aY)],[aX]:[RegExp("Konqueror[:/]?"+aY,"i")],[aw]:[RegExp(aw+" "+aY),aZ],[aO]:[RegExp("android\\s"+aY,"i")],[az]:[RegExp(ay+"\\/"+aY)],[aD]:[RegExp("(rv:|MSIE )"+aY)],Mozilla:[RegExp("rv:"+aY)]},a5=function(a,b){var c=a4[a3(a,b)];if(W(c))return null;for(var d=0;d<c.length;d++){var e=c[d],f=a.match(e);if(f)return parseFloat(f[f.length-2])}return null},a6=[[RegExp(aN+"; "+aN+" (.*?)[);]","i"),a=>[aN,a&&a[1]||""]],[RegExp(aL,"i"),[aL,""]],[RegExp(aM,"i"),[aM,""]],[a1,[aw,""]],[RegExp(aQ,"i"),(a,b)=>{if(/Phone/.test(b)||/WPDesktop/.test(b))return[aR,""];if(new RegExp(ao).test(b)&&!/IEMobile\b/.test(b))return[aQ+" "+ao,""];var c=/Windows NT ([0-9.]+)/i.exec(b);if(c&&c[1]){var d=a2[c[1]]||"";return/arm/i.test(b)&&(d="RT"),[aQ,d]}return[aQ,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,a=>a&&a[3]?["iOS",[a[3],a[4],a[5]||"0"].join(".")]:["iOS",""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,a=>{var b="";return a&&a.length>=3&&(b=W(a[2])?a[3]:a[2]),["watchOS",b]}],[RegExp("("+ap+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+ap+")","i"),a=>a&&a[2]?[ap,[a[2],a[3],a[4]||"0"].join(".")]:[ap,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,a=>{var b=["Mac OS X",""];if(a&&a[1]){var c=[a[1],a[2],a[3]||"0"];b[1]=c.join(".")}return b}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[aB,""]],[/Linux|debian/i,["Linux",""]]],a7=function(a){return a0.test(a)?aL:a_.test(a)?aM:a$.test(a)?aN:RegExp(aT,"i").test(a)?aT:RegExp("("+aR+"|WPDesktop)","i").test(a)?aR:/iPad/.test(a)?as:/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(a)?au:a1.test(a)?aw:/(kobo)\s(ereader|touch)/i.test(a)?"Kobo":RegExp(aS,"i").test(a)?aS:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(a)||/(kf[a-z]+)( bui|\)).+silk\//i.test(a)?"Kindle Fire":/(Android|ZTE)/i.test(a)?new RegExp(ao).test(a)&&!/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(a)||/pixel[\daxl ]{1,6}/i.test(a)&&!/pixel c/i.test(a)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(a)||/lmy47v/i.test(a)&&!/QTAQZ3/i.test(a)?ap:ar:RegExp("(pda|"+ao+")","i").test(a)?aV:RegExp(aq,"i").test(a)&&!RegExp(aq+" pc","i").test(a)?aW:""},a8=a=>a instanceof Error;class a9{constructor(a,b,c){void 0===c&&(c=[]),this.coercers=a,this.stackParser=b,this.modifiers=c}buildFromUnknown(a,b){void 0===b&&(b={});var c=b&&b.mechanism||{handled:!0,type:"generic"},d=this.buildCoercingContext(c,b,0).apply(a),e=this.buildParsingContext(b),f=this.parseStacktrace(d,e);return{$exception_list:this.convertToExceptionList(f,c),$exception_level:"error"}}modifyFrames(a){var b=this;return F(function*(){for(var c of a)c.stacktrace&&c.stacktrace.frames&&S(c.stacktrace.frames)&&(c.stacktrace.frames=yield b.applyModifiers(c.stacktrace.frames));return a})()}coerceFallback(a){var b;return{type:"Error",value:"Unknown error",stack:null==(b=a.syntheticException)?void 0:b.stack,synthetic:!0}}parseStacktrace(a,b){var c,d;return null!=a.cause&&(c=this.parseStacktrace(a.cause,b)),""!=a.stack&&null!=a.stack&&(d=this.applyChunkIds(this.stackParser(a.stack,a.synthetic?b.skipFirstLines:0),b.chunkIdMap)),G({},a,{cause:c,stack:d})}applyChunkIds(a,b){return a.map(a=>(a.filename&&b&&(a.chunk_id=b[a.filename]),a))}applyCoercers(a,b){for(var c of this.coercers)if(c.match(a))return c.coerce(a,b);return this.coerceFallback(b)}applyModifiers(a){var b=this;return F(function*(){var c=a;for(var d of b.modifiers)c=yield d(c);return c})()}convertToExceptionList(a,b){var c,d,e,f={type:a.type,value:a.value,mechanism:{type:null!=(c=b.type)?c:"generic",handled:null==(d=b.handled)||d,synthetic:null!=(e=a.synthetic)&&e}};a.stack&&(f.stacktrace={type:"raw",frames:a.stack});var g=[f];return null!=a.cause&&g.push(...this.convertToExceptionList(a.cause,G({},b,{handled:!0}))),g}buildParsingContext(a){var b;return{chunkIdMap:function(a){var b=globalThis._posthogChunkIds;if(b){var c=Object.keys(b);return an&&c.length===am||(am=c.length,an=c.reduce((c,d)=>{al||(al={});var e=al[d];if(e)c[e[0]]=e[1];else for(var f=a(d),g=f.length-1;g>=0;g--){var h=f[g],i=null==h?void 0:h.filename,j=b[d];if(i&&j){c[i]=j,al[d]=[i,j];break}}return c},{})),an}}(this.stackParser),skipFirstLines:null!=(b=a.skipFirstLines)?b:1}}buildCoercingContext(a,b,c){void 0===c&&(c=0);var d=(c,d)=>{if(d<=4){var e=this.buildCoercingContext(a,b,d);return this.applyCoercers(c,e)}};return G({},b,{syntheticException:0==c?b.syntheticException:void 0,mechanism:a,apply:a=>d(a,c),next:a=>d(a,c+1)})}}function ba(a,b,c,d,e){var f={platform:a,filename:b,function:"<anonymous>"===c?"?":c,in_app:!0};return W(d)||(f.lineno=d),W(e)||(f.colno=e),f}var bb=(a,b)=>{var c=-1!==a.indexOf("safari-extension"),d=-1!==a.indexOf("safari-web-extension");return c||d?[-1!==a.indexOf("@")?a.split("@")[0]:"?",c?"safari-extension:"+b:"safari-web-extension:"+b]:[a,b]},bc=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,bd=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,be=/\((\S*)(?::(\d+))(?::(\d+))\)/,bf=(a,b)=>{var c=bc.exec(a);if(c){var[,d,e,f]=c;return ba(b,d,"?",+e,+f)}var g=bd.exec(a);if(g){if(g[2]&&0===g[2].indexOf("eval")){var h=be.exec(g[2]);h&&(g[2]=h[1],g[3]=h[2],g[4]=h[3])}var[i,j]=bb(g[1]||"?",g[2]);return ba(b,j,i,g[3]?+g[3]:void 0,g[4]?+g[4]:void 0)}},bg=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,bh=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,bi=(a,b)=>{var c=bg.exec(a);if(c){if(c[3]&&c[3].indexOf(" > eval")>-1){var d=bh.exec(c[3]);d&&(c[1]=c[1]||"eval",c[3]=d[1],c[4]=d[2],c[5]="")}var e=c[3],f=c[1]||"?";return[f,e]=bb(f,e),ba(b,e,f,c[4]?+c[4]:void 0,c[5]?+c[5]:void 0)}},bj=/\(error: (.*)\)/;class bk{match(a){return this.isDOMException(a)||this.isDOMError(a)}coerce(a,b){var c=X(a.stack);return{type:this.getType(a),value:this.getValue(a),stack:c?a.stack:void 0,cause:a.cause?b.next(a.cause):void 0,synthetic:!1}}getType(a){return this.isDOMError(a)?"DOMError":"DOMException"}getValue(a){var b=a.name||(this.isDOMError(a)?"DOMError":"DOMException");return a.message?b+": "+a.message:b}isDOMException(a){return ae(a,"DOMException")}isDOMError(a){return ae(a,"DOMError")}}class bl{match(a){return a instanceof Error}coerce(a,b){return{type:this.getType(a),value:this.getMessage(a,b),stack:this.getStack(a),cause:a.cause?b.next(a.cause):void 0,synthetic:!1}}getType(a){return a.name||a.constructor.name}getMessage(a,b){var c=a.message;return c.error&&"string"==typeof c.error.message?String(c.error.message):String(c)}getStack(a){return a.stacktrace||a.stack||void 0}}class bm{constructor(){}match(a){return ae(a,"ErrorEvent")&&null!=a.error}coerce(a,b){var c;return b.apply(a.error)||{type:"ErrorEvent",value:a.message,stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}}var bn=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class bo{match(a){return"string"==typeof a}coerce(a,b){var c,[d,e]=this.getInfos(a);return{type:null!=d?d:"Error",value:null!=e?e:a,stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}getInfos(a){var b="Error",c=a,d=a.match(bn);return d&&(b=d[1],c=d[2]),[b,c]}}var bp=["fatal","error","warning","log","info","debug"];function bq(a,b){void 0===b&&(b=40);var c=Object.keys(a);if(c.sort(),!c.length)return"[object has no keys]";for(var d=c.length;d>0;d--){var e=c.slice(0,d).join(", ");if(!(e.length>b))return d===c.length||e.length<=b?e:e.slice(0,b)+"..."}return""}class br{match(a){return"object"==typeof a&&null!==a}coerce(a,b){var c,d=this.getErrorPropertyFromObject(a);return d?b.apply(d):{type:this.getType(a),value:this.getValue(a),stack:null==(c=b.syntheticException)?void 0:c.stack,level:this.isSeverityLevel(a.level)?a.level:"error",synthetic:!0}}getType(a){return af(a)?a.constructor.name:"Error"}getValue(a){if("name"in a&&"string"==typeof a.name){var b="'"+a.name+"' captured as exception";return"message"in a&&"string"==typeof a.message&&(b+=" with message: '"+a.message+"'"),b}if("message"in a&&"string"==typeof a.message)return a.message;var c=this.getObjectClassName(a);return(c&&"Object"!==c?"'"+c+"'":"Object")+" captured as exception with keys: "+bq(a)}isSeverityLevel(a){return X(a)&&!Y(a)&&bp.indexOf(a)>=0}getErrorPropertyFromObject(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var c=a[b];if(a8(c))return c}}getObjectClassName(a){try{var b=Object.getPrototypeOf(a);return b?b.constructor.name:void 0}catch(a){return}}}class bs{match(a){return af(a)}coerce(a,b){var c,d=a.constructor.name;return{type:d,value:d+" captured as exception with keys: "+bq(a),stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}}class bt{match(a){return ad(a)}coerce(a,b){var c;return{type:"Error",value:"Primitive value captured as exception: "+String(a),stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}}class bu{match(a){return ae(a,"PromiseRejectionEvent")}coerce(a,b){var c,d=this.getUnhandledRejectionReason(a);return ad(d)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(d),stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}:b.apply(d)}getUnhandledRejectionReason(a){if(ad(a))return a;try{if("reason"in a)return a.reason;if("detail"in a&&"reason"in a.detail)return a.detail.reason}catch(a){}return a}}var bv=function(a,b){var{debugEnabled:c}=void 0===b?{}:b,d={k:function(b){if(q&&(D.DEBUG||C.POSTHOG_DEBUG||c)&&!W(q.console)&&q.console){for(var d=("__rrweb_original__"in q.console[b])?q.console[b].__rrweb_original__:q.console[b],e=arguments.length,f=Array(e>1?e-1:0),g=1;g<e;g++)f[g-1]=arguments[g];d(a,...f)}},info:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];d.k("log",...b)},warn:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];d.k("warn",...b)},error:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];d.k("error",...b)},critical:function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];console.error(a,...c)},uninitializedWarning:a=>{d.error("You must initialize PostHog before calling "+a)},createLogger:(b,c)=>bv(a+" "+b,c)};return d},bw=bv("[PostHog.js]"),bx=bw.createLogger,by=bx("[ExternalScriptsLoader]"),bz=(a,b,c)=>{if(a.config.disable_external_dependency_loading)return by.warn(b+" was requested but loading of external scripts is disabled."),c("Loading of external scripts is disabled");var d=null==w?void 0:w.querySelectorAll("script");if(d){for(var e,f=0;f<d.length;f++)if(e=function(){if(d[f].src===b){var a=d[f];return a.__posthog_loading_callback_fired?{v:c()}:(a.addEventListener("load",b=>{a.__posthog_loading_callback_fired=!0,c(void 0,b)}),a.onerror=a=>c(a),{v:void 0})}}())return e.v}var g=()=>{if(!w)return c("document not found");var d=w.createElement("script");if(d.type="text/javascript",d.crossOrigin="anonymous",d.src=b,d.onload=a=>{d.__posthog_loading_callback_fired=!0,c(void 0,a)},d.onerror=a=>c(a),a.config.prepare_external_dependency_script&&(d=a.config.prepare_external_dependency_script(d)),!d)return c("prepare_external_dependency_script returned null");if("head"===a.config.external_scripts_inject_target)w.head.appendChild(d);else{var e,f=w.querySelectorAll("body > script");f.length>0?null==(e=f[0].parentNode)||e.insertBefore(d,f[0]):w.body.appendChild(d)}};null!=w&&w.body?g():null==w||w.addEventListener("DOMContentLoaded",g)};C.__PosthogExtensions__=C.__PosthogExtensions__||{},C.__PosthogExtensions__.loadExternalDependency=(a,b,c)=>{var d="/static/"+b+".js?v="+a.version;"remote-config"===b&&(d="/array/"+a.config.token+"/config.js"),"toolbar"===b&&(d=d+"&t="+3e5*Math.floor(Date.now()/3e5));var e=a.requestRouter.endpointFor("assets",d);bz(a,e,c)},C.__PosthogExtensions__.loadSiteApp=(a,b,c)=>{var d=a.requestRouter.endpointFor("api",b);bz(a,d,c)};var bA={};function bB(a,b,c){if(S(a)){if(t&&a.forEach===t)a.forEach(b,c);else if("length"in a&&a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(d in a&&b.call(c,a[d],d)===bA)return}}}function bC(a,b,c){if(!$(a)){if(S(a))return bB(a,b,c);if(a instanceof FormData){for(var d of a.entries())if(b.call(c,d[1],d[0])===bA)return}else for(var e in a)if(Q.call(a,e)&&b.call(c,a[e],e)===bA)return}}var bD=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return bB(c,function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},bE=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return bB(c,function(b){bB(b,function(b){a.push(b)})}),a};function bF(a){for(var b=Object.keys(a),c=b.length,d=Array(c);c--;)d[c]=[b[c],a[b[c]]];return d}var bG=function(a){try{return a()}catch(a){return}},bH=function(a){return function(){try{for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return a.apply(this,c)}catch(a){bw.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),bw.critical(a)}}},bI=function(a){var b={};return bC(a,function(a,c){(X(a)&&a.length>0||_(a))&&(b[c]=a)}),b},bJ=["herokuapp.com","vercel.app","netlify.app"];function bK(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return a[c]}function bL(a,b,c,d){var{capture:e=!1,passive:f=!0}=null!=d?d:{};null==a||a.addEventListener(b,c,{capture:e,passive:f})}function bM(a){return"ph_toolbar_internal"===a.name}var bN="$people_distinct_id",bO="__alias",bP="__timers",bQ="$autocapture_disabled_server_side",bR="$heatmaps_enabled_server_side",bS="$exception_capture_enabled_server_side",bT="$error_tracking_suppression_rules",bU="$error_tracking_capture_extension_exceptions",bV="$web_vitals_enabled_server_side",bW="$dead_clicks_enabled_server_side",bX="$product_tours_enabled_server_side",bY="$web_vitals_allowed_metrics",bZ="$session_recording_remote_config",b$="$sesid",b_="$session_is_sampled",b0="$enabled_feature_flags",b1="$early_access_features",b2="$feature_flag_details",b3="$stored_person_properties",b4="$stored_group_properties",b5="$surveys",b6="$flag_call_reported",b7="$feature_flag_errors",b8="$user_state",b9="$client_session_props",ca="$capture_rate_limit",cb="$initial_campaign_params",cc="$initial_referrer_info",cd="$initial_person_info",ce="$epp",cf="__POSTHOG_TOOLBAR__",cg="$posthog_cookieless",ch=[bN,bO,"__cmpns",bP,"$session_recording_enabled_server_side",bR,b$,b0,bT,b8,b1,b2,b4,b3,b5,b6,b7,b9,ca,cb,cc,ce,cd];function ci(a){return a instanceof Element&&(a.id===cf||!(null==a.closest||!a.closest(".toolbar-global-fade-container")))}function cj(a){return!!a&&1===a.nodeType}function ck(a,b){return!!a&&!!a.tagName&&a.tagName.toLowerCase()===b.toLowerCase()}function cl(a){return!!a&&3===a.nodeType}function cm(a){return!!a&&11===a.nodeType}function cn(a){return a?M(a).split(/\s+/):[]}function co(a){var b=null==q?void 0:q.location.href;return!!(b&&a&&a.some(a=>b.match(a)))}function cp(a){var b="";switch(typeof a.className){case"string":b=a.className;break;case"object":b=(a.className&&"baseVal"in a.className?a.className.baseVal:null)||a.getAttribute("class")||"";break;default:b=""}return cn(b)}function cq(a){return $(a)?null:M(a).split(/(\s+)/).filter(a=>cI(a)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function cr(a){var b="";return cA(a)&&!cB(a)&&a.childNodes&&a.childNodes.length&&bC(a.childNodes,function(a){var c;cl(a)&&a.textContent&&(b+=null!=(c=cq(a.textContent))?c:"")}),M(b)}function cs(a){var b;return W(a.target)?a.srcElement||null:null!=(b=a.target)&&b.shadowRoot?a.composedPath()[0]||null:a.target||null}var ct=["a","button","form","input","select","textarea","label"];function cu(a,b){if(W(b))return!0;var c,d=function(a){if(b.some(b=>a.matches(b)))return{v:!0}};for(var e of a)if(c=d(e))return c.v;return!1}function cv(a){var b=a.parentNode;return!(!b||!cj(b))&&b}var cw=["next","previous","prev",">","<"],cx=[".ph-no-rageclick",".ph-no-capture"],cy=a=>!a||ck(a,"html")||!cj(a),cz=(a,b)=>{if(!q||cy(a))return{parentIsUsefulElement:!1,targetElementList:[]};for(var c=!1,d=[a],e=a;e.parentNode&&!ck(e,"body");)if(cm(e.parentNode))d.push(e.parentNode.host),e=e.parentNode.host;else{var f=cv(e);if(!f)break;if(b||ct.indexOf(f.tagName.toLowerCase())>-1)c=!0;else{var g=q.getComputedStyle(f);g&&"pointer"===g.getPropertyValue("cursor")&&(c=!0)}d.push(f),e=f}return{parentIsUsefulElement:c,targetElementList:d}};function cA(a){for(var b=a;b.parentNode&&!ck(b,"body");b=b.parentNode){var c=cp(b);if(L(c,"ph-sensitive")||L(c,"ph-no-capture"))return!1}if(L(cp(a),"ph-include"))return!0;var d=a.type||"";if(X(d))switch(d.toLowerCase()){case"hidden":case"password":return!1}var e=a.name||a.id||"";return!(X(e)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(e.replace(/[^a-zA-Z0-9]/g,"")))}function cB(a){return!!(ck(a,"input")&&!["button","checkbox","submit","reset"].includes(a.type)||ck(a,"select")||ck(a,"textarea")||"true"===a.getAttribute("contenteditable"))}var cC="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",cD=RegExp("^(?:"+cC+")$"),cE=new RegExp(cC),cF="\\d{3}-?\\d{2}-?\\d{4}",cG=RegExp("^("+cF+")$"),cH=RegExp("("+cF+")");function cI(a,b){return void 0===b&&(b=!0),!($(a)||X(a)&&(a=M(a),(b?cD:cE).test((a||"").replace(/[- ]/g,""))||(b?cG:cH).test(a)))&&!0}function cJ(a){var b=cr(a);return cI(b=(b+" "+function a(b){var c="";return b&&b.childNodes&&b.childNodes.length&&bC(b.childNodes,function(b){var d;if(b&&"span"===(null==(d=b.tagName)?void 0:d.toLowerCase()))try{var e=cr(b);c=(c+" "+e).trim(),b.childNodes&&b.childNodes.length&&(c=(c+" "+a(b)).trim())}catch(a){bw.error("[AutoCapture]",a)}}),c}(a)).trim())?b:""}function cK(a){return a.replace(/"|\\"/g,'\\"')}class cL{constructor(a){this.disabled=!1===a;var b=U(a)?a:{};this.thresholdPx=b.threshold_px||30,this.timeoutMs=b.timeout_ms||1e3,this.clickCount=b.click_count||3,this.clicks=[]}isRageClick(a,b,c){if(this.disabled)return!1;var d=this.clicks[this.clicks.length-1];if(d&&Math.abs(a-d.x)+Math.abs(b-d.y)<this.thresholdPx&&c-d.timestamp<this.timeoutMs){if(this.clicks.push({x:a,y:b,timestamp:c}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:a,y:b,timestamp:c}];return!1}}var cM=a=>{var b=null==w?void 0:w.createElement("a");return W(b)?null:(b.href=a,b)},cN=function(a,b){void 0===b&&(b="&");var c,d,e=[];return bC(a,function(a,b){W(a)||W(b)||"undefined"===b||(c=encodeURIComponent(a instanceof File?a.name:a.toString()),d=encodeURIComponent(b),e[e.length]=d+"="+c)}),e.join(b)},cO=function(a,b){for(var c,d=((a.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(f[0]===b){c=f;break}}if(!S(c)||c.length<2)return"";var g=c[1];try{g=decodeURIComponent(g)}catch(a){bw.error("Skipping decoding for malformed query param: "+g)}return g.replace(/\+/g," ")},cP=function(a,b,c){if(!a||!b||!b.length)return a;for(var d=a.split("#"),e=d[0]||"",f=d[1],g=e.split("?"),h=g[1],i=g[0],j=(h||"").split("&"),k=[],l=0;l<j.length;l++){var m=j[l].split("=");S(m)&&(b.includes(m[0])?k.push(m[0]+"="+c):k.push(j[l]))}var n=i;return null!=h&&(n+="?"+k.join("&")),null!=f&&(n+="#"+f),n},cQ=function(a,b){var c=a.match(RegExp(b+"=([^&]*)"));return c?c[1]:null},cR="$copy_autocapture",cS=bx("[AutoCapture]");function cT(a,b){return b.length>a?b.slice(0,a)+"...":b}class cU{constructor(a){this.P=!1,this.T=null,this.I=!1,this.instance=a,this.rageclicks=new cL(a.config.rageclick),this.C=null}get R(){var a,b,c=U(this.instance.config.autocapture)?this.instance.config.autocapture:{};return c.url_allowlist=null==(a=c.url_allowlist)?void 0:a.map(a=>new RegExp(a)),c.url_ignorelist=null==(b=c.url_ignorelist)?void 0:b.map(a=>new RegExp(a)),c}F(){if(this.isBrowserSupported()){if(q&&w){var a=a=>{a=a||(null==q?void 0:q.event);try{this.O(a)}catch(a){cS.error("Failed to capture event",a)}};if(bL(w,"submit",a,{capture:!0}),bL(w,"change",a,{capture:!0}),bL(w,"click",a,{capture:!0}),this.R.capture_copied_text){var b=a=>{a=a||(null==q?void 0:q.event),this.O(a,cR)};bL(w,"copy",b,{capture:!0}),bL(w,"cut",b,{capture:!0})}}}else cS.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.F(),this.P=!0)}onRemoteConfig(a){a.elementsChainAsString&&(this.I=a.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[bQ]:!!a.autocapture_opt_out}),this.T=!!a.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(a){this.C=a}getElementSelectors(a){var b,c=[];return null==(b=this.C)||b.forEach(b=>{var d=null==w?void 0:w.querySelectorAll(b);null==d||d.forEach(d=>{a===d&&c.push(b)})}),c}get isEnabled(){var a,b,c=null==(a=this.instance.persistence)?void 0:a.props[bQ];if(Z(this.T)&&!ab(c)&&!this.instance.M())return!1;var d=null!=(b=this.T)?b:!!c;return!!this.instance.config.autocapture&&!d}O(a,b){if(void 0===b&&(b="$autocapture"),this.isEnabled){var c,d=cs(a);cl(d)&&(d=d.parentNode||null),"$autocapture"===b&&"click"===a.type&&a instanceof MouseEvent&&this.instance.config.rageclick&&null!=(c=this.rageclicks)&&c.isRageClick(a.clientX,a.clientY,a.timeStamp||(new Date).getTime())&&function(a,b){if(!q||cy(a)||(ab(b)?(c=!!b&&cx,d=void 0):(c=null!=(e=null==b?void 0:b.css_selector_ignorelist)?e:cx,d=null==b?void 0:b.content_ignorelist),!1===c))return!1;var c,d,e,{targetElementList:f}=cz(a,!1);return!function(a,b){var c;if(!1===a||W(a))return!1;if(!0===a)c=cw;else{if(!S(a))return!1;if(a.length>10)return bw.error("[PostHog] content_ignorelist array cannot exceed 10 items. Use css_selector_ignorelist for more complex matching."),!1;c=a.map(a=>a.toLowerCase())}return b.some(a=>{var{safeText:b,ariaLabel:d}=a;return c.some(a=>b.includes(a)||d.includes(a))})}(d,f.map(a=>{var b;return{safeText:cr(a).toLowerCase(),ariaLabel:(null==(b=a.getAttribute("aria-label"))?void 0:b.toLowerCase().trim())||""}}))&&!cu(f,c)}(d,this.instance.config.rageclick)&&this.O(a,"$rageclick");var e=b===cR;if(d&&function(a,b,c,d,e){if(void 0===c&&(c=void 0),!q||cy(a)||null!=(f=c)&&f.url_allowlist&&!co(c.url_allowlist)||null!=(g=c)&&g.url_ignorelist&&co(c.url_ignorelist))return!1;if(null!=(h=c)&&h.dom_event_allowlist){var f,g,h,i,j=c.dom_event_allowlist;if(j&&!j.some(a=>b.type===a))return!1}var{parentIsUsefulElement:k,targetElementList:l}=cz(a,d);if(!function(a,b){var c=null==b?void 0:b.element_allowlist;if(W(c))return!0;var d,e=function(a){if(c.some(b=>a.tagName.toLowerCase()===b))return{v:!0}};for(var f of a)if(d=e(f))return d.v;return!1}(l,c)||!cu(l,null==(i=c)?void 0:i.css_selector_allowlist))return!1;var m=q.getComputedStyle(a);if(m&&"pointer"===m.getPropertyValue("cursor")&&"click"===b.type)return!0;var n=a.tagName.toLowerCase();switch(n){case"html":return!1;case"form":return(e||["submit"]).indexOf(b.type)>=0;case"input":case"select":case"textarea":return(e||["change","click"]).indexOf(b.type)>=0;default:return k?(e||["click"]).indexOf(b.type)>=0:(e||["click"]).indexOf(b.type)>=0&&(ct.indexOf(n)>-1||"true"===a.getAttribute("contenteditable"))}}(d,a,this.R,e,e?["copy","cut"]:void 0)){var{props:f,explicitNoCapture:g}=function(a,b){for(var c,d,{e:e,maskAllElementAttributes:f,maskAllText:g,elementAttributeIgnoreList:h,elementsChainAsString:i}=b,j=[a],k=a;k.parentNode&&!ck(k,"body");)cm(k.parentNode)?(j.push(k.parentNode.host),k=k.parentNode.host):(j.push(k.parentNode),k=k.parentNode);var l,m=[],n={},o=!1,p=!1;if(bC(j,a=>{var b=cA(a);"a"===a.tagName.toLowerCase()&&(o=a.getAttribute("href"),o=b&&o&&cI(o)&&o),L(cp(a),"ph-no-capture")&&(p=!0),m.push(function(a,b,c,d){var e=a.tagName.toLowerCase(),f={tag_name:e};ct.indexOf(e)>-1&&!c&&("a"===e.toLowerCase()||"button"===e.toLowerCase()?f.$el_text=cT(1024,cJ(a)):f.$el_text=cT(1024,cr(a)));var g=cp(a);g.length>0&&(f.classes=g.filter(function(a){return""!==a})),bC(a.attributes,function(c){var e;if((!cB(a)||-1!==["name","id","class","aria-label"].indexOf(c.name))&&(null==d||!d.includes(c.name))&&!b&&cI(c.value)&&(!X(e=c.name)||"_ngcontent"!==e.substring(0,10)&&"_nghost"!==e.substring(0,7))){var g=c.value;"class"===c.name&&(g=cn(g).join(" ")),f["attr__"+c.name]=cT(1024,g)}});for(var h=1,i=1,j=a;j=function(a){if(a.previousElementSibling)return a.previousElementSibling;var b=a;do b=b.previousSibling;while(b&&!cj(b));return b}(j);)h++,j.tagName===a.tagName&&i++;return f.nth_child=h,f.nth_of_type=i,f}(a,f,g,h)),bD(n,function(a){if(!cA(a))return{};var b={};return bC(a.attributes,function(a){if(a.name&&0===a.name.indexOf("data-ph-capture-attribute")){var c=a.name.replace("data-ph-capture-attribute-",""),d=a.value;c&&d&&cI(d)&&(b[c]=d)}}),b}(a))}),p)return{props:{},explicitNoCapture:p};if(g||("a"===a.tagName.toLowerCase()||"button"===a.tagName.toLowerCase()?m[0].$el_text=cJ(a):m[0].$el_text=cr(a)),o){m[0].attr__href=o;var r,s,t=null==(r=cM(o))?void 0:r.host,u=null==q||null==(s=q.location)?void 0:s.host;t&&u&&t!==u&&(l=o)}return{props:bD({$event_type:e.type,$ce_version:1},i?{}:{$elements:m},{$elements_chain:m.map(a=>{var b,c,d,e={text:null==(c=a.$el_text)?void 0:c.slice(0,400),tag_name:a.tag_name,href:null==(d=a.attr__href)?void 0:d.slice(0,2048),attr_class:(b=a.attr__class)?S(b)?b:cn(b):void 0,attr_id:a.attr__id,nth_child:a.nth_child,nth_of_type:a.nth_of_type,attributes:{}};return bF(a).filter(a=>{var[b]=a;return 0===b.indexOf("attr__")}).forEach(a=>{var[b,c]=a;return e.attributes[b]=c}),e}).map(a=>{var b,c,d="";if(a.tag_name&&(d+=a.tag_name),a.attr_class)for(var e of(a.attr_class.sort(),a.attr_class))d+="."+e.replace(/"/g,"");var f=G({},a.text?{text:a.text}:{},{"nth-child":null!=(b=a.nth_child)?b:0,"nth-of-type":null!=(c=a.nth_of_type)?c:0},a.href?{href:a.href}:{},a.attr_id?{attr_id:a.attr_id}:{},a.attributes),g={};return bF(f).sort((a,b)=>{var[c]=a,[d]=b;return c.localeCompare(d)}).forEach(a=>{var[b,c]=a;return g[cK(b.toString())]=cK(c.toString())}),d+=":",d+=bF(g).map(a=>{var[b,c]=a;return b+'="'+c+'"'}).join("")}).join(";")},null!=(c=m[0])&&c.$el_text?{$el_text:null==(d=m[0])?void 0:d.$el_text}:{},l&&"click"===e.type?{$external_click_url:l}:{},n)}}(d,{e:a,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.R.element_attribute_ignorelist,elementsChainAsString:this.I});if(g)return!1;var h=this.getElementSelectors(d);if(h&&h.length>0&&(f.$element_selectors=h),b===cR){var i,j=cq(null==q||null==(i=q.getSelection())?void 0:i.toString()),k=a.type||"clipboard";if(!j)return!1;f.$selected_content=j,f.$copy_type=k}return this.instance.capture(b,f),!0}}}isBrowserSupported(){return T(null==w?void 0:w.querySelectorAll)}}Math.trunc||(Math.trunc=function(a){return a<0?Math.ceil(a):Math.floor(a)}),Number.isInteger||(Number.isInteger=function(a){return _(a)&&isFinite(a)&&Math.floor(a)===a});var cV="0123456789abcdef";class cW{constructor(a){if(this.bytes=a,16!==a.length)throw TypeError("not 128-bit length")}static fromFieldsV7(a,b,c,d){if(!Number.isInteger(a)||!Number.isInteger(b)||!Number.isInteger(c)||!Number.isInteger(d)||a<0||b<0||c<0||d<0||a>0xffffffffffff||b>4095||c>0x3fffffff||d>0xffffffff)throw RangeError("invalid field value");var e=new Uint8Array(16);return e[0]=a/0x10000000000,e[1]=a/0x100000000,e[2]=a/0x1000000,e[3]=a/65536,e[4]=a/256,e[5]=a,e[6]=112|b>>>8,e[7]=b,e[8]=128|c>>>24,e[9]=c>>>16,e[10]=c>>>8,e[11]=c,e[12]=d>>>24,e[13]=d>>>16,e[14]=d>>>8,e[15]=d,new cW(e)}toString(){for(var a="",b=0;b<this.bytes.length;b++)a=a+cV.charAt(this.bytes[b]>>>4)+cV.charAt(15&this.bytes[b]),3!==b&&5!==b&&7!==b&&9!==b||(a+="-");if(36!==a.length)throw Error("Invalid UUIDv7 was generated");return a}clone(){return new cW(this.bytes.slice(0))}equals(a){return 0===this.compareTo(a)}compareTo(a){for(var b=0;b<16;b++){var c=this.bytes[b]-a.bytes[b];if(0!==c)return Math.sign(c)}return 0}}class cX{constructor(){this.A=0,this.j=0,this.D=new c$}generate(){var a=this.generateOrAbort();if(W(a)){this.A=0;var b=this.generateOrAbort();if(W(b))throw Error("Could not generate UUID after timestamp reset");return b}return a}generateOrAbort(){var a=Date.now();if(a>this.A)this.A=a,this.L();else{if(!(a+1e4>this.A))return;this.j++,this.j>0x3ffffffffff&&(this.A++,this.L())}return cW.fromFieldsV7(this.A,Math.trunc(this.j/0x40000000),0x3fffffff&this.j,this.D.nextUint32())}L(){this.j=1024*this.D.nextUint32()+(1023&this.D.nextUint32())}}var cY,cZ=a=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(var b=0;b<a.length;b++)a[b]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return a};q&&!W(q.crypto)&&crypto.getRandomValues&&(cZ=a=>crypto.getRandomValues(a));class c${constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(cZ(this.N),this.U=0),this.N[this.U++]}}var c_=()=>c0().toString(),c0=()=>(cY||(cY=new cX)).generate(),c1="",c2=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,c3={H:()=>!!w,B:function(a){bw.error("cookieStore error: "+a)},q:function(a){if(w){try{for(var b=a+"=",c=w.cookie.split(";").filter(a=>a.length),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}}catch(a){}return null}},W:function(a){var b;try{b=JSON.parse(c3.q(a))||{}}catch(a){}return b},G:function(a,b,c,d,e){if(w)try{var f="",g="",h=function(a,b){if(b){var c=function(a,b){if(void 0===b&&(b=w),c1)return c1;if(!b||["localhost","127.0.0.1"].includes(a))return"";for(var c=a.split("."),d=Math.min(c.length,8),e="dmn_chk_"+c_();!c1&&d--;){var f=c.slice(d).join("."),g=e+"=1;domain=."+f+";path=/";b.cookie=g+";max-age=3",b.cookie.includes(e)&&(b.cookie=g+";max-age=0",c1=f)}return c1}(a);if(!c){var d,e=(d=a.match(c2))?d[0]:"";e!==c&&bw.info("Warning: cookie subdomain discovery mismatch",e,c),c=e}return c?"; domain=."+c:""}return""}(w.location.hostname,d);if(c){var i=new Date;i.setTime(i.getTime()+24*c*36e5),f="; expires="+i.toUTCString()}e&&(g="; secure");var j=a+"="+encodeURIComponent(JSON.stringify(b))+f+"; SameSite=Lax; path=/"+h+g;return j.length>3686.4&&bw.warn("cookieStore warning: large cookie, len="+j.length),w.cookie=j,j}catch(a){return}},V:function(a,b){if(null!=w&&w.cookie)try{c3.G(a,"",-1,b)}catch(a){return}}},c4=null,c5={H:function(){if(!Z(c4))return c4;var a=!0;if(W(q))a=!1;else try{var b="__mplssupport__";c5.G(b,"xyz"),'"xyz"'!==c5.q(b)&&(a=!1),c5.V(b)}catch(b){a=!1}return a||bw.error("localStorage unsupported; falling back to cookie store"),c4=a,a},B:function(a){bw.error("localStorage error: "+a)},q:function(a){try{return null==q?void 0:q.localStorage.getItem(a)}catch(a){c5.B(a)}return null},W:function(a){try{return JSON.parse(c5.q(a))||{}}catch(a){}return null},G:function(a,b){try{null==q||q.localStorage.setItem(a,JSON.stringify(b))}catch(a){c5.B(a)}},V:function(a){try{null==q||q.localStorage.removeItem(a)}catch(a){c5.B(a)}}},c6=["$device_id","distinct_id",b$,b_,ce,cd,b8],c7={},c8={H:function(){return!0},B:function(a){bw.error("memoryStorage error: "+a)},q:function(a){return c7[a]||null},W:function(a){return c7[a]||null},G:function(a,b){c7[a]=b},V:function(a){delete c7[a]}},c9=null,da={H:function(){if(!Z(c9))return c9;if(c9=!0,W(q))c9=!1;else try{var a="__support__";da.G(a,"xyz"),'"xyz"'!==da.q(a)&&(c9=!1),da.V(a)}catch(a){c9=!1}return c9},B:function(a){bw.error("sessionStorage error: ",a)},q:function(a){try{return null==q?void 0:q.sessionStorage.getItem(a)}catch(a){da.B(a)}return null},W:function(a){try{return JSON.parse(da.q(a))||null}catch(a){}return null},G:function(a,b){try{null==q||q.sessionStorage.setItem(a,JSON.stringify(b))}catch(a){da.B(a)}},V:function(a){try{null==q||q.sessionStorage.removeItem(a)}catch(a){da.B(a)}}},db=function(a){return a[a.PENDING=-1]="PENDING",a[a.DENIED=0]="DENIED",a[a.GRANTED=1]="GRANTED",a}({});class dc{constructor(a){this._instance=a}get R(){return this._instance.config}get consent(){return this.J()?db.DENIED:this.K}isOptedOut(){return"always"===this.R.cookieless_mode||this.consent===db.DENIED||this.consent===db.PENDING&&(this.R.opt_out_capturing_by_default||"on_reject"===this.R.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===db.DENIED}optInOut(a){this.Y.G(this.X,+!!a,this.R.cookie_expiration,this.R.cross_subdomain_cookie,this.R.secure_cookie)}reset(){this.Y.V(this.X,this.R.cross_subdomain_cookie)}get X(){var{token:a,opt_out_capturing_cookie_prefix:b,consent_persistence_name:c}=this._instance.config;return c||(b?b+a:"__ph_opt_in_out_"+a)}get K(){var a=this.Y.q(this.X);return ah(a)?db.GRANTED:L(ai,a)?db.DENIED:db.PENDING}get Y(){if(!this.Z){var a=this.R.opt_out_capturing_persistence_type;this.Z="localStorage"===a?c5:c3;var b="localStorage"===a?c3:c5;b.q(this.X)&&(this.Z.q(this.X)||this.optInOut(ah(b.q(this.X))),b.V(this.X,this.R.cross_subdomain_cookie))}return this.Z}J(){return!!this.R.respect_dnt&&!!bK([null==v?void 0:v.doNotTrack,null==v?void 0:v.msDoNotTrack,C.doNotTrack],a=>ah(a))}}var dd=bx("[Dead Clicks]"),de=()=>!0,df=a=>{var b,c=!(null==(b=a.instance.persistence)||!b.get_property(bW)),d=a.instance.config.capture_dead_clicks;return ab(d)?d:!!U(d)||c};class dg{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(a,b,c){this.instance=a,this.isEnabled=b,this.onCapture=c,this.startIfEnabledOrStop()}onRemoteConfig(a){"captureDeadClicks"in a&&(this.instance.persistence&&this.instance.persistence.register({[bW]:a.captureDeadClicks}),this.startIfEnabledOrStop())}startIfEnabledOrStop(){this.isEnabled(this)?this.it(()=>{this.et()}):this.stop()}it(a){var b,c;null!=(b=C.__PosthogExtensions__)&&b.initDeadClicksAutocapture&&a(),null==(c=C.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this.instance,"dead-clicks-autocapture",b=>{b?dd.error("failed to load script",b):a()})}et(){var a;if(w){if(!this.tt&&null!=(a=C.__PosthogExtensions__)&&a.initDeadClicksAutocapture){var b=U(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};b.__onCapture=this.onCapture,this.tt=C.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,b),this.tt.start(w),dd.info("starting...")}}else dd.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,dd.info("stopping..."))}}var dh=bx("[ExceptionAutocapture]");class di{constructor(a){var b,c,d;this.rt=()=>{var a;if(q&&this.isEnabled&&null!=(a=C.__PosthogExtensions__)&&a.errorWrappingFunctions){var b=C.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,c=C.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,d=C.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.R.capture_unhandled_errors&&(this.st=b(this.captureException.bind(this))),!this.nt&&this.R.capture_unhandled_rejections&&(this.nt=c(this.captureException.bind(this))),!this.ot&&this.R.capture_console_errors&&(this.ot=d(this.captureException.bind(this)))}catch(a){dh.error("failed to start",a),this.ut()}}},this._instance=a,this.ht=!(null==(b=this._instance.persistence)||!b.props[bS]),this.dt=new ak({refillRate:null!=(c=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)?c:1,bucketSize:null!=(d=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)?d:10,refillInterval:1e4,h:dh}),this.R=this.vt(),this.startIfEnabledOrStop()}vt(){var a=this._instance.config.capture_exceptions,b={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return U(a)?b=G({},b,a):(W(a)?this.ht:a)&&(b=G({},b,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),b}get isEnabled(){return this.R.capture_console_errors||this.R.capture_unhandled_errors||this.R.capture_unhandled_rejections}startIfEnabledOrStop(){this.isEnabled?(dh.info("enabled"),this.ut(),this.it(this.rt)):this.ut()}it(a){var b,c;null!=(b=C.__PosthogExtensions__)&&b.errorWrappingFunctions&&a(),null==(c=C.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"exception-autocapture",b=>{if(b)return dh.error("failed to load script",b);a()})}ut(){var a,b,c;null==(a=this.st)||a.call(this),this.st=void 0,null==(b=this.nt)||b.call(this),this.nt=void 0,null==(c=this.ot)||c.call(this),this.ot=void 0}onRemoteConfig(a){if("autocaptureExceptions"in a){var b=a.autocaptureExceptions;this.ht=!!b,this._instance.persistence&&this._instance.persistence.register({[bS]:this.ht}),this.R=this.vt(),this.startIfEnabledOrStop()}}onConfigChange(){this.R=this.vt()}captureException(a){var b,c,d=null!=(b=null==a||null==(c=a.$exception_list)||null==(c=c[0])?void 0:c.type)?b:"Exception";this.dt.consumeRateLimit(d)?dh.info("Skipping exception capture because of client rate limiting.",{exception:d}):this._instance.exceptions.sendExceptionEvent(a)}}function dj(a,b,c){try{if(!(b in a))return()=>{};var d=a[b],e=c(d);return T(e)&&(e.prototype=e.prototype||{},Object.defineProperties(e,{__posthog_wrapped__:{enumerable:!1,value:!0}})),a[b]=e,()=>{a[b]=d}}catch(a){return()=>{}}}class dk{constructor(a){var b;this._instance=a,this.ct=(null==q||null==(b=q.location)?void 0:b.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(bw.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ft&&this.ft(),this.ft=void 0,bw.info("History API monitoring stopped")}monitorHistoryChanges(){var a,b;if(q&&q.history){var c=this;null!=(a=q.history.pushState)&&a.__posthog_wrapped__||dj(q.history,"pushState",a=>function(b,d,e){a.call(this,b,d,e),c._t("pushState")}),null!=(b=q.history.replaceState)&&b.__posthog_wrapped__||dj(q.history,"replaceState",a=>function(b,d,e){a.call(this,b,d,e),c._t("replaceState")}),this.bt()}}_t(a){try{var b,c=null==q||null==(b=q.location)?void 0:b.pathname;if(!c)return;c!==this.ct&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:a}),this.ct=c}catch(b){bw.error("Error capturing "+a+" pageview",b)}}bt(){if(!this.ft){var a=()=>{this._t("popstate")};bL(q,"popstate",a),this.ft=()=>{q&&q.removeEventListener("popstate",a)}}}}var dl=bx("[SegmentIntegration]"),dm="posthog-js";function dn(a,b){var{organization:c,projectId:d,prefix:e,severityAllowList:f=["error"],sendExceptionsToPostHog:g=!0}=void 0===b?{}:b;return b=>{if(!("*"===f||f.includes(b.level))||!a.__loaded)return b;b.tags||(b.tags={});var h,i,j,k,l,m=a.requestRouter.endpointFor("ui","/project/"+a.config.token+"/person/"+a.get_distinct_id());b.tags["PostHog Person URL"]=m,a.sessionRecordingStarted()&&(b.tags["PostHog Recording URL"]=a.get_session_replay_url({withTimestamp:!0}));var n=(null==(h=b.exception)?void 0:h.values)||[],o=n.map(a=>G({},a,{stacktrace:a.stacktrace?G({},a.stacktrace,{type:"raw",frames:(a.stacktrace.frames||[]).map(a=>G({},a,{platform:"web:javascript"}))}):void 0})),p={$exception_message:(null==(i=n[0])?void 0:i.value)||b.message,$exception_type:null==(j=n[0])?void 0:j.type,$exception_level:b.level,$exception_list:o,$sentry_event_id:b.event_id,$sentry_exception:b.exception,$sentry_exception_message:(null==(k=n[0])?void 0:k.value)||b.message,$sentry_exception_type:null==(l=n[0])?void 0:l.type,$sentry_tags:b.tags};return c&&d&&(p.$sentry_url=(e||"https://sentry.io/organizations/")+c+"/issues/?project="+d+"&query="+b.event_id),g&&a.exceptions.sendExceptionEvent(p),b}}class dp{constructor(a,b,c,d,e,f){this.name=dm,this.setupOnce=function(g){g(dn(a,{organization:b,projectId:c,prefix:d,severityAllowList:e,sendExceptionsToPostHog:null==f||f}))}}}var dq=null!=q&&q.location?cQ(q.location.hash,"__posthog")||cQ(location.hash,"state"):null,dr="_postHogToolbarParams",ds=bx("[Toolbar]"),dt=function(a){return a[a.UNINITIALIZED=0]="UNINITIALIZED",a[a.LOADING=1]="LOADING",a[a.LOADED=2]="LOADED",a}(dt||{});class du{constructor(a){this.instance=a}yt(a){C.ph_toolbar_state=a}wt(){var a;return null!=(a=C.ph_toolbar_state)?a:dt.UNINITIALIZED}maybeLoadToolbar(a,b,c){if(void 0===a&&(a=void 0),void 0===b&&(b=void 0),void 0===c&&(c=void 0),bM(this.instance.config)||!q||!w)return!1;a=null!=a?a:q.location,c=null!=c?c:q.history;try{if(!b){try{q.localStorage.setItem("test","test"),q.localStorage.removeItem("test")}catch(a){return!1}b=null==q?void 0:q.localStorage}var d,e=dq||cQ(a.hash,"__posthog")||cQ(a.hash,"state"),f=e?bG(()=>JSON.parse(atob(decodeURIComponent(e))))||bG(()=>JSON.parse(decodeURIComponent(e))):null;return f&&"ph_authorize"===f.action?((d=f).source="url",d&&Object.keys(d).length>0&&(f.desiredHash?a.hash=f.desiredHash:c?c.replaceState(c.state,"",a.pathname+a.search):a.hash="")):((d=JSON.parse(b.getItem(dr)||"{}")).source="localstorage",delete d.userIntent),!(!d.token||this.instance.config.token!==d.token)&&(this.loadToolbar(d),!0)}catch(a){return!1}}xt(a){var b=C.ph_load_toolbar||C.ph_load_editor;!$(b)&&T(b)?b(a,this.instance):ds.warn("No toolbar load function found")}loadToolbar(a){var b,c=!(null==w||!w.getElementById(cf));if(!q||c)return!1;var d="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,e=G({token:this.instance.config.token},a,{apiURL:this.instance.requestRouter.endpointFor("ui")},d?{instrument:!1}:{});return(q.localStorage.setItem(dr,JSON.stringify(G({},e,{source:void 0}))),this.wt()===dt.LOADED)?this.xt(e):this.wt()===dt.UNINITIALIZED&&(this.yt(dt.LOADING),null==(b=C.__PosthogExtensions__)||null==b.loadExternalDependency||b.loadExternalDependency(this.instance,"toolbar",a=>{if(a)return ds.error("[Toolbar] Failed to load",a),void this.yt(dt.UNINITIALIZED);this.yt(dt.LOADED),this.xt(e)}),bL(q,"turbolinks:load",()=>{this.yt(dt.UNINITIALIZED),this.loadToolbar(e)})),!0}$t(a){return this.loadToolbar(a)}maybeLoadEditor(a,b,c){return void 0===a&&(a=void 0),void 0===b&&(b=void 0),void 0===c&&(c=void 0),this.maybeLoadToolbar(a,b,c)}}var dv=bx("[TracingHeaders]");class dw{constructor(a){this.Et=void 0,this.St=void 0,this.rt=()=>{var a,b;W(this.Et)&&(null==(a=C.__PosthogExtensions__)||null==(a=a.tracingHeadersPatchFns)||a._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),W(this.St)&&(null==(b=C.__PosthogExtensions__)||null==(b=b.tracingHeadersPatchFns)||b._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=a}it(a){var b,c;null!=(b=C.__PosthogExtensions__)&&b.tracingHeadersPatchFns&&a(),null==(c=C.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"tracing-headers",b=>{if(b)return dv.error("failed to load script",b);a()})}startIfEnabledOrStop(){var a,b;this._instance.config.__add_tracing_headers?this.it(this.rt):(null==(a=this.Et)||a.call(this),null==(b=this.St)||b.call(this),this.Et=void 0,this.St=void 0)}}var dx="https?://(.*)",dy=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],dz=bE(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],dy),dA="<masked>",dB=["li_fat_id"];function dC(a,b,c){if(!w)return{};var d,e=b?bE([],dy,c||[]):[],f=dD(cP(w.URL,e,dA),a);return bD((d={},bC(dB,function(a){var b=c3.q(a);d[a]=b||null}),d),f)}function dD(a,b){var c=dz.concat(b||[]),d={};return bC(c,function(b){var c=cO(a,b);d[b]=c||null}),d}function dE(a){var b=a?0===a.search(dx+"google.([^/?]*)")?"google":0===a.search(dx+"bing.com")?"bing":0===a.search(dx+"yahoo.com")?"yahoo":0===a.search(dx+"duckduckgo.com")?"duckduckgo":null:null,c={};if(!Z(b)){c.$search_engine=b;var d=w?cO(w.referrer,"yahoo"!=b?"q":"p"):"";d.length&&(c.ph_keyword=d)}return c}function dF(){return navigator.language||navigator.userLanguage}function dG(){return(null==w?void 0:w.referrer)||"$direct"}function dH(a,b){var c=a?bE([],dy,b||[]):[],d=null==x?void 0:x.href.substring(0,1e3);return{r:dG().substring(0,1e3),u:d?cP(d,c,dA):void 0}}function dI(a){var b,{r:c,u:d}=a,e={$referrer:c,$referring_domain:null==c?void 0:"$direct"==c?"$direct":null==(b=cM(c))?void 0:b.host};if(d){e.$current_url=d;var f=cM(d);e.$host=null==f?void 0:f.host,e.$pathname=null==f?void 0:f.pathname,bD(e,dD(d))}return c&&bD(e,dE(c)),e}function dJ(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(a){return}}var dK=bx("[Web Vitals]");class dL{constructor(a){var b;this.kt=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Pt=()=>{clearTimeout(this.Tt),0!==this.N.metrics.length&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((a,b)=>G({},a,{["$web_vitals_"+b.name+"_event"]:G({},b),["$web_vitals_"+b.name+"_value"]:b.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.It=a=>{var b,c=null==(b=this._instance.sessionManager)?void 0:b.checkAndGetSessionAndWindowId(!0);if(W(c))dK.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var d=this.Ct();W(d)||($(null==a?void 0:a.name)||$(null==a?void 0:a.value)?dK.error("Invalid metric received",a):this.Rt&&a.value>=this.Rt?dK.error("Ignoring metric with value >= "+this.Rt,a):(this.N.url!==d&&(this.Pt(),this.Tt=setTimeout(this.Pt,this.flushToCaptureTimeoutMs)),W(this.N.url)&&(this.N.url=d),this.N.firstMetricTimestamp=W(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,a.attribution&&a.attribution.interactionTargetElement&&(a.attribution.interactionTargetElement=void 0),this.N.metrics.push(G({},a,{$current_url:d,$session_id:c.sessionId,$window_id:c.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.Pt()))}},this.rt=()=>{if(!this.P){var a,b,c,d,e=C.__PosthogExtensions__;W(e)||W(e.postHogWebVitalsCallbacks)||({onLCP:a,onCLS:b,onFCP:c,onINP:d}=e.postHogWebVitalsCallbacks),a&&b&&c&&d?(this.allowedMetrics.indexOf("LCP")>-1&&a(this.It.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&b(this.It.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&c(this.It.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&d(this.It.bind(this)),this.P=!0):dK.error("web vitals callbacks not loaded - not starting")}},this._instance=a,this.kt=!(null==(b=this._instance.persistence)||!b.props[bV]),this.startIfEnabled()}get allowedMetrics(){var a,b,c=U(this._instance.config.capture_performance)?null==(a=this._instance.config.capture_performance)?void 0:a.web_vitals_allowed_metrics:void 0;return $(c)?(null==(b=this._instance.persistence)?void 0:b.props[bY])||["CLS","FCP","INP","LCP"]:c}get flushToCaptureTimeoutMs(){return(U(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get useAttribution(){var a=U(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_attribution:void 0;return null!=a&&a}get Rt(){var a=U(this._instance.config.capture_performance)&&_(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:9e5;return 0<a&&a<=6e4?9e5:a}get isEnabled(){var a=null==x?void 0:x.protocol;if("http:"!==a&&"https:"!==a)return dK.info("Web Vitals are disabled on non-http/https protocols"),!1;var b=U(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:ab(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return ab(b)?b:this.kt}startIfEnabled(){this.isEnabled&&!this.P&&(dK.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(a){if("capturePerformance"in a){var b=U(a.capturePerformance)&&!!a.capturePerformance.web_vitals,c=U(a.capturePerformance)?a.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[bV]:b}),this._instance.persistence.register({[bY]:c})),this.kt=b,this.startIfEnabled()}}it(a){var b,c;if(null!=(b=C.__PosthogExtensions__)&&b.postHogWebVitalsCallbacks)a();else{var d=this.useAttribution?"web-vitals-with-attribution":"web-vitals";null==(c=C.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,d,b=>{b?dK.error("failed to load script",b):a()})}}Ct(){var a=q?q.location.href:void 0;if(a){var b=this._instance.config.mask_personal_data_properties,c=this._instance.config.custom_personal_data_properties;return cP(a,b?bE([],dy,c||[]):[],dA)}dK.error("Could not determine current URL")}}var dM=bx("[Heatmaps]");function dN(a){return U(a)&&"clientX"in a&&"clientY"in a&&_(a.clientX)&&_(a.clientY)}class dO{constructor(a){var b;this.kt=!1,this.P=!1,this.Ft=null,this.instance=a,this.kt=!(null==(b=this.instance.persistence)||!b.props[bR]),this.rageclicks=new cL(a.config.rageclick)}get flushIntervalMilliseconds(){var a=5e3;return U(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(a=this.instance.config.capture_heatmaps.flush_interval_milliseconds),a}get isEnabled(){return $(this.instance.config.capture_heatmaps)?$(this.instance.config.enable_heatmaps)?this.kt:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled)this.P||(dM.info("starting..."),this.Ot(),this.Mt());else{var a;clearInterval(null!=(a=this.Ft)?a:void 0),this.At(),this.getAndClearBuffer()}}onRemoteConfig(a){if("heatmaps"in a){var b=!!a.heatmaps;this.instance.persistence&&this.instance.persistence.register({[bR]:b}),this.kt=b,this.startIfEnabled()}}getAndClearBuffer(){var a=this.N;return this.N=void 0,a}jt(a){this.Dt(a.originalEvent,"deadclick")}Mt(){this.Ft&&clearInterval(this.Ft),this.Ft="visible"===(null==w?void 0:w.visibilityState)?setInterval(this.Lt.bind(this),this.flushIntervalMilliseconds):null}Ot(){q&&w&&(this.Nt=this.Lt.bind(this),bL(q,"beforeunload",this.Nt),this.Ut=a=>this.Dt(a||(null==q?void 0:q.event)),bL(w,"click",this.Ut,{capture:!0}),this.zt=a=>this.Ht(a||(null==q?void 0:q.event)),bL(w,"mousemove",this.zt,{capture:!0}),this.Bt=new dg(this.instance,de,this.jt.bind(this)),this.Bt.startIfEnabledOrStop(),this.qt=this.Mt.bind(this),bL(w,"visibilitychange",this.qt),this.P=!0)}At(){var a;q&&w&&(this.Nt&&q.removeEventListener("beforeunload",this.Nt),this.Ut&&w.removeEventListener("click",this.Ut,{capture:!0}),this.zt&&w.removeEventListener("mousemove",this.zt,{capture:!0}),this.qt&&w.removeEventListener("visibilitychange",this.qt),clearTimeout(this.Wt),null==(a=this.Bt)||a.stop(),this.P=!1)}Gt(a,b){var c=this.instance.scrollManager.scrollY(),d=this.instance.scrollManager.scrollX(),e=this.instance.scrollManager.scrollElement(),f=function(a,b,c){for(var d=a;d&&cj(d)&&!ck(d,"body")&&d!==c;){if(L(b,null==q?void 0:q.getComputedStyle(d).position))return!0;d=cv(d)}return!1}(cs(a),["fixed","sticky"],e);return{x:a.clientX+(f?0:d),y:a.clientY+(f?0:c),target_fixed:f,type:b}}Dt(a,b){var c;if(void 0===b&&(b="click"),!ci(a.target)&&dN(a)){var d=this.Gt(a,b);null!=(c=this.rageclicks)&&c.isRageClick(a.clientX,a.clientY,(new Date).getTime())&&this.Vt(G({},d,{type:"rageclick"})),this.Vt(d)}}Ht(a){!ci(a.target)&&dN(a)&&(clearTimeout(this.Wt),this.Wt=setTimeout(()=>{this.Vt(this.Gt(a,"mousemove"))},500))}Vt(a){if(q){var b=q.location.href,c=this.instance.config.mask_personal_data_properties,d=this.instance.config.custom_personal_data_properties,e=cP(b,c?bE([],dy,d||[]):[],dA);this.N=this.N||{},this.N[e]||(this.N[e]=[]),this.N[e].push(a)}}Lt(){this.N&&!V(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class dP{constructor(a){this.Jt=(a,b,c)=>{c&&(c.noSessionId||c.activityTimeout||c.sessionPastMaximumLength)&&(bw.info("[PageViewManager] Session rotated, clearing pageview state",{sessionId:a,changeReason:c}),this.Kt=void 0,this._instance.scrollManager.resetContext())},this._instance=a,this.Yt()}Yt(){var a;this.Xt=null==(a=this._instance.sessionManager)?void 0:a.onSessionId(this.Jt)}destroy(){var a;null==(a=this.Xt)||a.call(this),this.Xt=void 0}doPageView(a,b){var c,d=this.Qt(a,b);return this.Kt={pathname:null!=(c=null==q?void 0:q.location.pathname)?c:"",pageViewId:b,timestamp:a},this._instance.scrollManager.resetContext(),d}doPageLeave(a){var b;return this.Qt(a,null==(b=this.Kt)?void 0:b.pageViewId)}doEvent(){var a;return{$pageview_id:null==(a=this.Kt)?void 0:a.pageViewId}}Qt(a,b){var c=this.Kt;if(!c)return{$pageview_id:b};var d={$pageview_id:b,$prev_pageview_id:c.pageViewId},e=this._instance.scrollManager.getContext();if(e&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:f,lastScrollY:g,maxScrollY:h,maxContentHeight:i,lastContentY:j,maxContentY:k}=e;if(!(W(f)||W(g)||W(h)||W(i)||W(j)||W(k))){f=Math.ceil(f),g=Math.ceil(g),h=Math.ceil(h),i=Math.ceil(i),j=Math.ceil(j),k=Math.ceil(k);var l=f<=1?1:aj(g/f,0,1,bw),m=f<=1?1:aj(h/f,0,1,bw),n=i<=1?1:aj(j/i,0,1,bw),o=i<=1?1:aj(k/i,0,1,bw);d=bD(d,{$prev_pageview_last_scroll:g,$prev_pageview_last_scroll_percentage:l,$prev_pageview_max_scroll:h,$prev_pageview_max_scroll_percentage:m,$prev_pageview_last_content:j,$prev_pageview_last_content_percentage:n,$prev_pageview_max_content:k,$prev_pageview_max_content_percentage:o})}}return c.pathname&&(d.$prev_pageview_pathname=c.pathname),c.timestamp&&(d.$prev_pageview_duration=(a.getTime()-c.timestamp.getTime())/1e3),d}}var dQ=function(a){return a.GZipJS="gzip-js",a.Base64="base64",a}({}),dR=Uint8Array,dS=Uint16Array,dT=Uint32Array,dU=new dR([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dV=new dR([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dW=new dR([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dX=function(a,b){for(var c=new dS(31),d=0;d<31;++d)c[d]=b+=1<<a[d-1];var e=new dT(c[30]);for(d=1;d<30;++d)for(var f=c[d];f<c[d+1];++f)e[f]=f-c[d]<<5|d;return[c,e]},dY=dX(dU,2),dZ=dY[0],d$=dY[1];dZ[28]=258,d$[258]=28;for(var d_=dX(dV,0)[1],d0=new dS(32768),d1=0;d1<32768;++d1){var d2=(43690&d1)>>>1|(21845&d1)<<1;d2=(61680&(d2=(52428&d2)>>>2|(13107&d2)<<2))>>>4|(3855&d2)<<4,d0[d1]=((65280&d2)>>>8|(255&d2)<<8)>>>1}var d3=function(a,b,c){for(var d=a.length,e=0,f=new dS(b);e<d;++e)++f[a[e]-1];var g,h=new dS(b);for(e=0;e<b;++e)h[e]=h[e-1]+f[e-1]<<1;if(c){g=new dS(1<<b);var i=15-b;for(e=0;e<d;++e)if(a[e])for(var j=e<<4|a[e],k=b-a[e],l=h[a[e]-1]++<<k,m=l|(1<<k)-1;l<=m;++l)g[d0[l]>>>i]=j}else for(g=new dS(d),e=0;e<d;++e)g[e]=d0[h[a[e]-1]++]>>>15-a[e];return g},d4=new dR(288);for(d1=0;d1<144;++d1)d4[d1]=8;for(d1=144;d1<256;++d1)d4[d1]=9;for(d1=256;d1<280;++d1)d4[d1]=7;for(d1=280;d1<288;++d1)d4[d1]=8;var d5=new dR(32);for(d1=0;d1<32;++d1)d5[d1]=5;var d6=d3(d4,9,0),d7=d3(d5,5,0),d8=function(a){return(a/8|0)+(7&a&&1)},d9=function(a,b,c){(null==c||c>a.length)&&(c=a.length);var d=new(a instanceof dS?dS:a instanceof dT?dT:dR)(c-b);return d.set(a.subarray(b,c)),d},ea=function(a,b,c){c<<=7&b;var d=b/8|0;a[d]|=c,a[d+1]|=c>>>8},eb=function(a,b,c){c<<=7&b;var d=b/8|0;a[d]|=c,a[d+1]|=c>>>8,a[d+2]|=c>>>16},ec=function(a,b){for(var c=[],d=0;d<a.length;++d)a[d]&&c.push({s:d,f:a[d]});var e=c.length,f=c.slice();if(!e)return[new dR(0),0];if(1==e){var g=new dR(c[0].s+1);return g[c[0].s]=1,[g,1]}c.sort(function(a,b){return a.f-b.f}),c.push({s:-1,f:25001});var h=c[0],i=c[1],j=0,k=1,l=2;for(c[0]={s:-1,f:h.f+i.f,l:h,r:i};k!=e-1;)h=c[c[j].f<c[l].f?j++:l++],i=c[j!=k&&c[j].f<c[l].f?j++:l++],c[k++]={s:-1,f:h.f+i.f,l:h,r:i};var m=f[0].s;for(d=1;d<e;++d)f[d].s>m&&(m=f[d].s);var n=new dS(m+1),o=ed(c[k-1],n,0);if(o>b){d=0;var p=0,q=o-b,r=1<<q;for(f.sort(function(a,b){return n[b.s]-n[a.s]||a.f-b.f});d<e;++d){var s=f[d].s;if(!(n[s]>b))break;p+=r-(1<<o-n[s]),n[s]=b}for(p>>>=q;p>0;){var t=f[d].s;n[t]<b?p-=1<<b-n[t]++-1:++d}for(;d>=0&&p;--d){var u=f[d].s;n[u]==b&&(--n[u],++p)}o=b}return[new dR(n),o]},ed=function(a,b,c){return -1==a.s?Math.max(ed(a.l,b,c+1),ed(a.r,b,c+1)):b[a.s]=c},ee=function(a){for(var b=a.length;b&&!a[--b];);for(var c=new dS(++b),d=0,e=a[0],f=1,g=function(a){c[d++]=a},h=1;h<=b;++h)if(a[h]==e&&h!=b)++f;else{if(!e&&f>2){for(;f>138;f-=138)g(32754);f>2&&(g(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(g(e),--f;f>6;f-=6)g(8304);f>2&&(g(f-3<<5|8208),f=0)}for(;f--;)g(e);f=1,e=a[h]}return[c.subarray(0,d),b]},ef=function(a,b){for(var c=0,d=0;d<b.length;++d)c+=a[d]*b[d];return c},eg=function(a,b,c){var d=c.length,e=d8(b+2);a[e]=255&d,a[e+1]=d>>>8,a[e+2]=255^a[e],a[e+3]=255^a[e+1];for(var f=0;f<d;++f)a[e+f+4]=c[f];return 8*(e+4+d)},eh=function(a,b,c,d,e,f,g,h,i,j,k){ea(b,k++,c),++e[256];for(var l=ec(e,15),m=l[0],n=l[1],o=ec(f,15),p=o[0],q=o[1],r=ee(m),s=r[0],t=r[1],u=ee(p),v=u[0],w=u[1],x=new dS(19),y=0;y<s.length;++y)x[31&s[y]]++;for(y=0;y<v.length;++y)x[31&v[y]]++;for(var z=ec(x,7),A=z[0],B=z[1],C=19;C>4&&!A[dW[C-1]];--C);var D,E,F,G,H=j+5<<3,I=ef(e,d4)+ef(f,d5)+g,J=ef(e,m)+ef(f,p)+g+14+3*C+ef(x,A)+(2*x[16]+3*x[17]+7*x[18]);if(H<=I&&H<=J)return eg(b,k,a.subarray(i,i+j));if(ea(b,k,1+(J<I)),k+=2,J<I){D=d3(m,n,0),E=m,F=d3(p,q,0),G=p;var K=d3(A,B,0);for(ea(b,k,t-257),ea(b,k+5,w-1),ea(b,k+10,C-4),k+=14,y=0;y<C;++y)ea(b,k+3*y,A[dW[y]]);k+=3*C;for(var L=[s,v],M=0;M<2;++M){var N=L[M];for(y=0;y<N.length;++y){var O=31&N[y];ea(b,k,K[O]),k+=A[O],O>15&&(ea(b,k,N[y]>>>5&127),k+=N[y]>>>12)}}}else D=d6,E=d4,F=d7,G=d5;for(y=0;y<h;++y)if(d[y]>255){eb(b,k,D[(O=d[y]>>>18&31)+257]),k+=E[O+257],O>7&&(ea(b,k,d[y]>>>23&31),k+=dU[O]);var P=31&d[y];eb(b,k,F[P]),k+=G[P],P>3&&(eb(b,k,d[y]>>>5&8191),k+=dV[P])}else eb(b,k,D[d[y]]),k+=E[d[y]];return eb(b,k,D[256]),k+E[256]},ei=new dT([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ej=function(){for(var a=new dT(256),b=0;b<256;++b){for(var c=b,d=9;--d;)c=(1&c&&0xedb88320)^c>>>1;a[b]=c}return a}(),ek=function(a,b,c){for(;c;++b)a[b]=c,c>>>=8},el=function(a){var b,c,d,e,f="";for(b=c=0,d=(a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,e=0;e<d;e++){var g=a.charCodeAt(e),h=null;g<128?c++:h=g>127&&g<2048?String.fromCharCode(g>>6|192,63&g|128):String.fromCharCode(g>>12|224,g>>6&63|128,63&g|128),Z(h)||(c>b&&(f+=a.substring(b,c)),f+=h,b=c=e+1)}return c>b&&(f+=a.substring(b,a.length)),f},em=!!z||!!y,en="text/plain",eo=function(a,b,c){void 0===c&&(c=!0);var d,[e,f]=a.split("?"),g=G({},b),h=null!=(d=null==f?void 0:f.split("&").map(a=>{var b,[d,e]=a.split("="),f=c&&null!=(b=g[d])?b:e;return delete g[d],d+"="+f}))?d:[],i=cN(g);return i&&h.push(i),e+"?"+h.join("&")},ep=(a,b)=>JSON.stringify(a,(a,b)=>"bigint"==typeof b?b.toString():b,b),eq=a=>{var{data:b,compression:c}=a;if(b){if(c===dQ.GZipJS){var d=new Blob([function(a,b){void 0===b&&(b={});var c=(e=0xffffffff,{p:function(a){for(var b=e,c=0;c<a.length;++c)b=ej[255&b^a[c]]^b>>>8;e=b},d:function(){return 0xffffffff^e}}),d=a.length;c.p(a);var e,f,g,h,i=(f=b,g=10+((h=b).filename&&h.filename.length+1||0),function(a,b,c,d,e,f){var g=a.length,h=new dR(d+g+5*(1+Math.floor(g/7e3))+8),i=h.subarray(d,h.length-e),j=0;if(!b||g<8)for(var k=0;k<=g;k+=65535){var l=k+65535;l<g?j=eg(i,j,a.subarray(k,l)):(i[k]=f,j=eg(i,j,a.subarray(k,g)))}else{for(var m=ei[b-1],n=m>>>13,o=8191&m,p=(1<<c)-1,q=new dS(32768),r=new dS(p+1),s=Math.ceil(c/3),t=2*s,u=function(b){return(a[b]^a[b+1]<<s^a[b+2]<<t)&p},v=new dT(25e3),w=new dS(288),x=new dS(32),y=0,z=0,A=(k=0,0),B=0,C=0;k<g;++k){var D=u(k),E=32767&k,F=r[D];if(q[E]=F,r[D]=E,B<=k){var G=g-k;if((y>7e3||A>24576)&&G>423){j=eh(a,i,0,v,w,x,z,A,C,k-C,j),A=y=z=0,C=k;for(var H=0;H<286;++H)w[H]=0;for(H=0;H<30;++H)x[H]=0}var I=2,J=0,K=o,L=E-F&32767;if(G>2&&D==u(k-L))for(var M=Math.min(n,G)-1,N=Math.min(32767,k),O=Math.min(258,G);L<=N&&--K&&E!=F;){if(a[k+I]==a[k+I-L]){for(var P=0;P<O&&a[k+P]==a[k+P-L];++P);if(P>I){if(I=P,J=L,P>M)break;var Q=Math.min(L,P-2),R=0;for(H=0;H<Q;++H){var S=k-L+H+32768&32767,T=S-q[S]+32768&32767;T>R&&(R=T,F=S)}}}L+=(E=F)-(F=q[E])+32768&32767}if(J){v[A++]=0x10000000|d$[I]<<18|d_[J];var U=31&d$[I],V=31&d_[J];z+=dU[U]+dV[V],++w[257+U],++x[V],B=k+I,++y}else v[A++]=a[k],++w[a[k]]}}j=eh(a,i,f,v,w,x,z,A,C,k-C,j)}return d9(h,0,d+d8(j)+e)}(a,null==f.level?6:f.level,null==f.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+f.mem,g,8,!0)),j=i.length;return function(a,b){var c=b.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=b.level<2?4:2*(9==b.level),a[9]=3,0!=b.mtime&&ek(a,4,Math.floor(new Date(b.mtime||Date.now())/1e3)),c){a[3]=8;for(var d=0;d<=c.length;++d)a[d+10]=c.charCodeAt(d)}}(i,b),ek(i,j-8,c.d()),ek(i,j-4,d),i}(function(a,b){var c=a.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(a);for(var d=new dR(a.length+(a.length>>>1)),e=0,f=function(a){d[e++]=a},g=0;g<c;++g){if(e+5>d.length){var h=new dR(e+8+(c-g<<1));h.set(d),d=h}var i=a.charCodeAt(g);i<128?f(i):(i<2048?f(192|i>>>6):(i>55295&&i<57344?(f(240|(i=65536+(1047552&i)|1023&a.charCodeAt(++g))>>>18),f(128|i>>>12&63)):f(224|i>>>12),f(128|i>>>6&63)),f(128|63&i))}return d9(d,0,e)}(ep(b)),{mtime:0})],{type:en});return{contentType:en,body:d,estimatedSize:d.size}}if(c===dQ.Base64){var e=(a=>"data="+encodeURIComponent("string"==typeof a?a:ep(a)))(function(a){var b,c,d,e,f,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,i=0,j="",k=[];if(!a)return a;a=el(a);do b=(f=a.charCodeAt(h++)<<16|a.charCodeAt(h++)<<8|a.charCodeAt(h++))>>18&63,c=f>>12&63,d=f>>6&63,e=63&f,k[i++]=g.charAt(b)+g.charAt(c)+g.charAt(d)+g.charAt(e);while(h<a.length);switch(j=k.join(""),a.length%3){case 1:j=j.slice(0,-2)+"==";break;case 2:j=j.slice(0,-1)+"="}return j}(ep(b)));return{contentType:"application/x-www-form-urlencoded",body:e,estimatedSize:new Blob([e]).size}}var f=ep(b);return{contentType:"application/json",body:f,estimatedSize:new Blob([f]).size}}},er=[];y&&er.push({transport:"fetch",method:a=>{var b,c,{contentType:d,body:e,estimatedSize:f}=null!=(b=eq(a))?b:{},g=new Headers;bC(a.headers,function(a,b){g.append(b,a)}),d&&g.append("Content-Type",d);var h=a.url,i=null;if(A){var j=new A;i={signal:j.signal,timeout:setTimeout(()=>j.abort(),a.timeout)}}y(h,G({method:(null==a?void 0:a.method)||"GET",headers:g,keepalive:"POST"===a.method&&52428.8>(f||0),body:e,signal:null==(c=i)?void 0:c.signal},a.fetchOptions)).then(b=>b.text().then(c=>{var d={statusCode:b.status,text:c};if(200===b.status)try{d.json=JSON.parse(c)}catch(a){bw.error(a)}null==a.callback||a.callback(d)})).catch(b=>{bw.error(b),null==a.callback||a.callback({statusCode:0,error:b})}).finally(()=>i?clearTimeout(i.timeout):null)}}),z&&er.push({transport:"XHR",method:a=>{var b,c=new z;c.open(a.method||"GET",a.url,!0);var{contentType:d,body:e}=null!=(b=eq(a))?b:{};bC(a.headers,function(a,b){c.setRequestHeader(b,a)}),d&&c.setRequestHeader("Content-Type",d),a.timeout&&(c.timeout=a.timeout),a.disableXHRCredentials||(c.withCredentials=!0),c.onreadystatechange=()=>{if(4===c.readyState){var b={statusCode:c.status,text:c.responseText};if(200===c.status)try{b.json=JSON.parse(c.responseText)}catch(a){}null==a.callback||a.callback(b)}},c.send(e)}}),null!=v&&v.sendBeacon&&er.push({transport:"sendBeacon",method:a=>{var b=eo(a.url,{beacon:"1"});try{var c,{contentType:d,body:e}=null!=(c=eq(a))?c:{},f="string"==typeof e?new Blob([e],{type:d}):e;v.sendBeacon(b,f)}catch(a){}}});var es=function(a,b){if(!function(a){try{new RegExp(a)}catch(a){return!1}return!0}(b))return!1;try{return new RegExp(b).test(a)}catch(a){return!1}};function et(a,b,c){return ep({distinct_id:a,userPropertiesToSet:b,userPropertiesToSetOnce:c})}var eu={exact:(a,b)=>b.some(b=>a.some(a=>b===a)),is_not:(a,b)=>b.every(b=>a.every(a=>b!==a)),regex:(a,b)=>b.some(b=>a.some(a=>es(b,a))),not_regex:(a,b)=>b.every(b=>a.every(a=>!es(b,a))),icontains:(a,b)=>b.map(ev).some(b=>a.map(ev).some(a=>b.includes(a))),not_icontains:(a,b)=>b.map(ev).every(b=>a.map(ev).every(a=>!b.includes(a))),gt:(a,b)=>b.some(b=>{var c=parseFloat(b);return!isNaN(c)&&a.some(a=>c>parseFloat(a))}),lt:(a,b)=>b.some(b=>{var c=parseFloat(b);return!isNaN(c)&&a.some(a=>c<parseFloat(a))})},ev=a=>a.toLowerCase();function ew(a,b){return!a||Object.entries(a).every(a=>{var[c,d]=a,e=null==b?void 0:b[c];if(W(e)||Z(e))return!1;var f=[String(e)],g=eu[d.operator];return!!g&&g(d.values,f)})}var ex=bx("[Error tracking]");class ey{constructor(a){var b,c;this.Zt=[],this.ti=new a9([new bk,new bu,new bm,new bl,new bs,new br,new bo,new bt],function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return function(b,d){void 0===d&&(d=0);for(var e=[],f=b.split("\n"),g=d;g<f.length;g++){var h=f[g];if(!(h.length>1024)){var i=bj.test(h)?h.replace(bj,"$1"):h;if(!i.match(/\S*Error: /)){for(var j of c){var k=j(i,a);if(k){e.push(k);break}}if(e.length>=50)break}}}if(!e.length)return[];var l=Array.from(e);return l.reverse(),l.slice(0,50).map(a=>G({},a,{filename:a.filename||(l[l.length-1]||{}).filename,function:a.function||"?"}))}}("web:javascript",bf,bi)),this._instance=a,this.Zt=null!=(b=null==(c=this._instance.persistence)?void 0:c.get_property(bT))?b:[]}onRemoteConfig(a){var b,c,d;if("errorTracking"in a){var e=null!=(b=null==(c=a.errorTracking)?void 0:c.suppressionRules)?b:[],f=null==(d=a.errorTracking)?void 0:d.captureExtensionExceptions;this.Zt=e,this._instance.persistence&&this._instance.persistence.register({[bT]:this.Zt,[bU]:f})}}get ii(){var a,b=!!this._instance.get_property(bU),c=this._instance.config.error_tracking.captureExtensionExceptions;return null!=(a=null!=c?c:b)&&a}buildProperties(a,b){return this.ti.buildFromUnknown(a,{syntheticException:null==b?void 0:b.syntheticException,mechanism:{handled:null==b?void 0:b.handled}})}sendExceptionEvent(a){var b=a.$exception_list;if(this.ei(b)){if(this.ri(b))return void ex.info("Skipping exception capture because a suppression rule matched");if(!this.ii&&this.si(b))return void ex.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ni(b))return void ex.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",a,{_noTruncate:!0,_batchKey:"exceptionEvent",oi:!0})}ri(a){if(0===a.length)return!1;var b=a.reduce((a,b)=>{var{type:c,value:d}=b;return X(c)&&c.length>0&&a.$exception_types.push(c),X(d)&&d.length>0&&a.$exception_values.push(d),a},{$exception_types:[],$exception_values:[]});return this.Zt.some(a=>{var c=a.values.map(a=>{var c,d=eu[a.operator],e=S(a.value)?a.value:[a.value],f=null!=(c=b[a.key])?c:[];return e.length>0&&d(e,f)});return"OR"===a.type?c.some(Boolean):c.every(Boolean)})}si(a){return a.flatMap(a=>{var b,c;return null!=(b=null==(c=a.stacktrace)?void 0:c.frames)?b:[]}).some(a=>a.filename&&a.filename.startsWith("chrome-extension://"))}ni(a){if(a.length>0){var b,c,d,e,f=null!=(b=null==(c=a[0].stacktrace)?void 0:c.frames)?b:[],g=f[f.length-1];return null!=(d=null==g||null==(e=g.filename)?void 0:e.includes("posthog.com/static"))&&d}return!1}ei(a){return!$(a)&&S(a)}}var ez=bx("[FeatureFlags]"),eA=bx("[FeatureFlags]",{debugEnabled:!0}),eB="$active_feature_flags",eC="$override_feature_flags",eD="$feature_flag_payloads",eE="$override_feature_flag_payloads",eF="$feature_flag_request_id",eG="$feature_flag_evaluated_at",eH=a=>{var b={};for(var[c,d]of bF(a||{}))d&&(b[c]=d);return b},eI=function(a){return a.FeatureFlags="feature_flags",a.Recordings="recordings",a}({});class eJ{constructor(a){this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.ci=!1,this._instance=a,this.featureFlagEventHandlers=[]}fi(){var a,b=null!=(a=this._instance.config.evaluation_contexts)?a:this._instance.config.evaluation_environments;return!this._instance.config.evaluation_environments||this._instance.config.evaluation_contexts||this.ci||(ez.warn("evaluation_environments is deprecated. Use evaluation_contexts instead. evaluation_environments will be removed in a future version."),this.ci=!0),null!=b&&b.length?b.filter(a=>{var b=a&&"string"==typeof a&&a.trim().length>0;return b||ez.error("Invalid evaluation context found:",a,"Expected non-empty string"),b}):[]}pi(){return this.fi().length>0}get hasLoadedFlags(){return this.li}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var a=this._instance.get_property(b2),b=this._instance.get_property(eC),c=this._instance.get_property(eE);if(!c&&!b)return a||{};var d=bD({},a||{});for(var e of[...new Set([...Object.keys(c||{}),...Object.keys(b||{})])]){var f,g,h=d[e],i=null==b?void 0:b[e],j=W(i)?null!=(f=null==h?void 0:h.enabled)&&f:!!i,k=W(i)?h.variant:"string"==typeof i?i:void 0,l=null==c?void 0:c[e],m=G({},h,{enabled:j,variant:j?null!=k?k:null==h?void 0:h.variant:void 0});j!==(null==h?void 0:h.enabled)&&(m.original_enabled=null==h?void 0:h.enabled),k!==(null==h?void 0:h.variant)&&(m.original_variant=null==h?void 0:h.variant),l&&(m.metadata=G({},null==h?void 0:h.metadata,{payload:l,original_payload:null==h||null==(g=h.metadata)?void 0:g.payload})),d[e]=m}return this.ai||(ez.warn(" Overriding feature flag details!",{flagDetails:a,overriddenPayloads:c,finalDetails:d}),this.ai=!0),d}getFlagVariants(){var a=this._instance.get_property(b0),b=this._instance.get_property(eC);if(!b)return a||{};for(var c=bD({},a),d=Object.keys(b),e=0;e<d.length;e++)c[d[e]]=b[d[e]];return this.ai||(ez.warn(" Overriding feature flags!",{enabledFlags:a,overriddenFlags:b,finalFlags:c}),this.ai=!0),c}getFlagPayloads(){var a=this._instance.get_property(eD),b=this._instance.get_property(eE);if(!b)return a||{};for(var c=bD({},a||{}),d=Object.keys(b),e=0;e<d.length;e++)c[d[e]]=b[d[e]];return this.ai||(ez.warn(" Overriding feature flag payloads!",{flagPayloads:a,overriddenPayloads:b,finalPayloads:c}),this.ai=!0),c}reloadFeatureFlags(){this.hi||this._instance.config.advanced_disable_feature_flags||this.gi||(this._instance.mi.emit("featureFlagsReloading",!0),this.gi=setTimeout(()=>{this.bi()},5))}yi(){clearTimeout(this.gi),this.gi=void 0}ensureFlagsLoaded(){this.li||this.ui||this.gi||this.reloadFeatureFlags()}setAnonymousDistinctId(a){this.$anon_distinct_id=a}setReloadingPaused(a){this.hi=a}bi(a){var b;if(this.yi(),!this._instance.M())if(this.ui)this.di=!0;else{var c=this._instance.config.token,d=this._instance.get_property("$device_id"),e={token:c,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:G({},(null==(b=this._instance.persistence)?void 0:b.get_initial_props())||{},this._instance.get_property(b3)||{}),group_properties:this._instance.get_property(b4),timezone:dJ()};Z(d)||W(d)||(e.$device_id=d),(null!=a&&a.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(e.disable_flags=!0),this.pi()&&(e.evaluation_contexts=this.fi());var f=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",g=this._instance.requestRouter.endpointFor("flags","/flags/?v=2"+f);this.ui=!0,this._instance._send_request({method:"POST",url:g,data:e,compression:this._instance.config.disable_compression?void 0:dQ.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:a=>{var b,c,d,f=!0;if(200===a.statusCode&&(this.di||(this.$anon_distinct_id=void 0),f=!1),this.ui=!1,!e.disable_flags||this.di){this.vi=!f;var g,h=[];a.error?a.error instanceof Error?h.push("AbortError"===a.error.name?"timeout":"connection_error"):h.push("unknown_error"):200!==a.statusCode&&h.push("api_error_"+a.statusCode),null!=(b=a.json)&&b.errorsWhileComputingFlags&&h.push("errors_while_computing_flags");var i=!(null==(c=a.json)||null==(c=c.quotaLimited)||!c.includes(eI.FeatureFlags));(i&&h.push("quota_limited"),null==(d=this._instance.persistence)||d.register({[b7]:h}),i)?ez.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(e.disable_flags||this.receivedFeatureFlags(null!=(g=a.json)?g:{},f),this.di&&(this.di=!1,this.bi()))}}})}}getFeatureFlag(a,b){var c;if(void 0===b&&(b={}),!b.fresh||this.vi){if(this.li||this.getFlags()&&this.getFlags().length>0){var d=this.getFeatureFlagResult(a,b);return null!=(c=null==d?void 0:d.variant)?c:null==d?void 0:d.enabled}ez.warn('getFeatureFlag for key "'+a+"\" failed. Feature flags didn't load in time.")}}getFeatureFlagDetails(a){return this.getFlagsWithDetails()[a]}getFeatureFlagPayload(a){var b=this.getFeatureFlagResult(a,{send_event:!1});return null==b?void 0:b.payload}getFeatureFlagResult(a,b){if(void 0===b&&(b={}),!b.fresh||this.vi)if(this.li||this.getFlags()&&this.getFlags().length>0){var c=this.getFlagVariants(),d=a in c,e=c[a],f=this.getFlagPayloads()[a],g=String(e),h=this._instance.get_property(eF)||void 0,i=this._instance.get_property(eG)||void 0,j=this._instance.get_property(b6)||{};if((b.send_event||!("send_event"in b))&&(!(a in j)||!j[a].includes(g))){S(j[a])?j[a].push(g):j[a]=[g],null==(n=this._instance.persistence)||n.register({[b6]:j});var k=this.getFeatureFlagDetails(a),l=[...null!=(o=this._instance.get_property(b7))?o:[]];W(e)&&l.push("flag_missing");var m={$feature_flag:a,$feature_flag_response:e,$feature_flag_payload:f||null,$feature_flag_request_id:h,$feature_flag_evaluated_at:i,$feature_flag_bootstrapped_response:(null==(p=this._instance.config.bootstrap)||null==(p=p.featureFlags)?void 0:p[a])||null,$feature_flag_bootstrapped_payload:(null==(q=this._instance.config.bootstrap)||null==(q=q.featureFlagPayloads)?void 0:q[a])||null,$used_bootstrap_value:!this.vi};W(null==k||null==(r=k.metadata)?void 0:r.version)||(m.$feature_flag_version=k.metadata.version);var n,o,p,q,r,s,t,u,v,w,x,y=null!=(s=null==k||null==(t=k.reason)?void 0:t.description)?s:null==k||null==(u=k.reason)?void 0:u.code;y&&(m.$feature_flag_reason=y),null!=k&&null!=(v=k.metadata)&&v.id&&(m.$feature_flag_id=k.metadata.id),W(null==k?void 0:k.original_variant)&&W(null==k?void 0:k.original_enabled)||(m.$feature_flag_original_response=W(k.original_variant)?k.original_enabled:k.original_variant),null!=k&&null!=(w=k.metadata)&&w.original_payload&&(m.$feature_flag_original_payload=null==k||null==(x=k.metadata)?void 0:x.original_payload),l.length&&(m.$feature_flag_error=l.join(",")),this._instance.capture("$feature_flag_called",m)}if(d){var z=f;if(!W(f))try{z=JSON.parse(f)}catch(a){}return{key:a,enabled:!!e,variant:"string"==typeof e?e:void 0,payload:z}}}else ez.warn('getFeatureFlagResult for key "'+a+"\" failed. Feature flags didn't load in time.")}getRemoteConfigPayload(a,b){var c=this._instance.config.token,d={distinct_id:this._instance.get_distinct_id(),token:c};this.pi()&&(d.evaluation_contexts=this.fi()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2"),data:d,compression:this._instance.config.disable_compression?void 0:dQ.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:c=>{var d,e=null==(d=c.json)?void 0:d.featureFlagPayloads;b((null==e?void 0:e[a])||void 0)}})}isFeatureEnabled(a,b){if(void 0===b&&(b={}),!b.fresh||this.vi){if(this.li||this.getFlags()&&this.getFlags().length>0){var c=this.getFeatureFlag(a,b);return W(c)?void 0:!!c}ez.warn('isFeatureEnabled for key "'+a+"\" failed. Feature flags didn't load in time.")}}addFeatureFlagsHandler(a){this.featureFlagEventHandlers.push(a)}removeFeatureFlagsHandler(a){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(b=>b!==a)}receivedFeatureFlags(a,b){if(this._instance.persistence){this.li=!0;var c=this.getFlagVariants(),d=this.getFlagPayloads(),e=this.getFlagsWithDetails();!function(a,b,c,d,e){void 0===c&&(c={}),void 0===d&&(d={}),void 0===e&&(e={});var f,g=((f=a.flags)?(a.featureFlags=Object.fromEntries(Object.keys(f).map(a=>{var b;return[a,null!=(b=f[a].variant)?b:f[a].enabled]})),a.featureFlagPayloads=Object.fromEntries(Object.keys(f).filter(a=>f[a].enabled).filter(a=>{var b;return null==(b=f[a].metadata)?void 0:b.payload}).map(a=>{var b;return[a,null==(b=f[a].metadata)?void 0:b.payload]}))):ez.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),a),h=g.flags,i=g.featureFlags,j=g.featureFlagPayloads;if(i){var k=a.requestId,l=a.evaluatedAt;if(S(i)){ez.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var m={};if(i)for(var n=0;n<i.length;n++)m[i[n]]=!0;b&&b.register({[eB]:i,[b0]:m})}else{var o=i,p=j,q=h;if(a.errorsWhileComputingFlags)if(h){var r=new Set(Object.keys(h).filter(a=>{var b;return!(null!=(b=h[a])&&b.failed)}));o=G({},c,Object.fromEntries(Object.entries(o).filter(a=>{var[b]=a;return r.has(b)}))),p=G({},d,Object.fromEntries(Object.entries(p||{}).filter(a=>{var[b]=a;return r.has(b)}))),q=G({},e,Object.fromEntries(Object.entries(q||{}).filter(a=>{var[b]=a;return r.has(b)})))}else o=G({},c,o),p=G({},d,p),q=G({},e,q);b&&b.register(G({[eB]:Object.keys(eH(o)),[b0]:o||{},[eD]:p||{},[b2]:q||{}},k?{[eF]:k}:{},l?{[eG]:l}:{}))}}}(a,this._instance.persistence,c,d,e),this.wi(b)}}override(a,b){void 0===b&&(b=!1),ez.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:a,suppressWarning:b})}overrideFeatureFlags(a){if(!this._instance.__loaded||!this._instance.persistence)return ez.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===a)return this._instance.persistence.unregister(eC),this._instance.persistence.unregister(eE),this.wi(),eA.info("All overrides cleared");if(a&&"object"==typeof a&&("flags"in a||"payloads"in a)){var b;if(this.ai=!!(null!=(b=a.suppressWarning)&&b),"flags"in a){if(!1===a.flags)this._instance.persistence.unregister(eC),eA.info("Flag overrides cleared");else if(a.flags){if(S(a.flags)){for(var c={},d=0;d<a.flags.length;d++)c[a.flags[d]]=!0;this._instance.persistence.register({[eC]:c})}else this._instance.persistence.register({[eC]:a.flags});eA.info("Flag overrides set",{flags:a.flags})}}return"payloads"in a&&(!1===a.payloads?(this._instance.persistence.unregister(eE),eA.info("Payload overrides cleared")):a.payloads&&(this._instance.persistence.register({[eE]:a.payloads}),eA.info("Payload overrides set",{payloads:a.payloads}))),void this.wi()}this.wi()}onFeatureFlags(a){if(this.addFeatureFlagsHandler(a),this.li){var{flags:b,flagVariants:c}=this.xi();a(b,c)}return()=>this.removeFeatureFlagsHandler(a)}updateEarlyAccessFeatureEnrollment(a,b,c){var d,e=(this._instance.get_property(b1)||[]).find(b=>b.flagKey===a),f={["$feature_enrollment/"+a]:b},g={$feature_flag:a,$feature_enrollment:b,$set:f};e&&(g.$early_access_feature_name=e.name),c&&(g.$feature_enrollment_stage=c),this._instance.capture("$feature_enrollment_update",g),this.setPersonPropertiesForFlags(f,!1);var h=G({},this.getFlagVariants(),{[a]:b});null==(d=this._instance.persistence)||d.register({[eB]:Object.keys(eH(h)),[b0]:h}),this.wi()}getEarlyAccessFeatures(a,b,c){void 0===b&&(b=!1);var d=this._instance.get_property(b1),e=c?"&"+c.map(a=>"stage="+a).join("&"):"";if(d&&!b)return a(d);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+e),method:"GET",callback:b=>{var c,d;if(b.json){var e=b.json.earlyAccessFeatures;return null==(c=this._instance.persistence)||c.unregister(b1),null==(d=this._instance.persistence)||d.register({[b1]:e}),a(e)}}})}xi(){var a=this.getFlags(),b=this.getFlagVariants();return{flags:a.filter(a=>b[a]),flagVariants:Object.keys(b).filter(a=>b[a]).reduce((a,c)=>(a[c]=b[c],a),{})}}wi(a){var{flags:b,flagVariants:c}=this.xi();this.featureFlagEventHandlers.forEach(d=>d(b,c,{errorsLoading:a}))}setPersonPropertiesForFlags(a,b){void 0===b&&(b=!0);var c=this._instance.get_property(b3)||{};this._instance.register({[b3]:G({},c,a)}),b&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(b3)}setGroupPropertiesForFlags(a,b){void 0===b&&(b=!0);var c=this._instance.get_property(b4)||{};0!==Object.keys(c).length&&Object.keys(c).forEach(b=>{c[b]=G({},c[b],a[b]),delete a[b]}),this._instance.register({[b4]:G({},c,a)}),b&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(a){if(a){var b=this._instance.get_property(b4)||{};this._instance.register({[b4]:G({},b,{[a]:{}})})}else this._instance.unregister(b4)}reset(){this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.$anon_distinct_id=void 0,this.yi(),this.ai=!1}}var eK=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class eL{constructor(a,b){this.R=a,this.props={},this.$i=!1,this.Ei=(a=>{var b="";return a.token&&(b=a.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),a.persistence_name?"ph_"+a.persistence_name:"ph_"+b+"_posthog"})(a),this.Y=this.Si(a),this.load(),a.debug&&bw.info("Persistence loaded",a.persistence,G({},this.props)),this.update_config(a,a,b),this.save()}isDisabled(){return!!this.ki}Si(a){-1===eK.indexOf(a.persistence.toLowerCase())&&(bw.critical("Unknown persistence type "+a.persistence+"; falling back to localStorage+cookie"),a.persistence="localStorage+cookie");var b,c,d=(void 0===(b=a.cookie_persisted_properties||[])&&(b=[]),c=[...c6,...b],G({},c5,{W:function(a){try{var b={};try{b=c3.W(a)||{}}catch(a){}var c=bD(b,JSON.parse(c5.q(a)||"{}"));return c5.G(a,c),c}catch(a){}return null},G:function(a,b,d,e,f,g){try{c5.G(a,b,void 0,void 0,g);var h={};c.forEach(a=>{b[a]&&(h[a]=b[a])}),Object.keys(h).length&&c3.G(a,h,d,e,f,g)}catch(a){c5.B(a)}},V:function(a,b){try{null==q||q.localStorage.removeItem(a),c3.V(a,b)}catch(a){c5.B(a)}}})),e=a.persistence.toLowerCase();return"localstorage"===e&&c5.H()?c5:"localstorage+cookie"===e&&d.H()?d:"sessionstorage"===e&&da.H()?da:"memory"===e?c8:"cookie"===e?c3:d.H()?d:c3}properties(){var a={};return bC(this.props,function(b,c){if(c===b0&&U(b))for(var d,e=Object.keys(b),f=0;f<e.length;f++)a["$feature/"+e[f]]=b[e[f]];else d=!1,(Z(ch)?d:u&&ch.indexOf===u?-1!=ch.indexOf(c):(bC(ch,function(a){if(d||(d=a===c))return bA}),d))||(a[c]=b)}),a}load(){if(!this.ki){var a=this.Y.W(this.Ei);a&&(this.props=bD({},a))}}save(){this.ki||this.Y.G(this.Ei,this.props,this.Pi,this.Ti,this.Ii,this.R.debug)}remove(){this.Y.V(this.Ei,!1),this.Y.V(this.Ei,!0)}clear(){this.remove(),this.props={}}register_once(a,b,c){if(U(a)){W(b)&&(b="None"),this.Pi=W(c)?this.Ci:c;var d=!1;if(bC(a,(a,c)=>{this.props.hasOwnProperty(c)&&this.props[c]!==b||(this.props[c]=a,d=!0)}),d)return this.save(),!0}return!1}register(a,b){if(U(a)){this.Pi=W(b)?this.Ci:b;var c=!1;if(bC(a,(b,d)=>{a.hasOwnProperty(d)&&this.props[d]!==b&&(this.props[d]=b,c=!0)}),c)return this.save(),!0}return!1}unregister(a){a in this.props&&(delete this.props[a],this.save())}update_campaign_params(){if(!this.$i){var a=dC(this.R.custom_campaign_params,this.R.mask_personal_data_properties,this.R.custom_personal_data_properties);V(bI(a))||this.register(a),this.$i=!0}}update_search_keyword(){var a;this.register((a=null==w?void 0:w.referrer)?dE(a):{})}update_referrer_info(){var a;this.register_once({$referrer:dG(),$referring_domain:null!=w&&w.referrer&&(null==(a=cM(w.referrer))?void 0:a.host)||"$direct"},void 0)}set_initial_person_info(){this.props[cb]||this.props[cc]||this.register_once({[cd]:dH(this.R.mask_personal_data_properties,this.R.custom_personal_data_properties)},void 0)}get_initial_props(){var a={};bC([cc,cb],b=>{var c=this.props[b];c&&bC(c,function(b,c){a["$initial_"+N(c)]=b})});var b,c,d=this.props[cd];return d&&bD(a,(b=dI(d),c={},bC(b,function(a,b){c["$initial_"+N(b)]=a}),c)),a}safe_merge(a){return bC(this.props,function(b,c){c in a||(a[c]=b)}),a}update_config(a,b,c){if(this.Ci=this.Pi=a.cookie_expiration,this.set_disabled(a.disable_persistence||!!c),this.set_cross_subdomain(a.cross_subdomain_cookie),this.set_secure(a.secure_cookie),a.persistence!==b.persistence||!((a,b)=>{if(a.length!==b.length)return!1;var c=[...a].sort(),d=[...b].sort();return c.every((a,b)=>a===d[b])})(a.cookie_persisted_properties||[],b.cookie_persisted_properties||[])){var d=this.Si(a),e=this.props;this.clear(),this.Y=d,this.props=e,this.save()}}set_disabled(a){this.ki=a,this.ki?this.remove():this.save()}set_cross_subdomain(a){a!==this.Ti&&(this.Ti=a,this.remove(),this.save())}set_secure(a){a!==this.Ii&&(this.Ii=a,this.remove(),this.save())}set_event_timer(a,b){var c=this.props[bP]||{};c[a]=b,this.props[bP]=c,this.save()}remove_event_timer(a){var b=(this.props[bP]||{})[a];return W(b)||(delete this.props[bP][a],this.save()),b}get_property(a){return this.props[a]}set_property(a,b){this.props[a]=b,this.save()}}var eM=bx("[Product Tours]"),eN="ph_product_tours";class eO{constructor(a){this.Ri=null,this.Fi=null,this._instance=a}onRemoteConfig(a){"productTours"in a&&(this._instance.persistence&&this._instance.persistence.register({[bX]:!!a.productTours}),this.loadIfEnabled())}loadIfEnabled(){var a,b;this.Ri||(a=this._instance).config.disable_product_tours||null==(b=a.persistence)||!b.get_property(bX)||this.it(()=>this.Oi())}it(a){var b,c;null!=(b=C.__PosthogExtensions__)&&b.generateProductTours?a():null==(c=C.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"product-tours",b=>{b?eM.error("Could not load product tours script",b):a()})}Oi(){var a;!this.Ri&&null!=(a=C.__PosthogExtensions__)&&a.generateProductTours&&(this.Ri=C.__PosthogExtensions__.generateProductTours(this._instance,!0))}getProductTours(a,b){if(void 0===b&&(b=!1),!S(this.Fi)||b){var c=this._instance.persistence;if(c){var d=c.props[eN];if(S(d)&&!b)return this.Fi=d,void a(d,{isLoaded:!0})}this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/product_tours/?token="+this._instance.config.token),method:"GET",callback:b=>{var d=b.statusCode;if(200!==d||!b.json){var e="Product Tours API could not be loaded, status: "+d;return eM.error(e),void a([],{isLoaded:!1,error:e})}var f=S(b.json.product_tours)?b.json.product_tours:[];this.Fi=f,c&&c.register({[eN]:f}),a(f,{isLoaded:!0})}})}else a(this.Fi,{isLoaded:!0})}getActiveProductTours(a){$(this.Ri)?a([],{isLoaded:!1,error:"Product tours not loaded"}):this.Ri.getActiveProductTours(a)}showProductTour(a){var b;null==(b=this.Ri)||b.showTourById(a)}previewTour(a){this.Ri?this.Ri.previewTour(a):this.it(()=>{var b;this.Oi(),null==(b=this.Ri)||b.previewTour(a)})}dismissProductTour(){var a;null==(a=this.Ri)||a.dismissTour("user_clicked_skip")}nextStep(){var a;null==(a=this.Ri)||a.nextStep()}previousStep(){var a;null==(a=this.Ri)||a.previousStep()}clearCache(){var a;this.Fi=null,null==(a=this._instance.persistence)||a.unregister(eN)}resetTour(a){var b;null==(b=this.Ri)||b.resetTour(a)}resetAllTours(){var a;null==(a=this.Ri)||a.resetAllTours()}cancelPendingTour(a){var b;null==(b=this.Ri)||b.cancelPendingTour(a)}}var eP=function(a){return a.Activation="events",a.Cancellation="cancelEvents",a}({}),eQ=(function(a){a.Button="button",a.Tab="tab",a.Selector="selector"}({}),function(a){a.TopLeft="top_left",a.TopRight="top_right",a.TopCenter="top_center",a.MiddleLeft="middle_left",a.MiddleRight="middle_right",a.MiddleCenter="middle_center",a.Left="left",a.Center="center",a.Right="right",a.NextToTrigger="next_to_trigger"}({}),function(a){a.Top="top",a.Left="left",a.Right="right",a.Bottom="bottom"}({}),function(a){return a.Popover="popover",a.API="api",a.Widget="widget",a.ExternalSurvey="external_survey",a}({})),eR=(function(a){a.Open="open",a.MultipleChoice="multiple_choice",a.SingleChoice="single_choice",a.Rating="rating",a.Link="link"}({}),function(a){a.NextQuestion="next_question",a.End="end",a.ResponseBased="response_based",a.SpecificQuestion="specific_question"}({}),function(a){a.Once="once",a.Recurring="recurring",a.Always="always"}({}),function(a){return a.SHOWN="survey shown",a.DISMISSED="survey dismissed",a.SENT="survey sent",a.ABANDONED="survey abandoned",a}({})),eS=function(a){return a.SURVEY_ID="$survey_id",a.SURVEY_NAME="$survey_name",a.SURVEY_RESPONSE="$survey_response",a.SURVEY_ITERATION="$survey_iteration",a.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",a.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",a.SURVEY_SUBMISSION_ID="$survey_submission_id",a.SURVEY_QUESTIONS="$survey_questions",a.SURVEY_COMPLETED="$survey_completed",a.PRODUCT_TOUR_ID="$product_tour_id",a.SURVEY_LAST_SEEN_DATE="$survey_last_seen_date",a}({}),eT=function(a){return a.Popover="popover",a.Inline="inline",a}({}),eU=bx("[Surveys]"),eV="seenSurvey_",eW=a=>((a,b)=>{var c=""+a+b.id;return b.current_iteration&&b.current_iteration>0&&(c=""+a+b.id+"_"+b.current_iteration),c})(eV,a),eX=[eQ.Popover,eQ.Widget,eQ.API],eY={ignoreConditions:!1,ignoreDelay:!1,displayType:eT.Popover};class eZ{constructor(){this.Mi={},this.Mi={}}on(a,b){return this.Mi[a]||(this.Mi[a]=[]),this.Mi[a].push(b),()=>{this.Mi[a]=this.Mi[a].filter(a=>a!==b)}}emit(a,b){for(var c of this.Mi[a]||[])c(b);for(var d of this.Mi["*"]||[])d(a,b)}}function e$(a,b,c){if($(a))return!1;switch(c){case"exact":return a===b;case"contains":return RegExp(b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*"),"i").test(a);case"regex":try{return new RegExp(b).test(a)}catch(a){return!1}default:return!1}}class e_{constructor(a){this.Ai=new eZ,this.ji=(a,b)=>this.Di(a,b)&&this.Li(a,b)&&this.Ni(a,b)&&this.Ui(a,b),this.Di=(a,b)=>null==b||!b.event||(null==a?void 0:a.event)===(null==b?void 0:b.event),this._instance=a,this.zi=new Set,this.Hi=new Set}init(){var a,b;W(null==(a=this._instance)?void 0:a._addCaptureHook)||null==(b=this._instance)||b._addCaptureHook((a,b)=>{this.on(a,b)})}register(a){var b,c;if(!W(null==(b=this._instance)?void 0:b._addCaptureHook)&&(a.forEach(a=>{var b,c;null==(b=this.Hi)||b.add(a),null==(c=a.steps)||c.forEach(a=>{var b;null==(b=this.zi)||b.add((null==a?void 0:a.event)||"")})}),null!=(c=this._instance)&&c.autocapture)){var d,e=new Set;a.forEach(a=>{var b;null==(b=a.steps)||b.forEach(a=>{null!=a&&a.selector&&e.add(null==a?void 0:a.selector)})}),null==(d=this._instance)||d.autocapture.setElementSelectors(e)}}on(a,b){var c;null!=b&&0!=a.length&&(this.zi.has(a)||this.zi.has(null==b?void 0:b.event))&&this.Hi&&(null==(c=this.Hi)?void 0:c.size)>0&&this.Hi.forEach(a=>{this.Bi(b,a)&&this.Ai.emit("actionCaptured",a.name)})}qi(a){this.onAction("actionCaptured",b=>a(b))}Bi(a,b){if(null==(null==b?void 0:b.steps))return!1;for(var c of b.steps)if(this.ji(a,c))return!0;return!1}onAction(a,b){return this.Ai.on(a,b)}Li(a,b){if(null!=b&&b.url){var c,d=null==a||null==(c=a.properties)?void 0:c.$current_url;if(!d||"string"!=typeof d||!e$(d,b.url,b.url_matching||"contains"))return!1}return!0}Ni(a,b){return!!this.Wi(a,b)&&!!this.Gi(a,b)&&!!this.Vi(a,b)}Wi(a,b){if(null==b||!b.href)return!0;var c=this.Ji(a);if(c.length>0)return c.some(a=>e$(a.href,b.href,b.href_matching||"exact"));var d,e,f=(null==a||null==(d=a.properties)?void 0:d.$elements_chain)||"";return!!f&&e$((e=f.match(/(?::|")href="(.*?)"/))?e[1]:"",b.href,b.href_matching||"exact")}Gi(a,b){if(null==b||!b.text)return!0;var c=this.Ji(a);if(c.length>0)return c.some(a=>e$(a.text,b.text,b.text_matching||"exact")||e$(a.$el_text,b.text,b.text_matching||"exact"));var d,e,f,g,h=(null==a||null==(d=a.properties)?void 0:d.$elements_chain)||"";return!!h&&(e=function(a){for(var b,c=[],d=/(?::|")text="(.*?)"/g;!$(b=d.exec(a));)c.includes(b[1])||c.push(b[1]);return c}(h),f=b.text,g=b.text_matching||"exact",e.some(a=>e$(a,f,g)))}Vi(a,b){if(null==b||!b.selector)return!0;var c,d,e=null==a||null==(c=a.properties)?void 0:c.$element_selectors;if(null!=e&&e.includes(b.selector))return!0;var f=(null==a||null==(d=a.properties)?void 0:d.$elements_chain)||"";if(b.selector_regex&&f)try{return new RegExp(b.selector_regex).test(f)}catch(a){}return!1}Ji(a){var b;return null==(null==a||null==(b=a.properties)?void 0:b.$elements)?[]:null==a?void 0:a.properties.$elements}Ui(a,b){return null==b||!b.properties||0===b.properties.length||ew(b.properties.reduce((a,b)=>{var c=S(b.value)?b.value.map(String):null!=b.value?[String(b.value)]:[];return a[b.key]={values:c,operator:b.operator||"exact"},a},{}),null==a?void 0:a.properties)}}class e0{constructor(a){this._instance=a,this.Ki=new Map,this.Yi=new Map,this.Xi=new Map}Qi(a,b){return!!a&&ew(a.propertyFilters,null==b?void 0:b.properties)}Zi(a,b){var c=new Map;return a.forEach(a=>{var d;null==(d=a.conditions)||null==(d=d[b])||null==(d=d.values)||d.forEach(b=>{if(null!=b&&b.name){var d=c.get(b.name)||[];d.push(a.id),c.set(b.name,d)}})}),c}te(a,b,c){var d=(c===eP.Activation?this.Ki:this.Yi).get(a),e=[];return this.ie(a=>{e=a.filter(a=>null==d?void 0:d.includes(a.id))}),e.filter(d=>{var e,f=null==(e=d.conditions)||null==(e=e[c])||null==(e=e.values)?void 0:e.find(b=>b.name===a);return this.Qi(f,b)})}register(a){var b;W(null==(b=this._instance)?void 0:b._addCaptureHook)||(this.ee(a),this.re(a))}re(a){var b=a.filter(a=>{var b,c;return(null==(b=a.conditions)?void 0:b.actions)&&(null==(c=a.conditions)||null==(c=c.actions)||null==(c=c.values)?void 0:c.length)>0});0!==b.length&&(null==this.se&&(this.se=new e_(this._instance),this.se.init(),this.se.qi(a=>{this.onAction(a)})),b.forEach(a=>{var b,c,d,e,f;a.conditions&&null!=(b=a.conditions)&&b.actions&&null!=(c=a.conditions)&&null!=(c=c.actions)&&c.values&&(null==(d=a.conditions)||null==(d=d.actions)||null==(d=d.values)?void 0:d.length)>0&&(null==(e=this.se)||e.register(a.conditions.actions.values),null==(f=a.conditions)||null==(f=f.actions)||null==(f=f.values)||f.forEach(b=>{if(b&&b.name){var c=this.Xi.get(b.name);c&&c.push(a.id),this.Xi.set(b.name,c||[a.id])}}))}))}ee(a){var b,c=a.filter(a=>{var b,c;return(null==(b=a.conditions)?void 0:b.events)&&(null==(c=a.conditions)||null==(c=c.events)||null==(c=c.values)?void 0:c.length)>0}),d=a.filter(a=>{var b,c;return(null==(b=a.conditions)?void 0:b.cancelEvents)&&(null==(c=a.conditions)||null==(c=c.cancelEvents)||null==(c=c.values)?void 0:c.length)>0});(0!==c.length||0!==d.length)&&(null==(b=this._instance)||b._addCaptureHook((a,b)=>{this.onEvent(a,b)}),this.Ki=this.Zi(a,eP.Activation),this.Yi=this.Zi(a,eP.Cancellation))}onEvent(a,b){var c,d=this.ne(),e=this.oe(),f=this.ae(),g=(null==(c=this._instance)||null==(c=c.persistence)?void 0:c.props[e])||[];if(f===a&&b&&g.length>0){d.info("event matched, removing item from activated items",{event:a,eventPayload:b,existingActivatedItems:g});var h,i,j=(null==b||null==(h=b.properties)?void 0:h.$survey_id)||(null==b||null==(i=b.properties)?void 0:i.$product_tour_id);if(j){var k=g.indexOf(j);k>=0&&(g.splice(k,1),this.le(g))}}else{if(this.Yi.has(a)){var l=this.te(a,b,eP.Cancellation);l.length>0&&(d.info("cancel event matched, cancelling items",{event:a,itemsToCancel:l.map(a=>a.id)}),l.forEach(a=>{var b=g.indexOf(a.id);b>=0&&g.splice(b,1),this.ue(a.id)}),this.le(g))}if(this.Ki.has(a)){d.info("event name matched",{event:a,eventPayload:b,items:this.Ki.get(a)});var m=this.te(a,b,eP.Activation);this.le(g.concat(m.map(a=>a.id)||[]))}}}onAction(a){var b,c=this.oe(),d=(null==(b=this._instance)||null==(b=b.persistence)?void 0:b.props[c])||[];this.Xi.has(a)&&this.le(d.concat(this.Xi.get(a)||[]))}le(a){var b,c=this.ne(),d=this.oe(),e=[...new Set(a)].filter(a=>!this.he(a));c.info("updating activated items",{activatedItems:e}),null==(b=this._instance)||null==(b=b.persistence)||b.register({[d]:e})}getActivatedIds(){var a,b=this.oe();return(null==(a=this._instance)||null==(a=a.persistence)?void 0:a.props[b])||[]}getEventToItemsMap(){return this.Ki}de(){return this.se}}class e1 extends e0{constructor(a){super(a)}oe(){return"$surveys_activated"}ae(){return eR.SHOWN}ie(a){var b;null==(b=this._instance)||b.getSurveys(a)}ue(a){var b;null==(b=this._instance)||b.cancelPendingSurvey(a)}ne(){return eU}he(){return!1}getSurveys(){return this.getActivatedIds()}getEventToSurveys(){return this.getEventToItemsMap()}}class e2{constructor(a){this.ve=void 0,this._surveyManager=null,this.ce=!1,this.fe=[],this.pe=null,this._instance=a,this._surveyEventReceiver=null}onRemoteConfig(a){if(!this._instance.config.disable_surveys){var b=a.surveys;if($(b))return eU.warn("Flags not loaded yet. Not loading surveys.");var c=S(b);this.ve=c?b.length>0:b,eU.info("flags response received, isSurveysEnabled: "+this.ve),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var a=[],b=0;b<localStorage.length;b++){var c=localStorage.key(b);(null!=c&&c.startsWith(eV)||null!=c&&c.startsWith("inProgressSurvey_"))&&a.push(c)}a.forEach(a=>localStorage.removeItem(a))}loadIfEnabled(){if(!this._surveyManager)if(this.ce)eU.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)eU.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())eU.info("Not loading surveys in cookieless mode without consent.");else{var a=null==C?void 0:C.__PosthogExtensions__;if(a){if(!W(this.ve)||this._instance.config.advanced_enable_surveys){var b=this.ve||this._instance.config.advanced_enable_surveys;this.ce=!0;try{var c=a.generateSurveys;if(c)return void this._e(c,b);var d=a.loadExternalDependency;if(!d)return void this.ge("PostHog loadExternalDependency extension not found.");d(this._instance,"surveys",c=>{c||!a.generateSurveys?this.ge("Could not load surveys script",c):this._e(a.generateSurveys,b)})}catch(a){throw this.ge("Error initializing surveys",a),a}finally{this.ce=!1}}}else eU.error("PostHog Extensions not found.")}}_e(a,b){this._surveyManager=a(this._instance,b),this._surveyEventReceiver=new e1(this._instance),eU.info("Surveys loaded successfully"),this.me({isLoaded:!0})}ge(a,b){eU.error(a,b),this.me({isLoaded:!1,error:a})}onSurveysLoaded(a){return this.fe.push(a),this._surveyManager&&this.me({isLoaded:!0}),()=>{this.fe=this.fe.filter(b=>b!==a)}}getSurveys(a,b){if(void 0===b&&(b=!1),this._instance.config.disable_surveys)return eU.info("Disabled. Not loading surveys."),a([]);var c,d=this._instance.get_property(b5);if(d&&!b)return a(d,{isLoaded:!0});"undefined"!=typeof Promise&&this.pe?this.pe.then(b=>{var{surveys:c,context:d}=b;return a(c,d)}):("undefined"!=typeof Promise&&(this.pe=new Promise(a=>{c=a})),this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:b=>{this.pe=null;var d=b.statusCode;if(200!==d||!b.json){var e="Surveys API could not be loaded, status: "+d;eU.error(e);var f={isLoaded:!1,error:e};return a([],f),void(null==c||c({surveys:[],context:f}))}var g,h,i=b.json.surveys||[],j=i.filter(a=>{var b,c;return!(!a.start_date||a.end_date)&&(!(null==(b=a.conditions)||null==(b=b.events)||null==(b=b.values)||!b.length)||!(null==(c=a.conditions)||null==(c=c.actions)||null==(c=c.values)||!c.length))});j.length>0&&(null==(h=this._surveyEventReceiver)||h.register(j)),null==(g=this._instance.persistence)||g.register({[b5]:i});var k={isLoaded:!0};a(i,k),null==c||c({surveys:i,context:k})}}))}me(a){for(var b of this.fe)try{if(!a.isLoaded)return b([],a);this.getSurveys(b)}catch(a){eU.error("Error in survey callback",a)}}getActiveMatchingSurveys(a,b){if(void 0===b&&(b=!1),!$(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(a,b);eU.warn("init was not called")}be(a){var b=null;return this.getSurveys(c=>{var d;b=null!=(d=c.find(b=>b.id===a))?d:null}),b}ye(a){if($(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var b="string"==typeof a?this.be(a):a;return b?this._surveyManager.checkSurveyEligibility(b):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(a){if($(this._surveyManager))return eU.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var b=this.ye(a);return{visible:b.eligible,disabledReason:b.reason}}canRenderSurveyAsync(a,b){return $(this._surveyManager)?(eU.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(c=>{this.getSurveys(b=>{var d,e=null!=(d=b.find(b=>b.id===a))?d:null;if(e){var f=this.ye(e);c({visible:f.eligible,disabledReason:f.reason})}else c({visible:!1,disabledReason:"Survey not found"})},b)})}renderSurvey(a,b,c){var d;if($(this._surveyManager))eU.warn("init was not called");else{var e="string"==typeof a?this.be(a):a;if(null!=e&&e.id)if(eX.includes(e.type)){var f=null==w?void 0:w.querySelector(b);if(f)return null!=(d=e.appearance)&&d.surveyPopupDelaySeconds?(eU.info("Rendering survey "+e.id+" with delay of "+e.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var a,b;eU.info("Rendering survey "+e.id+" with delay of "+(null==(a=e.appearance)?void 0:a.surveyPopupDelaySeconds)+" seconds"),null==(b=this._surveyManager)||b.renderSurvey(e,f,c),eU.info("Survey "+e.id+" rendered")},1e3*e.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(e,f,c);eU.warn("Survey element not found")}else eU.warn("Surveys of type "+e.type+" cannot be rendered in the app");else eU.warn("Survey not found")}}displaySurvey(a,b){var c;if($(this._surveyManager))eU.warn("init was not called");else{var d=this.be(a);if(d){var e=d;if(null!=(c=d.appearance)&&c.surveyPopupDelaySeconds&&b.ignoreDelay&&(e=G({},d,{appearance:G({},d.appearance,{surveyPopupDelaySeconds:0})})),b.displayType!==eT.Popover&&b.initialResponses&&eU.warn("initialResponses is only supported for popover surveys. prefill will not be applied."),!1===b.ignoreConditions){var f=this.canRenderSurvey(d);if(!f.visible)return void eU.warn("Survey is not eligible to be displayed: ",f.disabledReason)}b.displayType!==eT.Inline?this._surveyManager.handlePopoverSurvey(e,b):this.renderSurvey(e,b.selector,b.properties)}else eU.warn("Survey not found")}}cancelPendingSurvey(a){$(this._surveyManager)?eU.warn("init was not called"):this._surveyManager.cancelSurvey(a)}handlePageUnload(){var a;null==(a=this._surveyManager)||a.handlePageUnload()}}var e3=bx("[Conversations]");class e4{constructor(a){this.we=void 0,this._conversationsManager=null,this.xe=!1,this.$e=null,this._instance=a}onRemoteConfig(a){if(!this._instance.config.disable_conversations){var b=a.conversations;$(b)||(ab(b)?this.we=b:(this.we=b.enabled,this.$e=b),this.loadIfEnabled())}}reset(){var a;null==(a=this._conversationsManager)||a.reset(),this._conversationsManager=null,this.we=void 0,this.$e=null}loadIfEnabled(){if(!(this._conversationsManager||this.xe||this._instance.config.disable_conversations||bM(this._instance.config)||this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())){var a=null==C?void 0:C.__PosthogExtensions__;if(a&&!W(this.we)&&this.we)if(this.$e&&this.$e.token){this.xe=!0;try{var b=a.initConversations;if(b)return this.Ee(b),void(this.xe=!1);var c=a.loadExternalDependency;if(!c)return void this.Se("PostHog loadExternalDependency extension not found.");c(this._instance,"conversations",b=>{b||!a.initConversations?this.Se("Could not load conversations script",b):this.Ee(a.initConversations),this.xe=!1})}catch(a){this.Se("Error initializing conversations",a),this.xe=!1}}else e3.error("Conversations enabled but missing token in remote config.")}}Ee(a){if(this.$e)try{this._conversationsManager=a(this.$e,this._instance),e3.info("Conversations loaded successfully")}catch(a){this.Se("Error completing conversations initialization",a)}else e3.error("Cannot complete initialization: remote config is null")}Se(a,b){e3.error(a,b),this._conversationsManager=null,this.xe=!1}show(){this._conversationsManager?this._conversationsManager.show():e3.warn("Conversations not loaded yet.")}hide(){this._conversationsManager&&this._conversationsManager.hide()}isAvailable(){return!0===this.we&&!Z(this._conversationsManager)}isVisible(){var a,b;return null!=(a=null==(b=this._conversationsManager)?void 0:b.isVisible())&&a}sendMessage(a,b,c){var d=this;return F(function*(){return d._conversationsManager?d._conversationsManager.sendMessage(a,b,c):(e3.warn("Conversations not available yet."),null)})()}getMessages(a,b){var c=this;return F(function*(){return c._conversationsManager?c._conversationsManager.getMessages(a,b):(e3.warn("Conversations not available yet."),null)})()}markAsRead(a){var b=this;return F(function*(){return b._conversationsManager?b._conversationsManager.markAsRead(a):(e3.warn("Conversations not available yet."),null)})()}getTickets(a){var b=this;return F(function*(){return b._conversationsManager?b._conversationsManager.getTickets(a):(e3.warn("Conversations not available yet."),null)})()}requestRestoreLink(a){var b=this;return F(function*(){return b._conversationsManager?b._conversationsManager.requestRestoreLink(a):(e3.warn("Conversations not available yet."),null)})()}restoreFromToken(a){var b=this;return F(function*(){return b._conversationsManager?b._conversationsManager.restoreFromToken(a):(e3.warn("Conversations not available yet."),null)})()}restoreFromUrlToken(){var a=this;return F(function*(){return a._conversationsManager?a._conversationsManager.restoreFromUrlToken():(e3.warn("Conversations not available yet."),null)})()}getCurrentTicketId(){var a,b;return null!=(a=null==(b=this._conversationsManager)?void 0:b.getCurrentTicketId())?a:null}getWidgetSessionId(){var a,b;return null!=(a=null==(b=this._conversationsManager)?void 0:b.getWidgetSessionId())?a:null}}class e5{constructor(a){var b;this.ke=!1,this.Pe=!1,this._instance=a,this._instance&&null!=(b=this._instance.config.logs)&&b.captureConsoleLogs&&(this.ke=!0)}onRemoteConfig(a){var b,c=null==(b=a.logs)?void 0:b.captureConsoleLogs;!$(c)&&c&&(this.ke=!0,this.loadIfEnabled())}reset(){}loadIfEnabled(){if(this.ke&&!this.Pe){var a=bx("[logs]"),b=null==C?void 0:C.__PosthogExtensions__;if(b){var c=b.loadExternalDependency;c?c(this._instance,"logs",c=>{var d;c||null==(d=b.logs)||!d.initializeLogs?a.error("Could not load logs script",c):(b.logs.initializeLogs(this._instance),this.Pe=!0)}):a.error("PostHog loadExternalDependency extension not found.")}else a.error("PostHog Extensions not found.")}}}var e6=bx("[RateLimiter]");class e7{constructor(a){this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=a=>{var b=a.text;if(b&&b.length)try{(JSON.parse(b).quota_limited||[]).forEach(a=>{e6.info((a||"events")+" is quota limited."),this.serverLimits[a]=(new Date).getTime()+6e4})}catch(a){return void e6.warn('could not rate limit - continuing. Error: "'+(null==a?void 0:a.message)+'"',{text:b})}},this.instance=a,this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}get captureEventsPerSecond(){var a;return(null==(a=this.instance.config.rate_limiting)?void 0:a.events_per_second)||10}get captureEventsBurstLimit(){var a;return Math.max((null==(a=this.instance.config.rate_limiting)?void 0:a.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond)}clientRateLimitContext(a){void 0===a&&(a=!1);var b,c,d,{captureEventsBurstLimit:e,captureEventsPerSecond:f}=this,g=(new Date).getTime(),h=null!=(b=null==(c=this.instance.persistence)?void 0:c.get_property(ca))?b:{tokens:e,last:g};h.tokens+=(g-h.last)/1e3*f,h.last=g,h.tokens>e&&(h.tokens=e);var i=h.tokens<1;return i||a||(h.tokens=Math.max(0,h.tokens-1)),!i||this.lastEventRateLimited||a||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+f+" events per second and "+e+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=i,null==(d=this.instance.persistence)||d.set_property(ca,h),{isRateLimited:i,remainingTokens:h.tokens}}isServerRateLimited(a){var b=this.serverLimits[a||"events"]||!1;return!1!==b&&(new Date).getTime()<b}}var e8=bx("[RemoteConfig]");class e9{constructor(a){this._instance=a}get remoteConfig(){var a;return null==(a=C._POSTHOG_REMOTE_CONFIG)||null==(a=a[this._instance.config.token])?void 0:a.config}Te(a){var b,c;null!=(b=C.__PosthogExtensions__)&&b.loadExternalDependency?null==(c=C.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"remote-config",()=>a(this.remoteConfig)):a()}Ie(a){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:b=>{a(b.json)}})}load(){try{if(this.remoteConfig)return e8.info("Using preloaded remote config",this.remoteConfig),this.Ce(this.remoteConfig),void this.Re();if(this._instance.M())return void e8.warn("Remote config is disabled. Falling back to local config.");this.Te(a=>{if(!a)return e8.info("No config found after loading remote JS config. Falling back to JSON."),void this.Ie(a=>{this.Ce(a),this.Re()});this.Ce(a),this.Re()})}catch(a){e8.error("Error loading remote config",a)}}stop(){this.Fe&&(clearInterval(this.Fe),this.Fe=void 0)}refresh(){this._instance.M()||"hidden"===(null==w?void 0:w.visibilityState)||this._instance.featureFlags.reloadFeatureFlags()}Re(){this.Fe||(this.Fe=setInterval(()=>{this.refresh()},3e5))}Ce(a){a||e8.error("Failed to fetch remote config from PostHog."),this._instance.Ce(null!=a?a:{}),!1!==(null==a?void 0:a.hasFeatureFlags)&&(this._instance.config.advanced_disable_feature_flags_on_first_load||this._instance.featureFlags.ensureFlagsLoaded())}}class fa{constructor(a,b){this.Oe=!0,this.Me=[],this.Ae=aj((null==b?void 0:b.flush_interval_ms)||3e3,250,5e3,bw.createLogger("flush interval"),3e3),this.je=a}enqueue(a){this.Me.push(a),this.De||this.Le()}unload(){this.Ne();var a=Object.values(this.Me.length>0?this.Ue():{});[...a.filter(a=>0===a.url.indexOf("/e")),...a.filter(a=>0!==a.url.indexOf("/e"))].map(a=>{this.je(G({},a,{transport:"sendBeacon"}))})}enable(){this.Oe=!1,this.Le()}Le(){var a=this;this.Oe||(this.De=setTimeout(()=>{if(this.Ne(),this.Me.length>0){var b=this.Ue();for(var c in b)!function(){var d=b[c],e=(new Date).getTime();d.data&&S(d.data)&&bC(d.data,a=>{a.offset=Math.abs(a.timestamp-e),delete a.timestamp}),a.je(d)}()}},this.Ae))}Ne(){clearTimeout(this.De),this.De=void 0}Ue(){var a={};return bC(this.Me,b=>{var c,d=(b?b.batchKey:null)||b.url;W(a[d])&&(a[d]=G({},b,{data:[]})),null==(c=a[d].data)||c.push(b.data)}),this.Me=[],a}}var fb=["retriesPerformedSoFar"];class fc{constructor(a){this.ze=!1,this.He=3e3,this.Me=[],this._instance=a,this.Me=[],this.Be=!0,!W(q)&&"onLine"in q.navigator&&(this.Be=q.navigator.onLine,this.qe=()=>{this.Be=!0,this.Lt()},this.We=()=>{this.Be=!1},bL(q,"online",this.qe),bL(q,"offline",this.We))}get length(){return this.Me.length}retriableRequest(a){var{retriesPerformedSoFar:b}=a,c=H(a,fb);aa(b)&&(c.url=eo(c.url,{retry_count:b})),this._instance._send_request(G({},c,{callback:a=>{200!==a.statusCode&&(a.statusCode<400||a.statusCode>=500)&&(null!=b?b:0)<10?this.Ge(G({retriesPerformedSoFar:b},c)):null==c.callback||c.callback(a)}}))}Ge(a){var b,c,d,e=a.retriesPerformedSoFar||0;a.retriesPerformedSoFar=e+1;var f=(d=(Math.random()-.5)*((c=Math.min(18e5,b=3e3*Math.pow(2,e)))-b/2),Math.ceil(c+d)),g=Date.now()+f;this.Me.push({retryAt:g,requestOptions:a});var h="Enqueued failed request for retry in "+f;navigator.onLine||(h+=" (Browser is offline)"),bw.warn(h),this.ze||(this.ze=!0,this.Ve())}Ve(){if(this.Je&&clearTimeout(this.Je),0===this.Me.length)return this.ze=!1,void(this.Je=void 0);this.Je=setTimeout(()=>{this.Be&&this.Me.length>0&&this.Lt(),this.Ve()},this.He)}Lt(){var a=Date.now(),b=[],c=this.Me.filter(c=>c.retryAt<a||(b.push(c),!1));if(this.Me=b,c.length>0)for(var{requestOptions:d}of c)this.retriableRequest(d)}unload(){for(var{requestOptions:a}of(this.Je&&(clearTimeout(this.Je),this.Je=void 0),this.ze=!1,W(q)||(this.qe&&(q.removeEventListener("online",this.qe),this.qe=void 0),this.We&&(q.removeEventListener("offline",this.We),this.We=void 0)),this.Me))try{this._instance._send_request(G({},a,{transport:"sendBeacon"}))}catch(a){bw.error(a)}this.Me=[]}}class fd{constructor(a){this.Ke=()=>{this.Ye||(this.Ye={});var a,b,c,d,e=this.scrollElement(),f=this.scrollY(),g=e?Math.max(0,e.scrollHeight-e.clientHeight):0,h=f+((null==e?void 0:e.clientHeight)||0),i=(null==e?void 0:e.scrollHeight)||0;this.Ye.lastScrollY=Math.ceil(f),this.Ye.maxScrollY=Math.max(f,null!=(a=this.Ye.maxScrollY)?a:0),this.Ye.maxScrollHeight=Math.max(g,null!=(b=this.Ye.maxScrollHeight)?b:0),this.Ye.lastContentY=h,this.Ye.maxContentY=Math.max(h,null!=(c=this.Ye.maxContentY)?c:0),this.Ye.maxContentHeight=Math.max(i,null!=(d=this.Ye.maxContentHeight)?d:0)},this._instance=a}getContext(){return this.Ye}resetContext(){var a=this.Ye;return setTimeout(this.Ke,0),a}startMeasuringScrollPosition(){bL(q,"scroll",this.Ke,{capture:!0}),bL(q,"scrollend",this.Ke,{capture:!0}),bL(q,"resize",this.Ke)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==q?void 0:q.document.documentElement;for(var a of S(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector]){var b=null==q?void 0:q.document.querySelector(a);if(b)return b}}scrollY(){if(this._instance.config.scroll_root_selector){var a=this.scrollElement();return a&&a.scrollTop||0}return q&&(q.scrollY||q.pageYOffset||q.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var a=this.scrollElement();return a&&a.scrollLeft||0}return q&&(q.scrollX||q.pageXOffset||q.document.documentElement.scrollLeft)||0}}var fe=a=>dH(null==a?void 0:a.config.mask_personal_data_properties,null==a?void 0:a.config.custom_personal_data_properties);class ff{constructor(a,b,c,d){this.Xe=a=>{var b=this.Qe();if(!b||b.sessionId!==a){var c={sessionId:a,props:this.Ze(this._instance)};this.tr.register({[b9]:c})}},this._instance=a,this.ir=b,this.tr=c,this.Ze=d||fe,this.ir.onSessionId(this.Xe)}Qe(){return this.tr.props[b9]}getSetOnceProps(){var a,b=null==(a=this.Qe())?void 0:a.props;return b?"r"in b?dI(b):{$referring_domain:b.referringDomain,$pathname:b.initialPathName,utm_source:b.utm_source,utm_campaign:b.utm_campaign,utm_medium:b.utm_medium,utm_content:b.utm_content,utm_term:b.utm_term}:{}}getSessionProps(){var a={};return bC(bI(this.getSetOnceProps()),(b,c)=>{"$current_url"===c&&(c="url"),a["$session_entry_"+N(c)]=b}),a}}var fg=bx("[SessionId]");class fh{on(a,b){return this.er.on(a,b)}constructor(a,b,c){if(this.rr=[],this.sr=void 0,this.er=new eZ,this.nr=(a,b)=>!(!aa(a)||!aa(b))&&Math.abs(a-b)>this.sessionTimeoutMs,!a.persistence)throw Error("SessionIdManager requires a PostHogPersistence instance");if("always"===a.config.cookieless_mode)throw Error('SessionIdManager cannot be used with cookieless_mode="always"');this.R=a.config,this.tr=a.persistence,this.ar=void 0,this.lr=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.ur=b||c_,this.hr=c||c_;var d,e=this.R.persistence_name||this.R.token,f=this.R.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*aj(f,60,36e3,fg.createLogger("session_idle_timeout_seconds"),1800),a.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.dr(),this.vr="ph_"+e+"_window_id",this.cr="ph_"+e+"_primary_window_exists",this.pr()){var g=da.W(this.vr),h=da.W(this.cr);g&&!h?this.ar=g:da.V(this.vr),da.G(this.cr,!0)}if(null!=(d=this.R.bootstrap)&&d.sessionID)try{var i=(a=>{var b=a.replace(/-/g,"");if(32!==b.length)throw Error("Not a valid UUID");if("7"!==b[12])throw Error("Not a UUIDv7");return parseInt(b.substring(0,12),16)})(this.R.bootstrap.sessionID);this._r(this.R.bootstrap.sessionID,(new Date).getTime(),i)}catch(a){fg.error("Invalid sessionID in bootstrap",a)}this.gr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(a){return W(this.rr)&&(this.rr=[]),this.rr.push(a),this.lr&&a(this.lr,this.ar),()=>{this.rr=this.rr.filter(b=>b!==a)}}pr(){return"memory"!==this.R.persistence&&!this.tr.ki&&da.H()}mr(a){a!==this.ar&&(this.ar=a,this.pr()&&da.G(this.vr,a))}br(){return this.ar?this.ar:this.pr()?da.W(this.vr):null}_r(a,b,c){a===this.lr&&b===this._sessionActivityTimestamp&&c===this._sessionStartTimestamp||(this._sessionStartTimestamp=c,this._sessionActivityTimestamp=b,this.lr=a,this.tr.register({[b$]:[b,a,c]}))}yr(){var a=this.tr.props[b$];return S(a)&&2===a.length&&a.push(a[0]),a||[0,null,0]}resetSessionId(){this._r(null,null,null)}destroy(){clearTimeout(this.wr),this.wr=void 0,this.sr&&q&&(q.removeEventListener("beforeunload",this.sr,{capture:!1}),this.sr=void 0),this.rr=[]}gr(){this.sr=()=>{this.pr()&&da.V(this.cr)},bL(q,"beforeunload",this.sr,{capture:!1})}checkAndGetSessionAndWindowId(a,b){if(void 0===a&&(a=!1),void 0===b&&(b=null),"always"===this.R.cookieless_mode)throw Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var c=b||(new Date).getTime(),[d,e,f]=this.yr(),g=this.br(),h=aa(f)&&Math.abs(c-f)>864e5,i=!1,j=!e,k=!j&&!a&&this.nr(c,d);j||k||h?(e=this.ur(),g=this.hr(),fg.info("new session ID generated",{sessionId:e,windowId:g,changeReason:{noSessionId:j,activityTimeout:k,sessionPastMaximumLength:h}}),f=c,i=!0):g||(g=this.hr(),i=!0);var l=aa(d)&&a&&!h?d:c,m=aa(f)?f:(new Date).getTime();return this.mr(g),this._r(e,l,m),a||this.dr(),i&&this.rr.forEach(a=>a(e,g,i?{noSessionId:j,activityTimeout:k,sessionPastMaximumLength:h}:void 0)),{sessionId:e,windowId:g,sessionStartTimestamp:m,changeReason:i?{noSessionId:j,activityTimeout:k,sessionPastMaximumLength:h}:void 0,lastActivityTimestamp:d}}dr(){clearTimeout(this.wr),this.wr=setTimeout(()=>{var[a]=this.yr();if(this.nr((new Date).getTime(),a)){var b=this.lr;this.resetSessionId(),this.er.emit("forcedIdleReset",{idleSessionId:b})}},1.1*this.sessionTimeoutMs)}}var fi=["$set_once","$set"],fj=bx("[SiteApps]");class fk{constructor(a){this._instance=a,this.$r=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Er(a,b){if(b){var c=this.globalsForEvent(b);this.$r.push(c),this.$r.length>1e3&&(this.$r=this.$r.slice(10))}}get siteAppLoaders(){var a;return null==(a=C._POSTHOG_REMOTE_CONFIG)||null==(a=a[this._instance.config.token])?void 0:a.siteApps}init(){if(this.isEnabled){var a=this._instance._addCaptureHook(this.Er.bind(this));this.Sr=()=>{a(),this.$r=[],this.Sr=void 0}}}globalsForEvent(a){if(!a)throw Error("Event payload is required");var b,c,d,e,f,g,h,i={},j=this._instance.get_property("$groups")||[];for(var[k,l]of Object.entries(this._instance.get_property("$stored_group_properties")||{}))i[k]={id:j[k],type:k,properties:l};var{$set_once:m,$set:n}=a;return{event:G({},H(a,fi),{properties:G({},a.properties,n?{$set:G({},null!=(b=null==(c=a.properties)?void 0:c.$set)?b:{},n)}:{},m?{$set_once:G({},null!=(d=null==(e=a.properties)?void 0:e.$set_once)?d:{},m)}:{}),elements_chain:null!=(f=null==(g=a.properties)?void 0:g.$elements_chain)?f:"",distinct_id:null==(h=a.properties)?void 0:h.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:i}}setupSiteApp(a){var b=this.apps[a.id],c=()=>{var c;!b.errored&&this.$r.length&&(fj.info("Processing "+this.$r.length+" events for site app with id "+a.id),this.$r.forEach(a=>null==b.processEvent?void 0:b.processEvent(a)),b.processedBuffer=!0),Object.values(this.apps).every(a=>a.processedBuffer||a.errored)&&(null==(c=this.Sr)||c.call(this))},d=!1,e=e=>{b.errored=!e,b.loaded=!0,fj.info("Site app with id "+a.id+" "+(e?"loaded":"errored")),d&&c()};try{var{processEvent:f}=a.init({posthog:this._instance,callback:a=>{e(a)}});f&&(b.processEvent=f),d=!0}catch(b){fj.error("Error while initializing PostHog app with config id "+a.id,b),e(!1)}if(d&&b.loaded)try{c()}catch(c){fj.error("Error while processing buffered events PostHog app with config id "+a.id,c),b.errored=!0}}kr(){var a=this.siteAppLoaders||[];for(var b of a)this.apps[b.id]={id:b.id,loaded:!1,errored:!1,processedBuffer:!1};for(var c of a)this.setupSiteApp(c)}Pr(a){if(0!==Object.keys(this.apps).length){var b=this.globalsForEvent(a);for(var c of Object.values(this.apps))try{null==c.processEvent||c.processEvent(b)}catch(b){fj.error("Error while processing event "+a.event+" for site app "+c.id,b)}}}onRemoteConfig(a){var b,c,d,e=this;if(null!=(b=this.siteAppLoaders)&&b.length)return this.isEnabled?(this.kr(),void this._instance.on("eventCaptured",a=>this.Pr(a))):void fj.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(c=this.Sr)||c.call(this),null!=(d=a.siteApps)&&d.length)if(this.isEnabled){var f=function(a){var b;C["__$$ph_site_app_"+a]=e._instance,null==(b=C.__PosthogExtensions__)||null==b.loadSiteApp||b.loadSiteApp(e._instance,h,b=>{if(b)return fj.error("Error while initializing PostHog app with config id "+a,b)})};for(var{id:g,url:h}of a.siteApps)f(g)}else fj.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var fl=function(a,b){if(!a)return!1;var c=a.userAgent;if(c&&K(c,b))return!0;try{var d=null==a?void 0:a.userAgentData;if(null!=d&&d.brands&&d.brands.some(a=>K(null==a?void 0:a.brand,b)))return!0}catch(a){}return!!a.webdriver},fm=function(a){return a.US="us",a.EU="eu",a.CUSTOM="custom",a}({}),fn="i.posthog.com";class fo{constructor(a){this.Tr={},this.instance=a}get apiHost(){var a=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===a?"https://us.i.posthog.com":a}get flagsApiHost(){var a=this.instance.config.flags_api_host;return a?a.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var a,b=null==(a=this.instance.config.ui_host)?void 0:a.replace(/\/$/,"");return b||(b=this.apiHost.replace("."+fn,".posthog.com")),"https://app.posthog.com"===b?"https://us.posthog.com":b}get region(){return this.Tr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Tr[this.apiHost]=fm.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Tr[this.apiHost]=fm.EU:this.Tr[this.apiHost]=fm.CUSTOM),this.Tr[this.apiHost]}endpointFor(a,b){if(void 0===b&&(b=""),b&&(b="/"===b[0]?b:"/"+b),"ui"===a)return this.uiHost+b;if("flags"===a)return this.flagsApiHost+b;if(this.region===fm.CUSTOM)return this.apiHost+b;var c=fn+b;switch(a){case"assets":return"https://"+this.region+"-assets."+c;case"api":return"https://"+this.region+"."+c}}}var fp={icontains:(a,b)=>!!q&&b.href.toLowerCase().indexOf(a.toLowerCase())>-1,not_icontains:(a,b)=>!!q&&-1===b.href.toLowerCase().indexOf(a.toLowerCase()),regex:(a,b)=>!!q&&es(b.href,a),not_regex:(a,b)=>!!q&&!es(b.href,a),exact:(a,b)=>b.href===a,is_not:(a,b)=>b.href!==a};class fq{constructor(a){var b=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(a){void 0===a&&(a=!1),b.getWebExperiments(a=>{fq.Ir("retrieved web experiments from the server"),b.Cr=new Map,a.forEach(a=>{if(a.feature_flag_key){b.Cr&&(fq.Ir("setting flag key ",a.feature_flag_key," to web experiment ",a),null==(c=b.Cr)||c.set(a.feature_flag_key,a));var c,d=b._instance.getFeatureFlag(a.feature_flag_key);X(d)&&a.variants[d]&&b.Rr(a.name,d,a.variants[d].transforms)}else if(a.variants)for(var e in a.variants){var f=a.variants[e];fq.Fr(f)&&b.Rr(a.name,e,f.transforms)}})},a)},this._instance=a,this._instance.onFeatureFlags(a=>{this.onFeatureFlags(a)})}onFeatureFlags(a){if(this._is_bot())fq.Ir("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if($(this.Cr))return this.Cr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();fq.Ir("applying feature flags",a),a.forEach(a=>{var b;if(this.Cr&&null!=(b=this.Cr)&&b.has(a)){var c,d=this._instance.getFeatureFlag(a),e=null==(c=this.Cr)?void 0:c.get(a);d&&null!=e&&e.variants[d]&&this.Rr(e.name,d,e.variants[d].transforms)}})}}previewWebExperiment(){var a=fq.getWindowLocation();if(null!=a&&a.search){var b=cO(null==a?void 0:a.search,"__experiment_id"),c=cO(null==a?void 0:a.search,"__experiment_variant");b&&c&&(fq.Ir("previewing web experiments "+b+" && "+c),this.getWebExperiments(a=>{this.Or(parseInt(b),c,a)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(a,b,c){if(this._instance.config.disable_web_experiments&&!c)return a([]);var d=this._instance.get_property("$web_experiments");if(d&&!b)return a(d);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:b=>200===b.statusCode&&b.json?a(b.json.experiments||[]):a([])})}Or(a,b,c){var d=c.filter(b=>b.id===a);d&&d.length>0&&(fq.Ir("Previewing web experiment ["+d[0].name+"] with variant ["+b+"]"),this.Rr(d[0].name,b,d[0].variants[b].transforms))}static Fr(a){return!$(a.conditions)&&fq.Mr(a)&&fq.Ar(a)}static Mr(a){if($(a.conditions)||$(null==(b=a.conditions)?void 0:b.url))return!0;var b,c,d,e,f=fq.getWindowLocation();return!!f&&(null==(c=a.conditions)||!c.url||fp[null!=(d=null==(e=a.conditions)?void 0:e.urlMatchType)?d:"icontains"](a.conditions.url,f))}static getWindowLocation(){return null==q?void 0:q.location}static Ar(a){if($(a.conditions)||$(null==(c=a.conditions)?void 0:c.utm))return!0;var b=dC();if(b.utm_source){var c,d,e,f,g,h,i,j,k,l=null==(d=a.conditions)||null==(d=d.utm)||!d.utm_campaign||(null==(e=a.conditions)||null==(e=e.utm)?void 0:e.utm_campaign)==b.utm_campaign,m=null==(f=a.conditions)||null==(f=f.utm)||!f.utm_source||(null==(g=a.conditions)||null==(g=g.utm)?void 0:g.utm_source)==b.utm_source,n=null==(h=a.conditions)||null==(h=h.utm)||!h.utm_medium||(null==(i=a.conditions)||null==(i=i.utm)?void 0:i.utm_medium)==b.utm_medium,o=null==(j=a.conditions)||null==(j=j.utm)||!j.utm_term||(null==(k=a.conditions)||null==(k=k.utm)?void 0:k.utm_term)==b.utm_term;return l&&n&&o&&m}return!1}static Ir(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];bw.info("[WebExperiments] "+a,c)}Rr(a,b,c){this._is_bot()?fq.Ir("Refusing to render web experiment since the viewer is a likely bot"):"control"!==b?c.forEach(c=>{if(c.selector){fq.Ir("applying transform of variant "+b+" for experiment "+a+" ",c);var d,e=null==(d=document)?void 0:d.querySelectorAll(c.selector);null==e||e.forEach(a=>{c.html&&(a.innerHTML=c.html),c.css&&a.setAttribute("style",c.css)})}}):fq.Ir("Control variants leave the page unmodified.")}_is_bot(){return v&&this._instance?fl(v,this._instance.config.custom_blocked_useragents):void 0}}var fr=bx("[PostHog ExternalIntegrations]"),fs={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class ft{constructor(a){this._instance=a}it(a,b){var c;null==(c=C.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,a,a=>{if(a)return fr.error("failed to load script",a);b()})}startIfEnabledOrStop(){var a,b=this,c=function(a){var c,d,f;!e||null!=(c=C.__PosthogExtensions__)&&null!=(c=c.integrations)&&c[a]||b.it(fs[a],()=>{var c;null==(c=C.__PosthogExtensions__)||null==(c=c.integrations)||null==(c=c[a])||c.start(b._instance)}),!e&&null!=(d=C.__PosthogExtensions__)&&null!=(d=d.integrations)&&d[a]&&(null==(f=C.__PosthogExtensions__)||null==(f=f.integrations)||null==(f=f[a])||f.stop())};for(var[d,e]of Object.entries(null!=(a=this._instance.config.integrations)?a:{}))c(d)}}bx("[SessionRecording]");var fu="[SessionRecording]",fv=bx(fu);class fw{get started(){var a;return!(null==(a=this.jr)||!a.isStarted)}get status(){return this.jr?this.jr.status:this.Dr&&!this.Lr?"disabled":"lazy_loading"}constructor(a){if(this._forceAllowLocalhostNetworkCapture=!1,this.Dr=!1,this.Nr=!1,this.Ur=void 0,this._instance=a,!this._instance.sessionManager)throw fv.error("started without valid sessionManager"),Error(fu+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw Error(fu+' cannot be used with cookieless_mode="always"')}get Lr(){var a,b=!(null==(a=this._instance.get_property(bZ))||!a.enabled),c=!this._instance.config.disable_session_recording,d=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return q&&b&&c&&!d}startIfEnabledOrStop(a){var b;if(!this.Lr||null==(b=this.jr)||!b.isStarted){var c=!W(Object.assign)&&!W(Array.from);this.Lr&&c?(this.zr(a),fv.info("starting")):this.stopRecording()}}zr(a){var b,c,d;this.Lr&&(null!=C&&null!=(b=C.__PosthogExtensions__)&&null!=(b=b.rrweb)&&b.record&&null!=(c=C.__PosthogExtensions__)&&c.initSessionRecording?this.Hr(a):null==(d=C.__PosthogExtensions__)||null==d.loadExternalDependency||d.loadExternalDependency(this._instance,this.Br,b=>{if(b)return fv.error("could not load recorder",b);this.Hr(a)}))}stopRecording(){var a,b;null==(a=this.Ur)||a.call(this),this.Ur=void 0,null==(b=this.jr)||b.stop()}qr(){var a;null==(a=this._instance.persistence)||a.unregister(b_)}Wr(a){if(this._instance.persistence){var b,c,d=this._instance.persistence,e=()=>{var b=!1===a.sessionRecording?void 0:a.sessionRecording,c=null==b?void 0:b.sampleRate,e=$(c)?null:parseFloat(c);$(e)&&this.qr();var f=null==b?void 0:b.minimumDurationMilliseconds;d.register({[bZ]:G({cache_timestamp:Date.now(),enabled:!!b},b,{networkPayloadCapture:G({capturePerformance:a.capturePerformance},null==b?void 0:b.networkPayloadCapture),canvasRecording:{enabled:null==b?void 0:b.recordCanvas,fps:null==b?void 0:b.canvasFps,quality:null==b?void 0:b.canvasQuality},sampleRate:e,minimumDurationMilliseconds:W(f)?null:f,endpoint:null==b?void 0:b.endpoint,triggerMatchType:null==b?void 0:b.triggerMatchType,masking:null==b?void 0:b.masking,urlTriggers:null==b?void 0:b.urlTriggers})})};e(),null==(b=this.Ur)||b.call(this),this.Ur=null==(c=this._instance.sessionManager)?void 0:c.onSessionId(e)}}onRemoteConfig(a){"sessionRecording"in a?!1!==a.sessionRecording?(this.Nr=!1,this.Wr(a),this.Dr=!0,this.startIfEnabledOrStop()):this.Dr=!0:fv.info("skipping remote config with no sessionRecording",a)}log(a,b){var c;void 0===b&&(b="log"),null!=(c=this.jr)&&c.log?this.jr.log(a,b):fv.warn("log called before recorder was ready")}get Br(){var a,b,c=null==(a=this._instance)||null==(a=a.persistence)?void 0:a.get_property(bZ);return(null==c||null==(b=c.scriptConfig)?void 0:b.script)||"lazy-recorder"}Gr(){var a,b=this._instance.get_property(bZ);if(!b)return!1;var c=null!=(a=("object"==typeof b?b:JSON.parse(b)).cache_timestamp)?a:Date.now();return Date.now()-c<=3e5}Hr(a){var b,c;if(null==(b=C.__PosthogExtensions__)||!b.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.jr||(this.jr=null==(c=C.__PosthogExtensions__)?void 0:c.initSessionRecording(this._instance),this.jr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.Gr()?this.jr.start(a):this.Nr||(this.Nr=!0,fv.info("persisted remote config is stale, requesting fresh config before starting"),new e9(this._instance).load())}onRRwebEmit(a){var b;null==(b=this.jr)||null==b.onRRwebEmit||b.onRRwebEmit(a)}overrideLinkedFlag(){var a,b;this.jr||null==(b=this._instance.persistence)||b.register({$replay_override_linked_flag:!0}),null==(a=this.jr)||a.overrideLinkedFlag()}overrideSampling(){var a,b;this.jr||null==(b=this._instance.persistence)||b.register({$replay_override_sampling:!0}),null==(a=this.jr)||a.overrideSampling()}overrideTrigger(a){var b,c;this.jr||null==(c=this._instance.persistence)||c.register({["url"===a?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),null==(b=this.jr)||b.overrideTrigger(a)}get sdkDebugProperties(){var a;return(null==(a=this.jr)?void 0:a.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(a,b){var c;return!(null==(c=this.jr)||!c.tryAddCustomEvent(a,b))}}var fx={},fy=0,fz=()=>{},fA="posthog",fB=!em&&-1===(null==B?void 0:B.indexOf("MSIE"))&&-1===(null==B?void 0:B.indexOf("Mozilla")),fC=a=>{var b;return G({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:function(a){var b=null==a?void 0:a.hostname;if(!X(b))return!1;var c=b.split(".").slice(-2).join(".");for(var d of bJ)if(c===d)return!1;return!0}(null==w?void 0:w.location),persistence:"localStorage+cookie",persistence_name:"",cookie_persisted_properties:[],loaded:fz,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:null!=a?a:"unset",__preview_deferred_init_extensions:!1,debug:x&&X(null==x?void 0:x.search)&&-1!==x.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_conversations:!1,disable_product_tours:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==q||null==(b=q.location)?void 0:b.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:a=>{var b="Bad HTTP status: "+a.statusCode+" "+a.text;bw.error(b)},get_device_id:a=>a,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:3e3},error_tracking:{},_onCapture:fz,__preview_eager_load_replay:!1},(a=>({rageclick:!(a&&a>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(a&&a>="2025-05-24")||"history_change",session_recording:a&&a>="2025-11-30"?{strictMinimumDuration:!0}:{},external_scripts_inject_target:a&&a>="2026-01-30"?"head":"body",internal_or_test_user_hostname:a&&a>="2026-01-30"?/^(localhost|127\.0\.0\.1)$/:void 0}))(a))},fD=a=>{var b={};W(a.process_person)||(b.person_profiles=a.process_person),W(a.xhr_headers)||(b.request_headers=a.xhr_headers),W(a.cookie_name)||(b.persistence_name=a.cookie_name),W(a.disable_cookie)||(b.disable_persistence=a.disable_cookie),W(a.store_google)||(b.save_campaign_params=a.store_google),W(a.verbose)||(b.debug=a.verbose);var c=bD({},b,a);return S(a.property_blacklist)&&(W(a.property_denylist)?c.property_denylist=a.property_blacklist:S(a.property_denylist)?c.property_denylist=[...a.property_blacklist,...a.property_denylist]:bw.error("Invalid value for property_denylist config: "+a.property_denylist)),c};class fE{constructor(){this.__forceAllowLocalhost=!1}get Vr(){return this.__forceAllowLocalhost}set Vr(a){bw.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=a}}class fF{get decideEndpointWasHit(){var a,b;return null!=(a=null==(b=this.featureFlags)?void 0:b.hasLoadedFlags)&&a}get flagsEndpointWasHit(){var a,b;return null!=(a=null==(b=this.featureFlags)?void 0:b.hasLoadedFlags)&&a}constructor(){this.webPerformance=new fE,this.Jr=!1,this.version=D.LIB_VERSION,this.mi=new eZ,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=fC(),this.SentryIntegration=dp,this.sentryIntegration=a=>(function(a,b){var c=dn(a,b);return{name:dm,processEvent:a=>c(a)}})(this,a),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Kr=!1,this.Yr=null,this.Xr=null,this.Qr=null,this.featureFlags=new eJ(this),this.toolbar=new du(this),this.scrollManager=new fd(this),this.pageViewManager=new dP(this),this.surveys=new e2(this),this.conversations=new e4(this),this.logs=new e5(this),this.experiments=new fq(this),this.exceptions=new ey(this),this.rateLimiter=new e7(this),this.requestRouter=new fo(this),this.consent=new dc(this),this.externalIntegrations=new ft(this),this.people={set:(a,b,c)=>{var d=X(a)?{[a]:b}:a;this.setPersonProperties(d),null==c||c({})},set_once:(a,b,c)=>{var d=X(a)?{[a]:b}:a;this.setPersonProperties(void 0,d),null==c||c({})}},this.on("eventCaptured",a=>bw.info('send "'+(null==a?void 0:a.event)+'"',a))}init(a,b,c){if(c&&c!==fA){var d,e=null!=(d=fx[c])?d:new fF;return e._init(a,b,c),fx[c]=e,fx[fA][c]=e,e}return this._init(a,b,c)}_init(a,b,c){if(void 0===b&&(b={}),W(a)||Y(a))return bw.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},b.debug=this.Zr(b.debug),this.ts=b,this.es=[],b.person_profiles?this.Xr=b.person_profiles:b.process_person&&(this.Xr=b.process_person),this.set_config(bD({},fC(b.defaults),fD(b),{name:c,token:a})),this.config.on_xhr_error&&bw.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=b.disable_compression?void 0:dQ.GZipJS;var d=this.rs();this.persistence=new eL(this.config,d),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new eL(G({},this.config,{persistence:"sessionStorage"}),d);var e=G({},this.persistence.props),f=G({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this.ss=new fa(a=>this.ns(a),this.config.request_queue_config),this.os=new fc(this),this.__request_queue=[];var g="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(g||(this.sessionManager=new fh(this),this.sessionPropsManager=new ff(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(bw.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.ls(g)},0)):(bw.info("Initializing extensions synchronously"),this.ls(g)),D.DEBUG=D.DEBUG||this.config.debug,D.DEBUG&&bw.info("Starting in debug mode",{this:this,config:b,thisC:G({},this.config),p:e,s:f}),void 0!==(null==(h=b.bootstrap)?void 0:h.distinctID)){var h,i,j,k=this.config.get_device_id(c_()),l=null!=(i=b.bootstrap)&&i.isIdentifiedID?k:b.bootstrap.distinctID;this.persistence.set_property(b8,null!=(j=b.bootstrap)&&j.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:b.bootstrap.distinctID,$device_id:l})}if(this.us()){var m,n,o=Object.keys((null==(m=b.bootstrap)?void 0:m.featureFlags)||{}).filter(a=>{var c;return!(null==(c=b.bootstrap)||null==(c=c.featureFlags)||!c[a])}).reduce((a,c)=>{var d;return a[c]=(null==(d=b.bootstrap)||null==(d=d.featureFlags)?void 0:d[c])||!1,a},{}),p=Object.keys((null==(n=b.bootstrap)?void 0:n.featureFlagPayloads)||{}).filter(a=>o[a]).reduce((a,c)=>{var d,e;return null!=(d=b.bootstrap)&&null!=(d=d.featureFlagPayloads)&&d[c]&&(a[c]=null==(e=b.bootstrap)||null==(e=e.featureFlagPayloads)?void 0:e[c]),a},{});this.featureFlags.receivedFeatureFlags({featureFlags:o,featureFlagPayloads:p})}if(g)this.register_once({distinct_id:cg,$device_id:null},"");else if(!this.get_distinct_id()){var r=this.config.get_device_id(c_());this.register_once({distinct_id:r,$device_id:r},""),this.persistence.set_property(b8,"anonymous")}return bL(q,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),b.segment?function(a,b){var c=a.config.segment;if(!c)return b();!function(a,b){var c=a.config.segment;if(!c)return b();var d=c=>{var d=()=>c.anonymousId()||c_();a.config.get_device_id=d,c.id()&&(a.register({distinct_id:c.id(),$device_id:d()}),a.persistence.set_property(b8,"identified")),b()},e=c.user();"then"in e&&T(e.then)?e.then(d):d(e)}(a,()=>{var d;c.register((Promise&&Promise.resolve||dl.warn("This browser does not have Promise support, and can not use the segment integration"),d=(b,c)=>{if(!c)return b;b.event.userId||b.event.anonymousId===a.get_distinct_id()||(dl.info("No userId set, resetting PostHog"),a.reset()),b.event.userId&&b.event.userId!==a.get_distinct_id()&&(dl.info("UserId set, identifying with PostHog"),a.identify(b.event.userId));var d=a.calculateEventProperties(c,b.event.properties);return b.event.properties=Object.assign({},d,b.event.properties),b},{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:a=>d(a,a.event.event),page:a=>d(a,"$pageview"),identify:a=>d(a,"$identify"),screen:a=>d(a,"$screen")})).then(()=>{b()})})}(this,()=>this.hs()):this.hs(),T(this.config._onCapture)&&this.config._onCapture!==fz&&(bw.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",a=>this.config._onCapture(a.event,a))),this.config.ip&&bw.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}ls(a){var b=performance.now();this.historyAutocapture=new dk(this),this.historyAutocapture.startIfEnabled();var c=[];c.push(()=>{new dw(this).startIfEnabledOrStop()}),c.push(()=>{var a;this.siteApps=new fk(this),null==(a=this.siteApps)||a.init()}),a||c.push(()=>{this.sessionRecording=new fw(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||c.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),c.push(()=>{this.autocapture=new cU(this),this.autocapture.startIfEnabled()}),c.push(()=>{this.surveys.loadIfEnabled()}),c.push(()=>{this.logs.loadIfEnabled()}),c.push(()=>{this.conversations.loadIfEnabled()}),c.push(()=>{this.productTours=new eO(this),this.productTours.loadIfEnabled()}),c.push(()=>{this.heatmaps=new dO(this),this.heatmaps.startIfEnabled()}),c.push(()=>{this.webVitalsAutocapture=new dL(this)}),c.push(()=>{this.exceptionObserver=new di(this),this.exceptionObserver.startIfEnabledOrStop()}),c.push(()=>{this.deadClicksAutocapture=new dg(this,df),this.deadClicksAutocapture.startIfEnabledOrStop()}),c.push(()=>{if(this.ds){var a=this.ds;this.ds=void 0,this.Ce(a)}}),this.vs(c,b)}vs(a,b){for(;a.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-b>=30&&a.length>0)return void setTimeout(()=>{this.vs(a,b)},0);var c=a.shift();if(c)try{c()}catch(a){bw.error("Error initializing extension:",a)}}var d=Math.round(performance.now()-b);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:d}),this.config.__preview_deferred_init_extensions&&bw.info("PostHog extensions initialized ("+d+"ms)")}Ce(a){var b,c,d,e,f,g,h,i,j;if(!w||!w.body)return bw.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ce(a)},500);this.config.__preview_deferred_init_extensions&&(this.ds=a),this.compression=void 0,a.supportedCompression&&!this.config.disable_compression&&(this.compression=L(a.supportedCompression,dQ.GZipJS)?dQ.GZipJS:L(a.supportedCompression,dQ.Base64)?dQ.Base64:void 0),null!=(b=a.analytics)&&b.endpoint&&(this.analyticsDefaultEndpoint=a.analytics.endpoint),this.set_config({person_profiles:this.Xr?this.Xr:"identified_only"}),null==(c=this.siteApps)||c.onRemoteConfig(a),null==(d=this.sessionRecording)||d.onRemoteConfig(a),null==(e=this.autocapture)||e.onRemoteConfig(a),null==(f=this.heatmaps)||f.onRemoteConfig(a),this.surveys.onRemoteConfig(a),this.logs.onRemoteConfig(a),this.conversations.onRemoteConfig(a),null==(g=this.productTours)||g.onRemoteConfig(a),null==(h=this.webVitalsAutocapture)||h.onRemoteConfig(a),null==(i=this.exceptionObserver)||i.onRemoteConfig(a),this.exceptions.onRemoteConfig(a),null==(j=this.deadClicksAutocapture)||j.onRemoteConfig(a)}hs(){try{this.config.loaded(this)}catch(a){bw.critical("`loaded` function failed",a)}if(this.cs(),this.config.internal_or_test_user_hostname&&null!=x&&x.hostname){var a=x.hostname,b=this.config.internal_or_test_user_hostname;("string"==typeof b?a===b:b.test(a))&&this.setInternalOrTestUser()}this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||"always"===this.config.cookieless_mode)&&this.fs()},1),this.ps=new e9(this),this.ps.load()}cs(){var a;this.is_capturing()&&this.config.request_batching&&(null==(a=this.ss)||a.enable())}_dom_loaded(){this.is_capturing()&&bB(this.__request_queue,a=>this.ns(a)),this.__request_queue=[],this.cs()}_handle_unload(){var a,b;this.surveys.handlePageUnload(),this.config.request_batching?(this._s()&&this.capture("$pageleave"),null==(a=this.ss)||a.unload(),null==(b=this.os)||b.unload()):this._s()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(a){this.__loaded&&(fB?this.__request_queue.push(a):this.rateLimiter.isServerRateLimited(a.batchKey)||(a.transport=a.transport||this.config.api_transport,a.url=eo(a.url,{ip:+!!this.config.ip}),a.headers=G({},this.config.request_headers,a.headers),a.compression="best-available"===a.compression?this.compression:a.compression,a.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(a.disableTransport=["sendBeacon"]),a.fetchOptions=a.fetchOptions||this.config.fetch_options,(a=>{var b,c,d,e=G({},a);e.timeout=e.timeout||6e4,e.url=eo(e.url,{_:(new Date).getTime().toString(),ver:D.LIB_VERSION,compression:e.compression});var f=null!=(b=e.transport)?b:"fetch",g=er.filter(a=>!e.disableTransport||!a.transport||!e.disableTransport.includes(a.transport)),h=null!=(c=null==(d=bK(g,a=>a.transport===f))?void 0:d.method)?c:g[0].method;if(!h)throw Error("No available transport method");h(e)})(G({},a,{callback:b=>{var c,d;this.rateLimiter.checkForLimiting(b),b.statusCode>=400&&(null==(c=(d=this.config).on_request_error)||c.call(d,b)),null==a.callback||a.callback(b)}}))))}ns(a){this.os?this.os.retriableRequest(a):this._send_request(a)}_execute_array(a){fy++;try{var b,c=[],d=[],e=[];bB(a,a=>{a&&(b=a[0],S(b)?e.push(a):T(a)?a.call(this):S(a)&&"alias"===b?c.push(a):S(a)&&-1!==b.indexOf("capture")&&T(this[b])?e.push(a):d.push(a))});var f=function(a,b){bB(a,function(a){if(S(a[0])){var c=b;bC(a,function(a){c=c[a[0]].apply(c,a.slice(1))})}else this[a[0]].apply(this,a.slice(1))},b)};f(c,this),f(d,this),f(e,this)}finally{fy--}}us(){var a,b;return(null==(a=this.config.bootstrap)?void 0:a.featureFlags)&&Object.keys(null==(b=this.config.bootstrap)?void 0:b.featureFlags).length>0||!1}push(a){if(fy>0&&S(a)&&X(a[0])){var b=fF.prototype[a[0]];T(b)&&b.apply(this,a.slice(1))}else this._execute_array([a])}capture(a,b,c){var d;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.ss){if(this.is_capturing())if(!W(a)&&X(a)){var e=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(e&&!this.config.__preview_capture_bot_pageviews)){var f=null!=c&&c.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==f||!f.isRateLimited){null!=b&&b.$current_url&&!X(null==b?void 0:b.$current_url)&&(bw.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==b||delete b.$current_url),"$exception"!==a||null!=c&&c.oi||bw.warn("Using `posthog.capture('$exception')` is unreliable because it does not attach required metadata. Use `posthog.captureException(error)` instead, which attaches required metadata automatically."),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var g=new Date,h=(null==c?void 0:c.timestamp)||g,i=c_(),j={uuid:i,event:a,properties:this.calculateEventProperties(a,b||{},h,i)};"$pageview"===a&&this.config.__preview_capture_bot_pageviews&&e&&(j.event="$bot_pageview",j.properties.$browser_type="bot"),f&&(j.properties.$lib_rate_limit_remaining_tokens=f.remainingTokens),(null==c?void 0:c.$set)&&(j.$set=null==c?void 0:c.$set);var k,l="$groupidentify"!==a,m=this.gs(null==c?void 0:c.$set_once,l);if(m&&(j.$set_once=m),(n=j,o=null!=c&&c._noTruncate?null:this.config.properties_string_max_length,p=a=>X(a)&&!Z(o)?a.slice(0,o):a,q=new Set,j=function a(b,c){var d;return b!==Object(b)?p?p(b,c):b:q.has(b)?void 0:(q.add(b),S(b)?(d=[],bB(b,b=>{d.push(a(b))})):(d={},bC(b,(b,c)=>{q.has(b)||(d[c]=a(b,c))})),d)}(n)).timestamp=h,W(null==c?void 0:c.timestamp)||(j.properties.$event_time_override_provided=!0,j.properties.$event_time_override_system_time=g),a===eR.DISMISSED||a===eR.SENT){var n,o,p,q,r,s,t,u=null==b?void 0:b[eS.SURVEY_ID],v=null==b?void 0:b[eS.SURVEY_ITERATION];k={id:u,current_iteration:v},localStorage.getItem(eW(k))||localStorage.setItem(eW(k),"true"),j.$set=G({},j.$set,{[(r={id:u,current_iteration:v},t="$survey_"+(s=a===eR.SENT?"responded":"dismissed")+"/"+r.id,r.current_iteration&&r.current_iteration>0&&(t="$survey_"+s+"/"+r.id+"/"+r.current_iteration),t)]:!0})}else a===eR.SHOWN&&(j.$set=G({},j.$set,{[eS.SURVEY_LAST_SEEN_DATE]:(new Date).toISOString()}));var w=G({},j.properties.$set,j.$set);if(V(w)||this.setPersonPropertiesForFlags(w),!$(this.config.before_send)){var x=this.bs(j);if(!x)return;j=x}this.mi.emit("eventCaptured",j);var y={method:"POST",url:null!=(d=null==c?void 0:c._url)?d:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:j,compression:"best-available",batchKey:null==c?void 0:c._batchKey};return!this.config.request_batching||c&&(null==c||!c._batchKey)||null!=c&&c.send_instantly?this.ns(y):this.ss.enqueue(y),j}bw.critical("This capture call is ignored due to client rate limiting.")}}else bw.error("No event name provided to posthog.capture")}else bw.uninitializedWarning("posthog.capture")}_addCaptureHook(a){return this.on("eventCaptured",b=>a(b.event,b))}calculateEventProperties(a,b,c,d,e){if(c=c||new Date,!this.persistence||!this.sessionPersistence)return b;var f,g=e?void 0:this.persistence.remove_event_timer(a),h=G({},b);if(h.token=this.config.token,h.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(h.$cookieless_mode=!0),"$snapshot"===a){var i=G({},this.persistence.properties(),this.sessionPersistence.properties());return h.distinct_id=i.distinct_id,(!X(h.distinct_id)&&!_(h.distinct_id)||Y(h.distinct_id))&&bw.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),h}var j,k=function(a,b){if(!B)return{};var c,d,e=a?bE([],dy,b||[]):[],[f,g]=function(a){for(var b=0;b<a6.length;b++){var[c,d]=a6[b],e=c.exec(a),f=e&&(T(d)?d(e,a):d);if(f)return f}return["",""]}(B);return bD(bI({$os:f,$os_version:g,$browser:a3(B,navigator.vendor),$device:a7(B),$device_type:(d=a7(B))===as||d===ar||"Kobo"===d||"Kindle Fire"===d||d===aW?aq:d===aL||d===aN||d===aM||d===aT?"Console":d===au?"Wearable":d?ao:"Desktop",$timezone:dJ(),$timezone_offset:function(){try{return(new Date).getTimezoneOffset()}catch(a){return}}()}),{$current_url:cP(null==x?void 0:x.href,e,dA),$host:null==x?void 0:x.host,$pathname:null==x?void 0:x.pathname,$raw_user_agent:B.length>1e3?B.substring(0,997)+"...":B,$browser_version:a5(B,navigator.vendor),$browser_language:dF(),$browser_language_prefix:"string"==typeof(c=dF())?c.split("-")[0]:void 0,$screen_height:null==q?void 0:q.screen.height,$screen_width:null==q?void 0:q.screen.width,$viewport_height:null==q?void 0:q.innerHeight,$viewport_width:null==q?void 0:q.innerWidth,$lib:"web",$lib_version:D.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:l,windowId:m}=this.sessionManager.checkAndGetSessionAndWindowId(e,c.getTime());h.$session_id=l,h.$window_id=m}this.sessionPropsManager&&bD(h,this.sessionPropsManager.getSessionProps());try{this.sessionRecording&&bD(h,this.sessionRecording.sdkDebugProperties),h.$sdk_debug_retry_queue_size=null==(f=this.os)?void 0:f.length}catch(a){h.$sdk_debug_error_capturing_properties=String(a)}if(this.requestRouter.region===fm.CUSTOM&&(h.$lib_custom_api_host=this.config.api_host),j="$pageview"!==a||e?"$pageleave"!==a||e?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(c):this.pageViewManager.doPageView(c,d),h=bD(h,j),"$pageview"===a&&w&&(h.title=w.title),!W(g)){var n=c.getTime()-g;h.$duration=parseFloat((n/1e3).toFixed(3))}B&&this.config.opt_out_useragent_filter&&(h.$browser_type=this._is_bot()?"bot":"browser"),(h=bD({},k,this.persistence.properties(),this.sessionPersistence.properties(),h)).$is_identified=this._isIdentified(),S(this.config.property_denylist)?bC(this.config.property_denylist,function(a){delete h[a]}):bw.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var o=this.config.sanitize_properties;o&&(bw.error("sanitize_properties is deprecated. Use before_send instead"),h=o(h,a));var p=this.ys();return h.$process_person_profile=p,p&&!e&&this.ws("_calculate_event_properties"),h}gs(a,b){if(void 0===b&&(b=!0),!this.persistence||!this.ys()||this.Jr)return a;var c,d=bD({},this.persistence.get_initial_props(),(null==(c=this.sessionPropsManager)?void 0:c.getSetOnceProps())||{},a||{}),e=this.config.sanitize_properties;return e&&(bw.error("sanitize_properties is deprecated. Use before_send instead"),d=e(d,"$set_once")),b&&(this.Jr=!0),V(d)?void 0:d}register(a,b){var c;null==(c=this.persistence)||c.register(a,b)}register_once(a,b,c){var d;null==(d=this.persistence)||d.register_once(a,b,c)}register_for_session(a){var b;null==(b=this.sessionPersistence)||b.register(a)}unregister(a){var b;null==(b=this.persistence)||b.unregister(a)}unregister_for_session(a){var b;null==(b=this.sessionPersistence)||b.unregister(a)}xs(a,b){this.register({[a]:b})}getFeatureFlag(a,b){return this.featureFlags.getFeatureFlag(a,b)}getFeatureFlagPayload(a){return this.featureFlags.getFeatureFlagPayload(a)}getFeatureFlagResult(a,b){return this.featureFlags.getFeatureFlagResult(a,b)}isFeatureEnabled(a,b){return this.featureFlags.isFeatureEnabled(a,b)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateFlags(a,b,c){var d=null!=c&&c.merge?this.featureFlags.getFlagVariants():{},e=null!=c&&c.merge?this.featureFlags.getFlagPayloads():{},f=G({},d,a),g=G({},e,b),h={};for(var[i,j]of Object.entries(f)){var k="string"==typeof j;h[i]={key:i,enabled:!!k||!!j,variant:k?j:void 0,reason:void 0,metadata:W(null==g?void 0:g[i])?void 0:{id:0,version:void 0,description:void 0,payload:g[i]}}}this.featureFlags.receivedFeatureFlags({flags:h})}updateEarlyAccessFeatureEnrollment(a,b,c){this.featureFlags.updateEarlyAccessFeatureEnrollment(a,b,c)}getEarlyAccessFeatures(a,b,c){return void 0===b&&(b=!1),this.featureFlags.getEarlyAccessFeatures(a,b,c)}on(a,b){return this.mi.on(a,b)}onFeatureFlags(a){return this.featureFlags.onFeatureFlags(a)}onSurveysLoaded(a){return this.surveys.onSurveysLoaded(a)}onSessionId(a){var b,c;return null!=(b=null==(c=this.sessionManager)?void 0:c.onSessionId(a))?b:()=>{}}getSurveys(a,b){void 0===b&&(b=!1),this.surveys.getSurveys(a,b)}getActiveMatchingSurveys(a,b){void 0===b&&(b=!1),this.surveys.getActiveMatchingSurveys(a,b)}renderSurvey(a,b){this.surveys.renderSurvey(a,b)}displaySurvey(a,b){void 0===b&&(b=eY),this.surveys.displaySurvey(a,b)}cancelPendingSurvey(a){this.surveys.cancelPendingSurvey(a)}canRenderSurvey(a){return this.surveys.canRenderSurvey(a)}canRenderSurveyAsync(a,b){return void 0===b&&(b=!1),this.surveys.canRenderSurveyAsync(a,b)}identify(a,b,c){if(!this.__loaded||!this.persistence)return bw.uninitializedWarning("posthog.identify");if(_(a)&&(a=a.toString(),bw.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),a)if(["distinct_id","distinctid"].includes(a.toLowerCase()))bw.critical('The string "'+a+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(a!==cg){if(this.ws("posthog.identify")){var d=this.get_distinct_id();this.register({$user_id:a}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:d},""),a!==d&&a!==this.get_property(bO)&&(this.unregister(bO),this.register({distinct_id:a}));var e="anonymous"===(this.persistence.get_property(b8)||"anonymous");a!==d&&e?(this.persistence.set_property(b8,"identified"),this.setPersonPropertiesForFlags(G({},c||{},b||{}),!1),this.capture("$identify",{distinct_id:a,$anon_distinct_id:d},{$set:b||{},$set_once:c||{}}),this.Qr=et(a,b,c),this.featureFlags.setAnonymousDistinctId(d)):(b||c)&&this.setPersonProperties(b,c),a!==d&&(this.reloadFeatureFlags(),this.unregister(b6))}}else bw.critical('The string "'+cg+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else bw.error("Unique user id has not been set in posthog.identify")}setPersonProperties(a,b){if((a||b)&&this.ws("posthog.setPersonProperties")){var c=et(this.get_distinct_id(),a,b);this.Qr!==c?(this.setPersonPropertiesForFlags(G({},b||{},a||{})),this.capture("$set",{$set:a||{},$set_once:b||{}}),this.Qr=c):bw.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(a,b,c){if(a&&b){var d=this.getGroups();d[a]!==b&&this.resetGroupPropertiesForFlags(a),this.register({$groups:G({},d,{[a]:b})}),c&&(this.capture("$groupidentify",{$group_type:a,$group_key:b,$group_set:c}),this.setGroupPropertiesForFlags({[a]:c})),d[a]===b||c||this.reloadFeatureFlags()}else bw.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(a,b){void 0===b&&(b=!0),this.featureFlags.setPersonPropertiesForFlags(a,b)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(a,b){void 0===b&&(b=!0),this.ws("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(a,b)}resetGroupPropertiesForFlags(a){this.featureFlags.resetGroupPropertiesForFlags(a)}reset(a){if(bw.info("reset"),!this.__loaded)return bw.uninitializedWarning("posthog.reset");var b,c,d,e,f,g=this.get_property("$device_id");if(this.consent.reset(),null==(b=this.persistence)||b.clear(),null==(c=this.sessionPersistence)||c.clear(),this.surveys.reset(),null==(d=this.ps)||d.stop(),this.featureFlags.reset(),null==(e=this.persistence)||e.set_property(b8,"anonymous"),null==(f=this.sessionManager)||f.resetSessionId(),this.Qr=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:cg,$device_id:null},"");else{var h=this.config.get_device_id(c_());this.register_once({distinct_id:h,$device_id:a?h:g},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var a,b;return null!=(a=null==(b=this.sessionManager)?void 0:b.checkAndGetSessionAndWindowId(!0).sessionId)?a:""}get_session_replay_url(a){if(!this.sessionManager)return"";var{sessionId:b,sessionStartTimestamp:c}=this.sessionManager.checkAndGetSessionAndWindowId(!0),d=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+b);if(null!=a&&a.withTimestamp&&c){var e,f=null!=(e=a.timestampLookBack)?e:10;if(!c)return d;d+="?t="+Math.max(Math.floor(((new Date).getTime()-c)/1e3)-f,0)}return d}alias(a,b){return a===this.get_property(bN)?(bw.critical("Attempting to create alias for existing People user - aborting."),-2):this.ws("posthog.alias")?(W(b)&&(b=this.get_distinct_id()),a!==b?(this.xs(bO,a),this.capture("$create_alias",{alias:a,distinct_id:b})):(bw.warn("alias matches current distinct_id - skipping api call."),this.identify(a),-1)):void 0}set_config(a){var b=G({},this.config);if(U(a)){bD(this.config,fD(a));var c,d,e,f,g,h,i,j,k=this.rs();null==(c=this.persistence)||c.update_config(this.config,b,k),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new eL(G({},this.config,{persistence:"sessionStorage"}),k);var l=this.Zr(this.config.debug);ab(l)&&(this.config.debug=l),ab(this.config.debug)&&(this.config.debug?(D.DEBUG=!0,c5.H()&&c5.G("ph_debug","true"),bw.info("set_config",{config:a,oldConfig:b,newConfig:G({},this.config)})):(D.DEBUG=!1,c5.H()&&c5.V("ph_debug"))),null==(d=this.exceptionObserver)||d.onConfigChange(),null==(e=this.sessionRecording)||e.startIfEnabledOrStop(),null==(f=this.autocapture)||f.startIfEnabled(),null==(g=this.heatmaps)||g.startIfEnabled(),null==(h=this.exceptionObserver)||h.startIfEnabledOrStop(),null==(i=this.deadClicksAutocapture)||i.startIfEnabledOrStop(),this.surveys.loadIfEnabled(),this.$s(),null==(j=this.externalIntegrations)||j.startIfEnabledOrStop()}}startSessionRecording(a){var b,c,d,e,f,g=!0===a,h={sampling:g||!(null==a||!a.sampling),linked_flag:g||!(null==a||!a.linked_flag),url_trigger:g||!(null==a||!a.url_trigger),event_trigger:g||!(null==a||!a.event_trigger)};Object.values(h).some(Boolean)&&(null==(b=this.sessionManager)||b.checkAndGetSessionAndWindowId(),h.sampling&&(null==(c=this.sessionRecording)||c.overrideSampling()),h.linked_flag&&(null==(d=this.sessionRecording)||d.overrideLinkedFlag()),h.url_trigger&&(null==(e=this.sessionRecording)||e.overrideTrigger("url")),h.event_trigger&&(null==(f=this.sessionRecording)||f.overrideTrigger("event"))),this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var a;return!(null==(a=this.sessionRecording)||!a.started)}captureException(a,b){var c=Error("PostHog syntheticException"),d=this.exceptions.buildProperties(a,{handled:!0,syntheticException:c});return this.exceptions.sendExceptionEvent(G({},d,b))}startExceptionAutocapture(a){this.set_config({capture_exceptions:null==a||a})}stopExceptionAutocapture(){this.set_config({capture_exceptions:!1})}loadToolbar(a){return this.toolbar.loadToolbar(a)}get_property(a){var b;return null==(b=this.persistence)?void 0:b.props[a]}getSessionProperty(a){var b;return null==(b=this.sessionPersistence)?void 0:b.props[a]}toString(){var a,b=null!=(a=this.config.name)?a:fA;return b!==fA&&(b=fA+"."+b),b}_isIdentified(){var a,b;return"identified"===(null==(a=this.persistence)?void 0:a.get_property(b8))||"identified"===(null==(b=this.sessionPersistence)?void 0:b.get_property(b8))}ys(){var a,b;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&V(this.getGroups())&&(null==(a=this.persistence)||null==(a=a.props)||!a[bO])&&(null==(b=this.persistence)||null==(b=b.props)||!b[ce]))}_s(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.ys()||this.ws("posthog.createPersonProfile")&&this.setPersonProperties({},{})}setInternalOrTestUser(){this.ws("posthog.setInternalOrTestUser")&&this.setPersonProperties({$internal_or_test_user:!0})}ws(a){return"never"===this.config.person_profiles?(bw.error(a+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.xs(ce,!0),!0)}rs(){if("always"===this.config.cookieless_mode)return!0;var a=this.consent.isOptedOut(),b=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||a&&!!b}$s(){var a,b,c,d,e=this.rs();return(null==(a=this.persistence)?void 0:a.ki)!==e&&(null==(c=this.persistence)||c.set_disabled(e)),(null==(b=this.sessionPersistence)?void 0:b.ki)!==e&&(null==(d=this.sessionPersistence)||d.set_disabled(e)),e}opt_in_capturing(a){var b,c,d,e;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),null==(c=this.sessionManager)||c.destroy(),null==(d=this.pageViewManager)||d.destroy(),this.sessionManager=new fh(this),this.pageViewManager=new dP(this),this.persistence&&(this.sessionPropsManager=new ff(this,this.sessionManager,this.persistence)),this.sessionRecording=new fw(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.$s(),this.cs(),null==(b=this.sessionRecording)||b.startIfEnabledOrStop(),"on_reject"==this.config.cookieless_mode&&this.surveys.loadIfEnabled(),(W(null==a?void 0:a.captureEventName)||null!=a&&a.captureEventName)&&this.capture(null!=(e=null==a?void 0:a.captureEventName)?e:"$opt_in",null==a?void 0:a.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.fs()):bw.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var a,b,c;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.$s(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:cg,$device_id:null}),null==(a=this.sessionManager)||a.destroy(),null==(b=this.pageViewManager)||b.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(c=this.sessionRecording)||c.stopRecording(),this.sessionRecording=void 0,this.fs())):bw.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var a=this.consent.consent;return a===db.GRANTED?"granted":a===db.DENIED?"denied":"pending"}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.$s()}_is_bot(){return v?fl(v,this.config.custom_blocked_useragents):void 0}fs(){w&&("visible"===w.visibilityState?this.Kr||(this.Kr=!0,this.capture("$pageview",{title:w.title},{send_instantly:!0}),this.Yr&&(w.removeEventListener("visibilitychange",this.Yr),this.Yr=null)):this.Yr||(this.Yr=this.fs.bind(this),bL(w,"visibilitychange",this.Yr)))}debug(a){!1===a?(null==q||q.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(null==q||q.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}M(){var a,b,c,d,e=this.ts||{};return"advanced_disable_flags"in e?!!e.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(bw.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(b="advanced_disable_decide",c=(a="advanced_disable_flags")in e&&!$(e[a]),d=b in e&&!$(e[b]),c?e[a]:!!d&&(bw&&bw.warn("Config field '"+b+"' is deprecated. Please use '"+a+"' instead. The old field will be removed in a future major version."),e[b]))}bs(a){if($(this.config.before_send))return a;var b=S(this.config.before_send)?this.config.before_send:[this.config.before_send],c=a;for(var d of b){if($(c=d(c))){var e="Event '"+a.event+"' was rejected in beforeSend function";return ac(a.event)?bw.warn(e+". This can cause unexpected behavior."):bw.info(e),null}c.properties&&!V(c.properties)||bw.warn("Event '"+a.event+"' has no properties after beforeSend function, this is likely an error.")}return c}getPageViewId(){var a;return null==(a=this.pageViewManager.Kt)?void 0:a.pageViewId}captureTraceFeedback(a,b){this.capture("$ai_feedback",{$ai_trace_id:String(a),$ai_feedback_text:b})}captureTraceMetric(a,b,c){this.capture("$ai_metric",{$ai_trace_id:String(a),$ai_metric_name:b,$ai_metric_value:String(c)})}Zr(a){var b=ab(a)&&!a,c=c5.H()&&"true"===c5.q("ph_debug");return!b&&(!!c||a)}}!function(a,b){for(var c=0;c<b.length;c++)a.prototype[b[c]]=bH(a.prototype[b[c]])}(fF,["identify"]),function(a){a.SHOWN="product tour shown",a.DISMISSED="product tour dismissed",a.COMPLETED="product tour completed",a.STEP_SHOWN="product tour step shown",a.STEP_COMPLETED="product tour step completed",a.BUTTON_CLICKED="product tour button clicked",a.STEP_SELECTOR_FAILED="product tour step selector failed",a.BANNER_CONTAINER_SELECTOR_FAILED="product tour banner container selector failed",a.BANNER_ACTION_CLICKED="product tour banner action clicked"}({}),function(a){a.TOUR_ID="$product_tour_id",a.TOUR_NAME="$product_tour_name",a.TOUR_ITERATION="$product_tour_iteration",a.TOUR_RENDER_REASON="$product_tour_render_reason",a.TOUR_STEP_ID="$product_tour_step_id",a.TOUR_STEP_ORDER="$product_tour_step_order",a.TOUR_STEP_TYPE="$product_tour_step_type",a.TOUR_DISMISS_REASON="$product_tour_dismiss_reason",a.TOUR_BUTTON_TEXT="$product_tour_button_text",a.TOUR_BUTTON_ACTION="$product_tour_button_action",a.TOUR_BUTTON_LINK="$product_tour_button_link",a.TOUR_BUTTON_TOUR_ID="$product_tour_button_tour_id",a.TOUR_STEPS_COUNT="$product_tour_steps_count",a.TOUR_STEP_SELECTOR="$product_tour_step_selector",a.TOUR_STEP_SELECTOR_FOUND="$product_tour_step_selector_found",a.TOUR_STEP_ELEMENT_TAG="$product_tour_step_element_tag",a.TOUR_STEP_ELEMENT_ID="$product_tour_step_element_id",a.TOUR_STEP_ELEMENT_CLASSES="$product_tour_step_element_classes",a.TOUR_STEP_ELEMENT_TEXT="$product_tour_step_element_text",a.TOUR_ERROR="$product_tour_error",a.TOUR_MATCHES_COUNT="$product_tour_matches_count",a.TOUR_FAILURE_PHASE="$product_tour_failure_phase",a.TOUR_WAITED_FOR_ELEMENT="$product_tour_waited_for_element",a.TOUR_WAIT_DURATION_MS="$product_tour_wait_duration_ms",a.TOUR_BANNER_SELECTOR="$product_tour_banner_selector",a.TOUR_LINKED_SURVEY_ID="$product_tour_linked_survey_id",a.USE_MANUAL_SELECTOR="$use_manual_selector",a.INFERENCE_DATA_PRESENT="$inference_data_present"}({});var fG,fH=(fG=fx[fA]=new fF,function(){function a(){a.done||(a.done=!0,fB=!1,bC(fx,function(a){a._dom_loaded()}))}null!=w&&w.addEventListener?"complete"===w.readyState?a():bL(w,"DOMContentLoaded",a,{capture:!1}):q&&bw.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),fG);let fI=g.Ik({password:g.Yj().min(6,"Password must be at least 6 characters"),confirmPassword:g.Yj()}).refine(a=>a.password===a.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function fJ(){let[a,b]=(0,i.useState)({}),c=(0,h.useRouter)(),{register:g,handleSubmit:j,formState:{errors:q,isSubmitting:r},setError:s}=(0,e.mN)({resolver:(0,f.u)(fI)}),t=async a=>{fH.capture("reset_password_attempted",{password_length:a.password.length,passwords_match:a.password===a.confirmPassword,timestamp:new Date().toISOString(),page:"/reset-password"});try{let d=new FormData;d.append("password",a.password),d.append("confirmPassword",a.confirmPassword);let e=await k(d);if("error"in e)return void b({error:e.error});e.success&&(fH.capture("reset_password_success",{timestamp:new Date().toISOString(),page:"/reset-password"}),b({success:e.message}),setTimeout(()=>{c.push("/")},2e3))}catch(a){s("root",{message:"An unexpected error occurred. Please try again."})}};return(0,d.jsx)(p.Zp,{className:"w-full max-w-[26rem] mx-auto border-2 shadow-retro-right",children:(0,d.jsx)(p.Wu,{className:"pt-6",children:(0,d.jsxs)("form",{onSubmit:j(t),className:"flex flex-col gap-4",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h1",{className:"font-riffic-free text-4xl md:text-5xl font-black mb-2",children:"Reset password"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Please enter your new password below."})]}),(a.error||a.success)&&(0,d.jsx)("div",{className:"animate-in slide-in-from-top duration-300",children:(0,d.jsx)(l.C,{message:a})}),(0,d.jsxs)("div",{className:"space-y-1 w-full",children:[(0,d.jsx)(o.J,{htmlFor:"password",className:"text-xs",children:"New password"}),(0,d.jsx)(n.p,{id:"password",type:"password",className:"border-2 text-base",placeholder:"New password",...g("password")}),q.password&&(0,d.jsx)("p",{className:"text-sm text-destructive mt-1",children:q.password.message})]}),(0,d.jsxs)("div",{className:"space-y-1 w-full",children:[(0,d.jsx)(o.J,{htmlFor:"confirmPassword",className:"text-xs",children:"Confirm password"}),(0,d.jsx)(n.p,{id:"confirmPassword",type:"password",className:"border-2 text-base",placeholder:"Confirm password",...g("confirmPassword")}),q.confirmPassword&&(0,d.jsx)("p",{className:"text-sm text-destructive mt-1",children:q.confirmPassword.message})]}),(0,d.jsx)(m.b,{pendingText:"Resetting Password...",disabled:r,children:"Reset password"})]})})})}},89962:(a,b,c)=>{"use strict";c.d(b,{C:()=>j});var d=c(21124),e=c(59268),f=c(18310),g=c(15514),h=c(41636),i=c.n(h);function j({message:a}){return a&&0!==Object.keys(a).length?(0,d.jsxs)("div",{className:"flex flex-col gap-2 w-full text-base",children:[a.success&&(0,d.jsxs)("div",{className:(0,g.cn)("flex items-center gap-2 p-4 rounded-xl border border-[#0A66C2]/20",`bg-[#0A66C2]/5 text-[#0A66C2] ${i().variable} font-aeonik`),children:[(0,d.jsx)(e.A,{className:"h-5 w-5 shrink-0"}),(0,d.jsx)("span",{children:a.success})]}),a.error&&(0,d.jsxs)("div",{className:(0,g.cn)("flex items-center gap-2 p-4 rounded-xl border border-red-200",`bg-red-50 text-red-600 ${i().variable} font-aeonik`),children:[(0,d.jsx)(f.A,{className:"h-5 w-5 shrink-0"}),(0,d.jsx)("span",{children:a.error})]}),a.message&&!a.success&&!a.error&&(0,d.jsx)("div",{className:(0,g.cn)("flex items-center gap-2 p-4 rounded-xl border border-[#0A66C2]/20",`bg-[#0A66C2]/5 text-[#0A66C2] ${i().variable} font-aeonik`),children:(0,d.jsx)("span",{children:a.message})})]}):null}},91645:a=>{"use strict";a.exports=require("net")},94735:a=>{"use strict";a.exports=require("events")},95555:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,dynamic:()=>i});var d=c(75338),e=c(34848),f=c(18458),g=c(83762),h=c(53659);let i="force-dynamic";async function j({children:a}){let b=null;try{b=await (0,h.xA)()}catch(a){console.error("Protected layout authentication error:",a instanceof Error?a.message:String(a))}return(0,d.jsx)(e.UserProvider,{user:b,children:(0,d.jsx)(g.DemoModeProvider,{children:(0,d.jsx)(f.RealtimeProvider,{children:a})})})}},96487:()=>{}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[331,862,441,99,850,385],()=>b(b.s=81060));module.exports=c})();