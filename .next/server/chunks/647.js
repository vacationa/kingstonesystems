exports.id=647,exports.ids=[647],exports.modules={4570:a=>{a.exports={style:{fontFamily:"'JetBrains Mono', 'JetBrains Mono Fallback'",fontStyle:"normal"},className:"__className_747d7b",variable:"__variable_747d7b"}},18458:(a,b,c)=>{"use strict";c.d(b,{RealtimeProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call RealtimeProvider() from the server but RealtimeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/context/realtime-context.tsx","RealtimeProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useRealtime() from the server but useRealtime is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/context/realtime-context.tsx","useRealtime")},20079:(a,b,c)=>{Promise.resolve().then(c.bind(c,83762)),Promise.resolve().then(c.bind(c,18458)),Promise.resolve().then(c.bind(c,34848))},21532:(a,b,c)=>{Promise.resolve().then(c.bind(c,35708))},31260:(a,b,c)=>{Promise.resolve().then(c.bind(c,79467))},34848:(a,b,c)=>{"use strict";c.d(b,{UserProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/context/user-context.tsx","UserProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/context/user-context.tsx","useUser")},35708:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/adhi/Repos/kingstonesystems/app/(protected)/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/(protected)/dashboard/layout.tsx","default")},47763:(a,b,c)=>{"use strict";c.d(b,{U:()=>f});var d=c(27968),e=c(86802);let f=async()=>{try{let a;try{a=await (0,e.UL)()}catch(b){console.error("Error creating cookie store:",b),a={getAll:()=>[],get:()=>void 0,set:()=>{}}}return(0,d.createServerClient)("https://jtnyrkqxsrlbldbnsohf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp0bnlya3F4c3JsYmxkYm5zb2hmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5MzI3NTgsImV4cCI6MjA2NTUwODc1OH0.tnLvT4n4aQela3pUHUnvOHIwvY_Twfr9T-Fplyul4Ug",{cookies:{getAll(){try{return a.getAll()}catch(a){return console.error("Error getting all cookies:",a),[]}},setAll(b){try{b.forEach(({name:b,value:c,options:d})=>{a.set(b,c,d)})}catch(a){console.error("Error setting cookies:",a)}}}})}catch(a){throw console.error("Error creating Supabase client:",a),a instanceof Error&&(console.error("Error message:",a.message),console.error("Error stack:",a.stack)),a}}},53659:(a,b,c)=>{"use strict";c.d(b,{BP:()=>p,JR:()=>n,Kd:()=>o,Lz:()=>k,RX:()=>j,hx:()=>m,jN:()=>l,xA:()=>q});var d=c(75879);c(68633);var e=c(47763),f=c(86802),g=c(82161),h=c(51669);let i=async(a,b)=>{let{error:c}=await b.from("linkedin_settings").upsert({user_id:a,max_message_per_day:50,max_connections_per_day:30,total_visits_per_day:100},{onConflict:"user_id",ignoreDuplicates:!0});c&&console.error("Error upserting default LinkedIn settings:",c.message)},j=async a=>{let b=a.get("email")?.toString(),c=a.get("password")?.toString(),d=a.get("firstName")?.toString(),f=a.get("lastName")?.toString(),g=a.get("referralCode")?.toString();try{let a=await (0,e.U)(),{data:b,error:c}=await a.from("profiles").select("count").single();if(c&&"PGRST116"!==c.code)return console.error("Database connection error:",c.message),{error:"Unable to connect to the database. Please try again later."}}catch(a){return console.error("Database connection error:",a),{error:"Unable to connect to the database. Please try again later."}}let h=await (0,e.U)();if(!b||!c)return{error:"Email and password are required"};try{let{data:a,error:e}=await h.from("profiles").select("*").eq("email",b).single();if(e&&"PGRST116"!==e.code)return console.error("Error checking existing profile:",e.message),{error:"Error checking existing profile"};if(a)return{error:"This email may already be in use"};let i=1;if(g){let a=g.toUpperCase();a.includes("2WK")?i=2:a.includes("YC")&&(i=8)}let{data:j,error:k}=await h.auth.signUp({email:b,password:c,options:{data:{first_name:d,last_name:f,email:b,trial_weeks:i}}});if(k)return console.error("Sign up error:",k.message),{error:"Failed to create account. Please try again."};if(!j?.user)return console.error("No user data returned from signup"),{error:"Failed to create user"};if(j.user?.identities?.length===0)return{error:"This email may already be in use"};return await new Promise(a=>setTimeout(a,1e3)),{success:!0,message:"Sign up successful! Please check your email.",data:{email:b}}}catch(a){return console.error("Unexpected error during sign up:",a instanceof Error?a.message:a),{error:"An unexpected error occurred during sign up"}}},k=async a=>{let b=a.get("email"),c=a.get("password"),d=await (0,e.U)(),g=(await (0,f.b3)()).get("referer")||"";if(!b||!c)return{error:"Email and password are required"};if(g.includes("operator-login")){let{error:a}=await d.auth.signInWithPassword({email:b,password:c});if(a)return console.error(a.message),{error:"Invalid email or password"};let{data:{user:e}}=await d.auth.getUser();return e?.id&&await i(e.id,d),{success:!0,message:"Sign in successful!"}}return await d.auth.signInWithPassword({email:b,password:c}),{error:"Invalid email or password"}},l=async a=>{let b=a.get("email")?.toString(),c=await (0,e.U)(),d=(await (0,f.b3)()).get("origin");if(!b)return{error:"Email is required"};let{error:g}=await c.auth.resetPasswordForEmail(b,{redirectTo:`${d}/api/auth/callback?redirect_to=/reset-password`});return g?(console.error(g.message),{error:"Failed to send reset email. Please try again."}):{success:!0,message:"Check your email for a link to reset your password."}},m=async a=>{let b=await (0,e.U)(),c=a.get("password"),d=a.get("confirmPassword");if(!c||!d)return{error:"Password and confirm password are required"};if(c!==d)return{error:"Passwords do not match"};let{error:f}=await b.auth.updateUser({password:c});return f?(console.error(f.message),{error:"Failed to reset password. Please try again."}):{success:!0,message:"Password has been reset successfully."}},n=async a=>{let b=a.get("otp")?.toString(),c=a.get("email")?.toString(),d=await (0,e.U)();if(!b||!c)return{error:"OTP and email are required"};let{error:f}=await d.auth.verifyOtp({email:c,token:b,type:"email"});if(f)return console.error(f.message),{error:"Invalid verification code. Please try again."};let{data:{user:g}}=await d.auth.getUser();return g?.id&&await i(g.id,d),{success:!0,message:"Account created successfully",data:{email:c}}},o=async()=>{let a=await (0,e.U)();return await a.auth.signOut(),(0,g.redirect)("/sign-in")},p=async()=>{let a=await (0,e.U)();await a.auth.signOut()},q=async()=>{try{let a=await (0,e.U)(),{data:{user:b}}=await a.auth.getUser();return b?.id&&await i(b.id,a),b}catch(a){return console.error("Error checking authentication:",a),null}};(0,h.D)([j,k,l,m,n,o,p,q]),(0,d.A)(j,"7f411d2c5eb171ef310d5c09e9f285f189378a70db",null),(0,d.A)(k,"7ffda1da3ec4b8e6be1acb4fd58ffd3456d55e3f99",null),(0,d.A)(l,"7f9a98121de92b5cd66fcc3109ecfa8cb7c2d0f095",null),(0,d.A)(m,"7f6ab9b2e622354b0acbbb7d19a49d0b4ea73c3e6d",null),(0,d.A)(n,"7f3e34eac4d4336fa6f48d29f5037ecd5c94f8688a",null),(0,d.A)(o,"7f02d8a35e0417a30e01973d0ec112fd82a49a2085",null),(0,d.A)(p,"7f00dfc32a6b7a3078a30afa5d7357c161b35fdb1a",null),(0,d.A)(q,"7fed87a174b932dac2d21189d486d35a2c90f5feed",null)},79467:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>q});var d=c(21124),e=c(38301),f=c(3991),g=c.n(f),h=c(42378),i=c(23339);let j=(0,i.A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),k=(0,i.A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),l=(0,i.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),m=(0,i.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),n=(0,i.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var o=c(4570),p=c.n(o);function q({children:a}){let b=(0,h.usePathname)(),[c,f]=(0,e.useState)(!1),i=[{name:"Mission Control",path:"/dashboard",icon:(0,d.jsx)(j,{size:20})},{name:"Agency Vault",path:"/dashboard/resources",icon:(0,d.jsx)(k,{size:20})},{name:"30-Day Sprint",path:"#",icon:(0,d.jsx)(l,{size:20}),locked:!0}];return(0,d.jsxs)("div",{className:"font-[family-name:var(--font-figtree)] min-h-screen bg-[#0F172A] flex flex-col md:flex-row text-gray-100 overflow-hidden",children:[(0,d.jsxs)("aside",{className:`${c?"w-20":"w-64"} border-r border-[#1E293B] bg-[#0F172A] flex flex-col flex-shrink-0 relative z-20 h-screen transition-all duration-300 ease-in-out shadow-2xl`,children:[(0,d.jsx)("button",{onClick:()=>f(!c),className:"absolute -right-3 top-10 w-6 h-6 bg-[#1E293B] border border-[#334155] rounded-full flex items-center justify-center text-gray-400 hover:text-white transition-colors z-30 shadow-sm",children:c?(0,d.jsx)(m,{size:14}):(0,d.jsx)(n,{size:14})}),(0,d.jsxs)("div",{className:`p-6 border-b border-[#1E293B] ${c?"items-center px-4":""}`,children:[(0,d.jsxs)(g(),{href:"/",className:"flex items-center gap-3 no-underline",children:[(0,d.jsx)("img",{src:"/assets/newlogo.png",alt:"Kingstone Systems",className:"transition-all duration-300",style:{height:"32px",width:"auto",borderRadius:"6px"}}),!c&&(0,d.jsxs)("span",{className:"font-semibold text-base text-white tracking-tight leading-tight whitespace-nowrap",children:["Kingstone",(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"text-blue-500 font-bold",children:"AI Sprint"})]})]}),!c&&(0,d.jsxs)("p",{className:`${p().variable} font-mono text-[10px] text-emerald-500 mt-3 tracking-widest uppercase flex items-center gap-1.5`,children:[(0,d.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,d.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,d.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),"System Online"]})]}),(0,d.jsxs)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:[!c&&(0,d.jsx)("div",{className:`${p().variable} font-mono text-[10px] text-slate-500 uppercase tracking-widest px-3 mb-4 mt-2 font-medium`,children:"Main Menu"}),i.map(a=>{let e=b===a.path;return a.locked?(0,d.jsxs)("div",{className:`flex items-center justify-between px-3 py-2.5 rounded-xl text-slate-600 cursor-not-allowed ${c?"justify-center":""}`,title:c?a.name:"",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("span",{className:"opacity-40",children:a.icon}),!c&&(0,d.jsx)("span",{className:"text-sm font-semibold",children:a.name})]}),!c&&(0,d.jsx)("span",{className:"text-[10px] bg-[#1E293B] text-slate-500 px-2 py-0.5 rounded-md font-mono uppercase",children:"Soon"})]},a.name):(0,d.jsx)(g(),{href:a.path,className:`flex items-center justify-between px-3 py-2.5 rounded-xl transition-all duration-200 no-underline ${e?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-[#1E293B] hover:text-white"} ${c?"justify-center":""}`,title:c?a.name:"",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("span",{className:e?"text-white":"text-blue-500",children:a.icon}),!c&&(0,d.jsx)("span",{className:"text-sm font-semibold tracking-wide",children:a.name})]})},a.name)})]}),(0,d.jsxs)("div",{className:"p-4 border-t border-[#1E293B] bg-[#0F172A]",children:[(0,d.jsxs)("div",{className:`flex items-center gap-3 px-3 py-2.5 rounded-xl bg-[#1E293B] border border-[#334155] ${c?"justify-center":""}`,children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-blue-400 flex items-center justify-center text-xs font-bold text-white shadow-sm flex-shrink-0",children:"K"}),!c&&(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"text-sm font-bold text-white truncate",children:"Sprint Member"}),(0,d.jsx)("div",{className:`${p().variable} font-mono text-[10px] text-slate-500 uppercase tracking-widest`,children:"5-Day Free Sprint"})]})]}),!c&&(0,d.jsx)(g(),{href:"/",className:"mt-3 flex items-center gap-2 px-3 py-2 text-xs text-slate-500 hover:text-blue-400 transition-colors no-underline font-medium",children:"â† Back to kingstonesystems.com"})]})]}),(0,d.jsx)("main",{className:"flex-1 h-screen overflow-y-auto relative w-full bg-[#0F172A] transition-all duration-300",children:(0,d.jsx)("div",{className:"relative z-10 w-full h-full",children:a})})]})}},79911:(a,b,c)=>{Promise.resolve().then(c.bind(c,24544)),Promise.resolve().then(c.bind(c,73994)),Promise.resolve().then(c.bind(c,77070))},83762:(a,b,c)=>{"use strict";c.d(b,{DemoModeProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call DemoModeProvider() from the server but DemoModeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/context/demo-mode-context.tsx","DemoModeProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useDemoMode() from the server but useDemoMode is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/adhi/Repos/kingstonesystems/app/context/demo-mode-context.tsx","useDemoMode")},95555:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,dynamic:()=>i});var d=c(75338),e=c(34848),f=c(18458),g=c(83762),h=c(53659);let i="force-dynamic";async function j({children:a}){let b=null;try{b=await (0,h.xA)()}catch(a){console.error("Protected layout authentication error:",a instanceof Error?a.message:String(a))}return(0,d.jsx)(e.UserProvider,{user:b,children:(0,d.jsx)(g.DemoModeProvider,{children:(0,d.jsx)(f.RealtimeProvider,{children:a})})})}}};